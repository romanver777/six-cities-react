{"version":3,"sources":["history.js","fb.js","reducer.js","const.js","helpers/helpers.js","components/sorting-type/sorting-type.jsx","components/bookmark-button/bookmark-button.jsx","components/mark/mark.jsx","components/rating/rating.jsx","components/price/price.jsx","components/card/card.jsx","components/card-list/card-list.jsx","components/cities-list/cities-list.jsx","components/cities-no-places/cities-no-places.jsx","components/map/map.jsx","components/header/header.jsx","components/main/main.jsx","components/neighbourhood-list/neughbourhood-list.jsx","components/error-page/error-page.jsx","components/property-gallery/property-gallery.jsx","components/property-features/property-features.jsx","components/property-inside/property-inside.jsx","components/property-host/property-host.jsx","components/offer-property/offer-property.jsx","components/location-button/location-button.jsx","components/sign-in/sign-in.jsx","components/favorite-card/favorite-card.jsx","components/favorites-list/favorites-list.jsx","components/favorites/favorites.jsx","components/loader/loader.jsx","components/private-route/private-route.jsx","components/app/app.jsx","index.js"],"names":["history","createBrowserHistory","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","getDatabase","initialState","city","hotels","currentOffer","favoriteList","isAuthorizationRequired","currentUser","reviews","getFavoriteIndexFromList","offer","length","findIndex","item","hotelId","ActionType","ActionCreator","type","payload","status","dataUser","list","reducer","state","action","Object","assign","splice","Operation","loadHotels","dispatch","getState","dbRef","ref","get","child","then","snapshot","exists","val","catch","error","console","log","checkAuth","getAuth","onAuthStateChanged","user","downloadCurrentUserData","uid","login","authData","auth","setPersistence","browserSessionPersistence","signInWithEmailAndPassword","email","password","userCredential","uploadToFavoriteList","db","update","toggleFavoriteList","index","push","BASE_PATHNAME","APP_ROUTE","LOGIN","ROOT","OFFER","FAVORITES","ERROR","LOCATION_BUTTON_CLASS","INPUT_LOGIN_CLASS","getIndex","items","i","toLowerCase","getActiveIconParams","width","height","iconUrl","iconSize","getIconParams","getAllOffers","arr","forEach","hasOwnProperty","offers","getCityOffer","id","filter","it","getCityOffers","getInputClassName","inputValue","inputValid","formatFavoriteList","arrayOfObject","cities","Set","res","add","map","favorites","obj","SortingType","props","handleClickToggle","setState","prevState","isOpen","handleClick","e","onChangeOption","document","querySelector","classList","remove","option","target","innerHTML","className","method","tabIndex","onClick","this","xlinkHref","React","PureComponent","propType","PropTypes","func","isRequired","size","prefix","BookmarkButton","onBookmarkClick","isActive","small","buttonClassActive","style","fill","stroke","Mark","isPremium","Rating","rating","currentRatingPersent","Price","price","Card","isFavorite","onMouseOver","onMouseLeave","is_premium","to","src","preview_image","alt","handleBookmarkClick","title","CardList","handleMouseOver","handleMouseLeave","key","Component","CitiesList","Fragment","color","backgroundColor","CitiesNoPlaces","Map","_initMap","cityCoord","icon","leaflet","zoom","center","zoomControl","marker","setView","tileLayer","attribution","addTo","mark","markers","coords","_changeIconsOnHover","_latlng","lat","lng","setIcon","prevProps","offerHover","off","visibility","defaultValue","Header","onLogoClick","window","location","pathname","name","Main","hoverItem","handleCityClick","onCityClick","handleSortOffers","sort","a","b","toggleBookmark","cityOffers","reload","cityOffer","connect","NeighbourhoodList","ErrorPage","textDecoration","PropertyGallery","images","img","PropertyFeatures","bedrooms","max_adults","PropertyInside","goods","good","PropertyHost","host","avatar_url","is_pro","description","OfferProperty","scrollTo","neighbourhoods","number","from","latLng","distanceTo","prev","next","slice","getNhoods","getCityCoord","marginBottom","ownProps","match","params","LocationButton","onFavoriteCityClick","toUpperCase","SignIn","handleSubmit","onSubmit","preventDefault","validateField","value","emailValid","passwordValid","validateForm","formValid","handleChange","max","Math","floor","random","replace","isAuthRequired","placeholder","required","onChange","disabled","FavoriteCard","FavoritesList","handleFavoriteCityClick","cityObj","ind","hotel","cityClick","Loader","PrivateRoute","component","rest","render","App","handleReload","isHotelsLoaded","handleOfferClick","activeOfferId","exact","path","Favorites","getCurrentUserData","store","createStore","compose","applyMiddleware","thunk","__REDUX_DEVTOOLS_EXTENSION__","f","ReactDom","getElementById","init"],"mappings":"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","file":"static/js/main.4c23f3f1.chunk.js","sourcesContent":["import {createBrowserHistory} from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","import {initializeApp} from \"firebase/app\";\r\nimport {getDatabase} from \"firebase/database\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: `AIzaSyBxAD3KOWDk8CIHIf92sMRDVn1ncpoxA4w`,\r\n  authDomain: `cities-5fbfb.firebaseapp.com`,\r\n  projectId: `cities-5fbfb`,\r\n  storageBucket: `cities-5fbfb.appspot.com`,\r\n  messagingSenderId: `925423531890`,\r\n  appId: `1:925423531890:web:366423e60c1ba0f6a14feb`,\r\n  measurementId: `G-SR29YM1GY2`,\r\n  databaseURL: `https://cities-5fbfb-default-rtdb.europe-west1.firebasedatabase.app/`,\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const db = getDatabase(app);\r\n\r\nexport default app;\r\n","import {\r\n  getAuth,\r\n  setPersistence,\r\n  signInWithEmailAndPassword,\r\n  browserSessionPersistence,\r\n} from \"firebase/auth\";\r\nimport app from \"./fb\";\r\nimport { getDatabase, ref, child, get, update } from \"firebase/database\";\r\n\r\nconst initialState = {\r\n  city: ``,\r\n  hotels: [],\r\n  currentOffer: {},\r\n  favoriteList: [],\r\n  isAuthorizationRequired: true,\r\n  currentUser: {},\r\n  reviews: [],\r\n};\r\n\r\nconst getFavoriteIndexFromList = (offer, favoriteList) => {\r\n  if (!favoriteList || !favoriteList.length) return -1;\r\n\r\n  return favoriteList.findIndex((item) => item.hotelId === offer.hotelId);\r\n};\r\n\r\nconst ActionType = {\r\n  SET_CITY: `SET_CITY`,\r\n  SET_HOTELS: `SET_HOTELS`,\r\n  SET_CURRENT_OFFER: `SET_CURRENT_OFFER`,\r\n  REQUIRE_AUTHORIZATION: `REQUIRE_AUTHORIZATION`,\r\n  SET_CURRENT_USER: `SET_CURRENT_USER`,\r\n  RELOAD_ALL: `RELOAD_ALL`,\r\n  TOGGLE_FAVORITE: `TOGGLE_FAVORITE`,\r\n  ADD_FAVORITE: `ADD_FAVORITE`,\r\n  REMOVE_FAVORITE: `REMOVE_FAVORITE`,\r\n  SET_FAVORITES: `SET_FAVORITES`,\r\n  SET_FAVORITE_LIST: `SET_FAVORITE_LIST`,\r\n  SET_REVIEWS: `SET_REVIEWS`,\r\n};\r\n\r\nconst ActionCreator = {\r\n  setCity: (city) => ({\r\n    type: ActionType.SET_CITY,\r\n    payload: city,\r\n  }),\r\n\r\n  setHotels: (hotels) => ({\r\n    type: ActionType.SET_HOTELS,\r\n    payload: hotels,\r\n  }),\r\n\r\n  setCurrentOffer: (currentOffer) => ({\r\n    type: ActionType.SET_CURRENT_OFFER,\r\n    payload: currentOffer,\r\n  }),\r\n\r\n  requireAuthorization: (status) => ({\r\n    type: ActionType.REQUIRE_AUTHORIZATION,\r\n    payload: status,\r\n  }),\r\n\r\n  setCurrentUser: (dataUser) => ({\r\n    type: ActionType.SET_CURRENT_USER,\r\n    payload: dataUser,\r\n  }),\r\n\r\n  toggleFavorite: (offer, favoriteList) => {\r\n    const offerInd = getFavoriteIndexFromList(offer, favoriteList);\r\n\r\n    if (offerInd < 0) {\r\n      return {\r\n        type: `ADD_FAVORITE`,\r\n        payload: offer,\r\n      };\r\n    }\r\n    return {\r\n      type: `REMOVE_FAVORITE`,\r\n      payload: offerInd,\r\n    };\r\n  },\r\n\r\n  setFavorites: (favoriteList) => ({\r\n    type: `SET_FAVORITES`,\r\n    payload: favoriteList,\r\n  }),\r\n\r\n  setFavoriteList: (list) => ({\r\n    type: `SET_FAVORITE_LIST`,\r\n    payload: list,\r\n  }),\r\n\r\n  setReviews: (reviews) => ({\r\n    type: `SET_REVIEWS`,\r\n    payload: reviews,\r\n  }),\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionType.SET_CITY:\r\n      return Object.assign({}, state, {\r\n        city: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_HOTELS:\r\n      return Object.assign({}, state, {\r\n        hotels: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_CURRENT_OFFER:\r\n      return Object.assign({}, state, {\r\n        currentOffer: action.payload,\r\n      });\r\n\r\n    case ActionType.REQUIRE_AUTHORIZATION:\r\n      return Object.assign({}, state, {\r\n        isAuthorizationRequired: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        currentUser: action.payload,\r\n      });\r\n\r\n    case ActionType.ADD_FAVORITE:\r\n      if (state.currentUser.favoriteList) {\r\n        return Object.assign({}, state, {\r\n          currentUser: {\r\n            ...Object.assign({}, state.currentUser, {\r\n              favoriteList: [...state.currentUser.favoriteList, action.payload],\r\n            }),\r\n          },\r\n        });\r\n      }\r\n      return Object.assign({}, state, {\r\n        currentUser: {\r\n          ...Object.assign({}, state.currentUser, {\r\n            favoriteList: [ action.payload],\r\n          }),\r\n        },\r\n      });\r\n\r\n    case ActionType.REMOVE_FAVORITE:\r\n      let list = [...state.favoriteList];\r\n      list.splice(action.payload, 1);\r\n\r\n      return Object.assign({}, state, {\r\n        favoriteList: list,\r\n      });\r\n\r\n    case ActionType.SET_FAVORITES:\r\n      return Object.assign({}, state, {\r\n        favoriteList: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_FAVORITE_LIST:\r\n      return Object.assign({}, state, {\r\n        favoriteList: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_REVIEWS:\r\n      return Object.assign({}, state, {\r\n        reviews: action.payload,\r\n      });\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst Operation = {\r\n  loadHotels: () => (dispatch, getState) => {\r\n    const dbRef = ref(getDatabase());\r\n\r\n    get(child(dbRef, `hotels/`))\r\n      .then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          dispatch(ActionCreator.setHotels(snapshot.val()));\r\n        }\r\n      })\r\n      .then(() => {\r\n        const city = getState().hotels[0].city;\r\n        \r\n        if (city) dispatch(ActionCreator.setCity(city));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  checkAuth: () => (dispatch, getState) => {\r\n    const auth = getAuth();\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n\t\t    dispatch(Operation.downloadCurrentUserData(user.uid));\r\n      }\r\n    });    \r\n  },\r\n\r\n  login: (authData) => (dispatch, getState) => {\r\n    const auth = getAuth(app);\r\n    setPersistence(auth, browserSessionPersistence)\r\n      .then(() =>\r\n        signInWithEmailAndPassword(auth, authData.email, authData.password)\r\n      )\r\n      .then((userCredential) =>\r\n        dispatch(Operation.downloadCurrentUserData(userCredential.user.uid))\r\n      )\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  downloadCurrentUserData: (uid) => (dispatch, getState) => {\r\n    const dbRef = ref(getDatabase());\r\n\r\n    get(child(dbRef, `users/${uid}`))\r\n      .then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          dispatch(ActionCreator.setCurrentUser(snapshot.val()));\r\n          dispatch(ActionCreator.requireAuthorization(false));\r\n        }\r\n      })\r\n      .then(() => {\r\n        if (getState().currentUser.favoriteList) {\r\n          dispatch(\r\n            ActionCreator.setFavoriteList(getState().currentUser.favoriteList)\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  uploadToFavoriteList: (list) => (dispatch, getState) => {\r\n    const db = getDatabase();\r\n    const uid = getAuth().currentUser.uid;\r\n\r\n    update(ref(db, `users/` + uid), { favoriteList: list })\r\n      .then(() => {\r\n        dispatch(Operation.downloadCurrentUserData(uid));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  toggleFavoriteList: (offer) => (dispatch, getState) => {\r\n    let list = getState().currentUser.favoriteList;\r\n    const index = getFavoriteIndexFromList(offer, list);\r\n\r\n    if(index > -1) {\r\n      list.splice(index, 1);\r\n      dispatch(Operation.uploadToFavoriteList(list));\r\n      return;\r\n    }\r\n    if(list) {\r\n      list.push(offer);\r\n      dispatch(Operation.uploadToFavoriteList(list));\r\n      return;\r\n    }\r\n    dispatch(Operation.uploadToFavoriteList([offer]));\r\n  },\r\n};\r\nexport { ActionCreator, reducer, Operation };\r\n","export const BASE_PATHNAME = `/six-cities-react`;\r\n\r\nexport const APP_ROUTE = {\r\n  LOGIN: `/login`,\r\n  ROOT: BASE_PATHNAME + `/`,\r\n  OFFER: BASE_PATHNAME + `/offer/:id`,\r\n  FAVORITES: BASE_PATHNAME + `/favorites`,\r\n  ERROR: BASE_PATHNAME + `/*`,\r\n};\r\n\r\nexport const ICON_SIZE = 30;\r\n\r\nexport const NUMBER_NEIBOURHOODS = 3;\r\n\r\nexport const LOCATION_BUTTON_CLASS = {\r\n  FAVORITES: `favorites__locations locations locations--current`,\r\n  LOGIN: `locations locations--login locations--current`,\r\n};\r\n\r\nexport const INPUT_LOGIN_CLASS = {\r\n  ERROR: `input_error`,\r\n  VALID: `input_valid`,\r\n};\r\n","import {ICON_SIZE, INPUT_LOGIN_CLASS, BASE_PATHNAME} from '../const';\r\nimport leaflet from 'leaflet';\r\n\r\nexport const getIndex = (items, city) => {\r\n\r\n  for (let i = 0; i < items.length; i++) {\r\n    if (items[i].city.toLowerCase() === city.toLowerCase()) {\r\n      return i;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getCityCoord = (hotels, city) => {\r\n\r\n  const index = getIndex(hotels, city);\r\n\r\n  return hotels[index].coords;\r\n};\r\n\r\nexport const getActiveIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n  iconUrl: BASE_PATHNAME + `/img/pin-active.svg`,\r\n  iconSize: [width, height]\r\n});\r\n\r\nexport const getIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n  iconUrl: BASE_PATHNAME + `/img/pin.svg`,\r\n  iconSize: [width, height]\r\n});\r\n\r\nexport const getAllOffers = (state) => {\r\n  let arr = [];\r\n\r\n  state.hotels.forEach((item) => {\r\n    if (item.hasOwnProperty(`offers`)) {\r\n      arr = [...arr, ...item.offers];\r\n    }\r\n  });\r\n\r\n  return arr;\r\n};\r\n\r\nexport const getCityOffer = (state, id) => {\r\n\r\n  return getAllOffers(state).filter((it) => it.hotelId === +id)[0];\r\n};\r\n\r\nexport const getCityOffers = (state, id) => {\r\n  const city = getCityOffer(state, id).city;\r\n\r\n  return getAllOffers(state).filter((it) => it.city === city);\r\n};\r\n\r\nexport const getNhoods = (offer, items, number) => {\r\n\r\n  let arr = [];\r\n  const from = leaflet.latLng(offer.coords);\r\n\r\n  arr.push({\r\n    offer,\r\n    length: 0\r\n  });\r\n\r\n  for (const it of items) {\r\n\r\n    if (it.id !== offer.id) {\r\n\r\n      let to = leaflet.latLng(it.coords);\r\n\r\n      arr.push({\r\n        offer: it,\r\n        length: from.distanceTo(to)\r\n      });\r\n    }\r\n  }\r\n  arr = arr.sort((prev, next) => prev.length - next.length);\r\n\r\n  for (let i = 0; i < arr.length; i++) {\r\n    arr[i] = arr[i].offer;\r\n  }\r\n\r\n  return arr.slice(1, number + 1);\r\n};\r\n\r\nexport const getLS = (name) => {\r\n  return JSON.parse(localStorage.getItem(name));\r\n};\r\n\r\nexport const setLS = (name, arr) => {\r\n  return localStorage.setItem(name, JSON.stringify(arr));\r\n};\r\n\r\nexport const getRandomInt = (max) => {\r\n\r\n  return Math.floor(Math.random() * Math.floor(max));\r\n};\r\n\r\nexport const \tgetInputClassName = (inputValue, inputValid) => {\r\n\r\n  if (inputValid) return INPUT_LOGIN_CLASS.VALID;\r\n\r\n  if (inputValue.length > 0) return INPUT_LOGIN_CLASS.ERROR;\r\n\r\n  return ``;\r\n};\r\n\r\nexport const formatFavoriteList = (arrayOfObject) => {\r\n\r\n  let cities = new Set();\r\n  let res = [];\r\n\r\n  arrayOfObject.forEach((it) => cities.add(it.city));\r\n\r\n  [...cities].map((city) => {\r\n    return res.push({\r\n      city,\r\n      favorites: [...arrayOfObject.filter((obj) => city === obj.city)],\r\n    });\r\n  });\r\n\r\n  return res;\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SortingType extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisOpen: false,\r\n\t\t\toption: `Popular`,\r\n\t\t}\r\n\t}\r\n\r\n\thandleClickToggle = () => {\r\n\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisOpen: !prevState.isOpen,\r\n\t\t}));\r\n\t};\r\n\r\n\thandleClick = (e) => {\r\n\r\n\t\tconst {onChangeOption} = this.props;\r\n\r\n\t\tdocument.querySelector('.places__option--active').classList.remove('places__option--active');\r\n\r\n\t\tthis.handleClickToggle();\r\n\t\tthis.setState({option: e.target.innerHTML});\r\n\r\n\t\te.target.classList.add('places__option--active');\r\n\r\n\t\tonChangeOption(e.target.innerHTML);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"places__sorting\" action=\"#\" method=\"get\">\r\n\t\t\t\t<span className=\"places__sorting-caption\">Sort by</span>\r\n\t\t\t\t<span className=\"places__sorting-type\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClickToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.state.option}\r\n\t\t\t\t\t<svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\r\n\t\t\t\t\t\t<use xlinkHref=\"#icon-arrow-select\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t\t<ul className={this.state.isOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t? `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t \t\t\t\t\t\t\t\t\tplaces__options--opened`\r\n\t\t\t\t\t\t\t\t\t\t\t\t: `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--closed`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<li className=\"places__option places__option--active\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPopular\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: low to high\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: high to low\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTop rated first\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSortingType.propType = {\r\n\tonChangeOption: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SortingType;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst size = {\r\n\tdefault: {\r\n\t\tprefix: `property`,\r\n\t\twidth: 31,\r\n\t\theight: 33,\r\n\t},\r\n\tsmall: {\r\n\t\tprefix: `place-card`,\r\n\t\twidth: 18,\r\n\t\theight: 19,\r\n\t}\r\n};\r\n\r\nconst BookmarkButton = (props) => {\r\n\r\n\tconst {onBookmarkClick, isActive, small} = props;\r\n\r\n\tconst prefix = small ? size.small.prefix : size.default.prefix;\r\n\tconst buttonClassActive = isActive ? `${prefix}__bookmark-button--active` : ``;\r\n\r\n\treturn (\r\n\t\t<button className={`${prefix}__bookmark-button ${buttonClassActive} button`}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={() => onBookmarkClick(small)}\r\n\t\t>\r\n\t\t\t<svg className={`${prefix}__bookmark-icon`}\r\n\r\n\t\t\t\t\t width={small ? size.small.width : size.default.width}\r\n\t\t\t\t\t height={small ? size.small.height : size.default.height}\r\n\t\t\t\t\t style={isActive ? {fill: `#4481c3`, stroke: `#4481c3`} : {fill: `none`,\r\n\t\t\t\t\t\t\t stroke: `#b8b8b8`}}\r\n\t\t\t>\r\n\t\t\t\t<use xlinkHref=\"#icon-bookmark\"/>\r\n\t\t\t</svg>\r\n\t\t\t<span className=\"visually-hidden\">To bookmarks</span>\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nBookmarkButton.propTypes = {\r\n\tisActive: PropTypes.bool,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default BookmarkButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Mark = (props) => {\r\n\r\n\tconst {isPremium, prefix} = props;\r\n\r\n\treturn isPremium ?\r\n\t\t<div className={`${prefix}__mark`}>\r\n\t\t\t<span>Premium</span>\r\n\t\t</div>\r\n\t\t: '';\r\n};\r\n\r\nMark.propTypes = {\r\n\tisPremium: PropTypes.bool.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Mark;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Rating = (props) => {\r\n\r\n\tconst {rating, prefix} = props;\r\n\r\n\tconst maxRatingPersent = 100;\r\n\tconst maxStars = 5;\r\n\tconst currentRatingPersent = rating * maxRatingPersent / maxStars;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__rating rating`}>\r\n\t\t\t<div className={`${prefix}__stars rating__stars`}>\r\n\t\t\t\t<span style={{width: currentRatingPersent + '%'}}/>\r\n\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t</div>\r\n\t\t\t{prefix === `property`\r\n\t\t\t\t? <span className={`${prefix}__rating-value rating__value`}>{rating}</span>\r\n\t\t\t\t: ``\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nRating.propTypes = {\r\n\trating: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Rating;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Price = (props) => {\r\n\r\n\tconst {price, prefix} = props;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__price`}>\r\n\t\t\t<b className={`${prefix}__price-value`}>&euro;{price}</b>\r\n\t\t\t<span className={`${prefix}__price-text`}>\r\n\t\t\t\t{prefix === `place-card` ? `/` : ``}&nbsp;night\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPrice.propTypes = {\r\n\tprice: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Price;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_PATHNAME} from '../../const.js';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Mark from '../mark/mark';\r\nimport Rating from '../rating/rating';\r\nimport Price from '../price/price';\r\n\r\nconst Card = (props) => {\r\n\r\n  const {item, isFavorite} = props;\r\n\r\n  const handleClick = (e) => props.onClick(e);\r\n  const handleMouseOver = (e) => props.onMouseOver(e);\r\n  const handleMouseLeave = () => props.onMouseLeave();\r\n  const handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n  return (\r\n    <article className=\"cities__place-card place-card\"\r\n      id={item.id}\r\n      onMouseOver={() => handleMouseOver(item)}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n\r\n      <Mark\r\n        isPremium={item.is_premium}\r\n        prefix=\"place-card\"\r\n      />\r\n\r\n      <div className=\"cities__image-wrapper place-card__image-wrapper\">\r\n        <Link to={BASE_PATHNAME + `/offer/` + item.hotelId}\r\n          className=\"buttonLink\"\r\n          onClick={() => handleClick(item)}\r\n        >\r\n          <img className=\"place-card__image\" src={item.preview_image} width=\"260\" height=\"200\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n\r\n          <Price\r\n            price={item.price}\r\n            prefix=\"place-card\"\r\n          />\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={(small) => handleBookmarkClick(item, small)}\r\n            isActive={isFavorite}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n\r\n        <Rating\r\n          rating={item.rating}\r\n          prefix=\"place-card\"\r\n        />\r\n\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={BASE_PATHNAME + `/offer/${item.hotelId}`}\r\n            className=\"card__title buttonLink\"\r\n            onClick={() => handleClick(item)}\r\n          >{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onClick: PropTypes.func,\r\n  onMouseOver: PropTypes.func,\r\n  onMouseLeave: PropTypes.func,\r\n  onBookmarkClick: PropTypes.func,\r\n  isFavorite: PropTypes.bool,\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Card from '../card/card';\r\n\r\nclass CardList extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst {items} = this.props.items;\r\n\r\n\t\tthis.state = {\r\n\t\t\titems: items,\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\thandleMouseOver = (item) => this.props.onMouseOver(item);\r\n\thandleMouseLeave = (e) => this.props.onMouseLeave(e);\r\n\thandleBookmarkClick = (offer, small) => this.props.onBookmarkClick(offer, small);\r\n\r\n\tisFavorite = (favoriteList, item) => {\r\n\r\n\t\tif (favoriteList) {\r\n\t\t\tlet isFavorite = favoriteList.filter((it) => it.hotelId === item.hotelId);\r\n\r\n\t\t\treturn !!isFavorite.length;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {items, favoriteList} = this.props;\r\n\r\n\t\treturn (\r\n\r\n\t\t\titems.map((item) => {\r\n\r\n\t\t\t\treturn <Card\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tkey={item.hotelId}\r\n\t\t\t\t\tisFavorite={this.isFavorite(favoriteList, item)}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t/>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCardList.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n};\r\n\r\nexport default CardList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nconst CitiesList = (props) => {\r\n\r\n  const {items, city, onClick} = props;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h1 className=\"visually-hidden\">Cities</h1>\r\n      <div className=\"tabs\">\r\n        <section className=\"locations container\">\r\n          <ul className=\"locations__list tabs__list\">\r\n\r\n            {items.map((it, i) => {\r\n\r\n              return (\r\n                <li className=\"locations__item\"\r\n                  key={i}\r\n                >\r\n                  <Link to={APP_ROUTE.ROOT} className={ (it.city === city) ? `locations__item-link tabs__item buttonLink tabs__item--active`\r\n                    : `locations__item-link tabs__item buttonLink`}\r\n                  style={{color: `#000`, backgroundColor: `#f5f5f5`}}\r\n                  onClick={() => onClick(it.city)}\r\n                  key={i}\r\n                  >\r\n                    <span>{it.city}</span>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n\r\n          </ul>\r\n        </section>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nCitiesList.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  onClick: PropTypes.func,\r\n  city: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst CitiesNoPlaces = (props) => {\r\n\r\n\tconst {city} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"cities__places-container cities__places-container--empty container\">\r\n\t\t\t<section className=\"cities__no-places\">\r\n\t\t\t\t<div className=\"cities__status-wrapper tabs__content\">\r\n\t\t\t\t\t<b className=\"cities__status\">No places to stay available</b>\r\n\t\t\t\t\t<p className=\"cities__status-description\">We could not find any property availbale at the moment in {city}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<div className=\"cities__right-section\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCitiesNoPlaces.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesNoPlaces;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport leaflet from 'leaflet';\r\n\r\nimport {getIconParams, getActiveIconParams} from '../../helpers/helpers';\r\n\r\nclass Map extends React.PureComponent {\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmap: null,\r\n\t\t\tmarkers: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\r\n\t\tconst {coords, items, offer} = this.props;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\telse {\r\n\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\r\n\t\tconst {coords, offerHover, items, offer} = this.props;\r\n\t\tconst {markers} = this.state;\r\n\r\n\t\tif (prevProps.offer !== offer) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\r\n\r\n\t\tif (prevProps.coords !== coords) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\r\n\t\tthis._changeIconsOnHover(offerHover, markers);\r\n\t}\r\n\r\n\t_initMap = (cityCoord, items, offer = null) => {\r\n\r\n\t\tconst city = cityCoord;\r\n\t\tlet icon = leaflet.icon(getIconParams());\r\n\t\tconst zoom = 12;\r\n\t\tconst map = leaflet.map('map', {\r\n\t\t\tcenter: city,\r\n\t\t\tzoom: zoom,\r\n\t\t\tzoomControl: false,\r\n\t\t\tmarker: true\r\n\t\t});\r\n\r\n\t\tmap.setView(city, zoom);\r\n\r\n\t\tleaflet.tileLayer(`https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png`, {\r\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n\t\t})\r\n\t\t\t.addTo(map);\r\n\r\n\t\tlet markers = [];\r\n\t\tlet mark;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\ticon = leaflet.icon(getActiveIconParams());\r\n\t\t\tmark = leaflet.marker(offer.coords, {icon});\r\n\t\t\tmark.addTo(map);\r\n\t\t}\r\n\r\n\t\tfor (const item of items) {\r\n\r\n\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\tmark = leaflet.marker(item.coords, {icon});\r\n\t\t\tmarkers.push(mark);\r\n\t\t}\r\n\r\n\t\tfor (const it of markers) {\r\n\t\t\tit.addTo(map);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmarkers: markers,\r\n\t\t\tmap: map\r\n\t\t});\r\n\t};\r\n\r\n\t_changeIconsOnHover = (offer, markers) => {\r\n\r\n\t\tfor (const it of markers) {\r\n\r\n\t\t\tlet icon;\r\n\r\n\t\t\tif (offer) {\r\n\t\t\t\tif (it._latlng.lat === offer.coords[0] &&\r\n\t\t\t\t\tit._latlng.lng === offer.coords[1]) {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams(35, 35));\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t}\r\n\t\t\tit.setIcon(icon);\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {items} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div id=\"map\"></div>\r\n\t\t\t\t<span style={{visibility: 'hidden'}} defaultValue={items}/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMap.propTypes = {\r\n\tcoords: PropTypes.array.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\toffer: PropTypes.object,\r\n\tofferHover: PropTypes.object,\r\n};\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE, BASE_PATHNAME} from '../../const';\r\n\r\nconst Header = (props) => {\r\n\r\n  const {isAuthorizationRequired, currentUser, onLogoClick} = props;\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"container\">\r\n        <div className=\"header__wrapper\">\r\n          <div className=\"header__left\">\r\n            <Link to={APP_ROUTE.ROOT}\r\n              className=\"header__logo-link buttonLink\"\r\n              onClick={onLogoClick}\r\n            >\r\n              <img className=\"header__logo\" src={BASE_PATHNAME + `/img/logo.svg`} alt=\"6 cities logo\" width=\"81\" height=\"41\"/>\r\n            </Link>\r\n          </div>\r\n          <nav className=\"header__nav\">\r\n            <ul className=\"header__nav-list\">\r\n              <li className=\"header__nav-item user\">\r\n                <button className=\"header__nav-link header__nav-link--profile buttonLink\">\r\n                  <div className=\"header__avatar-wrapper user__avatar-wrapper\">\r\n                  </div>\r\n\r\n                  {currentUser && !isAuthorizationRequired\r\n                    ? <span className=\"header__user-name user__name\">\r\n                      {(window.location.pathname !== `/favorites`) ? <Link to={BASE_PATHNAME + `/favorites`}>{currentUser.name}</Link> : currentUser.name}\r\n                    </span>\r\n                    : <span className=\"header__login\">\r\n                      {(window.location.pathname !== `/login`) ?\t<Link to={BASE_PATHNAME + `/login`}>Sign in</Link> : `Sign In`}\r\n                    </span>\r\n                  }\r\n\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nHeader.propTypes = {\r\n  isAuthorizationRequired: PropTypes.bool,\r\n  currentUser: PropTypes.object.isRequired,\r\n  onLogoClick: PropTypes.func,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {Operation} from '../../reducer';\r\n\r\nimport SortingType from '../sorting-type/sorting-type';\r\nimport CardList from '../card-list/card-list';\r\nimport CitiesList from '../cities-list/cities-list';\r\nimport CitiesNoPlaces from '../cities-no-places/cities-no-places';\r\nimport Map from '../map/map';\r\nimport Header from '../header/header';\r\n\r\nimport {getIndex} from '../../helpers/helpers';\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nclass Main extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffers: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.title = `6 cities - ${this.props.city}`;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (prevProps.city !== this.props.city) {\r\n\t\t\tthis.handleSortOffers('Popular');\r\n\t\t\tdocument.title = `6 cities - ${this.props.city}`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\t\tif(props.cityOffer !== state.offers) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffers: props.cityOffers\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\thandleSortOffers = (option) => {\r\n\r\n\t\tlet {offers} = this.state;\r\n\r\n\t\tswitch (option) {\r\n\r\n\t\t\tcase `Popular`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.id > b.id) return 1;\r\n\t\t\t\t\tif (a.id < b.id) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: low to high`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price > b.price) return 1;\r\n\t\t\t\t\tif (a.price < b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: high to low`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price < b.price) return 1;\r\n\t\t\t\t\tif (a.price > b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Top rated first`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.rating < b.rating) return 1;\r\n\t\t\t\t\tif (a.rating > b.rating) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t\tthis.setState({offers});\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\r\n\t\tconst {isAuthorizationRequired, toggleBookmark} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\t\t\twindow.location.assign(APP_ROUTE.LOGIN);\r\n\t\t} else{\r\n\t\t\ttoggleBookmark(offer);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, city, cityOffers, currentUser, isAuthorizationRequired, reload, favoriteList} = this.props;\r\n\t\tconst index = getIndex(hotels, city);\r\n\t\tconst cityCoord = hotels[index].coords;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--main\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={reload}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className={cityOffers.length ? 'page__main page__main--index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t : 'page__main page__main--index page__main--index-empty'}>\r\n\r\n\t\t\t\t\t<CitiesList items={hotels}\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCityClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"cities\">\r\n\r\n\t\t\t\t\t\t{cityOffers.length ?\r\n\t\t\t\t\t\t\t<div className=\"cities__places-container container\">\r\n\t\t\t\t\t\t\t\t<section className=\"cities__places places\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"visually-hidden\">Places</h2>\r\n\t\t\t\t\t\t\t\t\t<b className=\"places__found\">{cityOffers.length} places to stay in {city}</b>\r\n\r\n\t\t\t\t\t\t\t\t\t<SortingType\r\n\t\t\t\t\t\t\t\t\t\tkey={city}\r\n\t\t\t\t\t\t\t\t\t\tonChangeOption={this.handleSortOffers}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"cities__places-list places__list tabs__content\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<CardList\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\titems={cityOffers}\r\n\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<div className=\"cities__right-section\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"cities_map map\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\t\t\t\titems={cityOffers}\r\n\t\t\t\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t: <CitiesNoPlaces city={city}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMain.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tonCityClick: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\ttoggleBookmark: (cityOffer) => dispatch(Operation.toggleFavoriteList(cityOffer)),\r\n});\r\n\r\nexport {Main}\r\n\r\nexport default connect(null, mapDispatchToProps)(Main);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CardList from '../card-list/card-list';\r\n\r\nconst NeighbourhoodList = (props) => {\r\n\r\n\tconst {items, city, favoriteList} = props;\r\n\r\n\tconst handleClick = (item) => props.onClick(item);\r\n\tconst handleMouseOver = (item) => props.onMouseOver(item);\r\n\tconst handleMouseLeave = (e) => props.onMouseLeave(e);\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n\treturn <CardList\r\n\t\tcity={city}\r\n\t\titems={items}\r\n\t\tfavoriteList={favoriteList}\r\n\t\tonClick={handleClick}\r\n\t\tonMouseOver={handleMouseOver}\r\n\t\tonMouseLeave={handleMouseLeave}\r\n\t\tonBookmarkClick={handleBookmarkClick}\r\n\t/>\r\n};\r\n\r\nNeighbourhoodList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func.isRequired,\r\n\tonMouseLeave: PropTypes.func.isRequired\r\n};\r\n\r\nexport default NeighbourhoodList;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nconst ErrorPage = () => {\r\n\r\n  return (\r\n    <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n      <div className=\"page__favorites-container container\">\r\n        <section className=\"favorites favorites--empty\">\r\n          <h1 className=\"visually-hidden\">404 error</h1>\r\n          <div className=\"favorites__status-wrapper\">\r\n            <b className=\"favorites__status\">404 error</b>\r\n            <p className=\"favorites__status-description\">\r\n\t\t\t\t\t\t\tPage not found. Go to the <Link to={APP_ROUTE.ROOT}><span style={{textDecoration: 'underline'}}>main</span></Link> page\r\n            </p>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './property-gallery.css';\r\n\r\nconst PropertyGallery = (props) => {\r\n\r\n  const {images, title} = props;\r\n\r\n  return (\r\n    <div className=\"property__gallery-container container\">\r\n      <div className=\"property__gallery\">\r\n\r\n        {images.map((img, i) =>\r\n          (\r\n            <div className=\"property__image-wrapper\" key={title + i}>\r\n              <img className=\"property__image\" src={img} alt={`studio${i}`}/>\r\n            </div>\r\n          )\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPropertyGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default PropertyGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyFeatures = (props) => {\r\n\r\n\tconst {offer} = props;\r\n\r\n\treturn (\r\n\t\t<ul className=\"property__features\">\r\n\t\t\t<li className=\"property__feature property__feature--entire\">\r\n\t\t\t\tEntire place\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--bedrooms\">\r\n\t\t\t\t{offer.bedrooms} Bedrooms\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--adults\">\r\n\t\t\t\tMax {offer.max_adults} adults\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nPropertyFeatures.propTypes = {\r\n\toffer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyFeatures;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyInside = (props) => {\r\n\r\n\tconst {goods} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__inside\">\r\n\t\t\t<h2 className=\"property__inside-title\">What&apos;s inside</h2>\r\n\t\t\t<ul className=\"property__inside-list\">\r\n\r\n\t\t\t\t{ goods.map((good) =>\r\n\t\t\t\t\t<li className=\"property__inside-item\" key={good}>\r\n\t\t\t\t\t\t{good}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyInside.propTypes = {\r\n\tgoods: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default PropertyInside;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {BASE_PATHNAME} from '../../const';\r\n\r\nconst PropertyHost = (props) => {\r\n\r\n  const {offer} = props;\r\n\r\n  return (\r\n    <div className=\"property__host\">\r\n      <h2 className=\"property__host-title\">Meet the host</h2>\r\n      <div className=\"property__host-user user\">\r\n        <div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\r\n          <img className=\"property__avatar user__avatar\" src={BASE_PATHNAME + `/` + offer.host.avatar_url} width=\"74\" height=\"74\" alt=\"Host avatar\"/>\r\n        </div>\r\n        <span className=\"property__user-name\">{offer.host.name}</span>\r\n        <span className=\"property__user-status\">{offer.host.is_pro ? `Pro` : ``}</span>\r\n      </div>\r\n      <div className=\"property__description\">\r\n        <p className=\"property__text\">{offer.description}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPropertyHost.propTypes = {\r\n  offer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyHost;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport Map from '../map/map';\r\nimport NeghbourhoodList from '../neighbourhood-list/neughbourhood-list';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Header from '../header/header';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport Mark from '../mark/mark';\r\nimport PropertyGallery from '../property-gallery/property-gallery';\r\nimport Rating from '../rating/rating';\r\nimport PropertyFeatures from '../property-features/property-features';\r\nimport PropertyInside from '../property-inside/property-inside';\r\nimport Price from '../price/price';\r\nimport PropertyHost from '../property-host/property-host';\r\n\r\nimport {getCityCoord, getCityOffer, getCityOffers, getNhoods} from '../../helpers/helpers';\r\nimport {APP_ROUTE, NUMBER_NEIBOURHOODS} from '../../const';\r\n\r\nclass OfferProperty extends React.PureComponent{\r\n\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffer: this.props.cityOffer\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.title = `${this.props.cityOffer.city} - ${this.props.cityOffer.title}`;\r\n\t\t// this.props.getReviews();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif(prevProps.cityOffer !== this.props.cityOffer) {\r\n\t\t\twindow.scrollTo(0,0);\r\n\t\t\tdocument.title = `${this.props.cityOffer.city} - ${this.props.cityOffer.title}`;\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick = (item) => this.setState({offer: item}, () => this.props.onClick(item));\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\tisFavorite = () => {\r\n\t\tconst {cityOffer, favoriteList} = this.props;\r\n\t\tif (!favoriteList.length) return false;\r\n\r\n\t\treturn favoriteList.findIndex((item) => item.hotelId === cityOffer.hotelId) >= 0;\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\t\tconst {isAuthorizationRequired, cityOffer, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\t\t\twindow.location.assign(APP_ROUTE.LOGIN);\r\n\t\t} else{\r\n\t\t\tif (small) {\r\n\t\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t\t} else {\r\n\t\t\t\ttoggleBookmark(cityOffer, favoriteList);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\t\tconst {hotels, cityOffers, city, currentUser, isAuthorizationRequired, favoriteList} = this.props;\r\n\t\tconst {offer} = this.state;\r\n\r\n\t\tif (!this.props.cityOffer) return <ErrorPage/>;\r\n\t\tif (!offer) return <ErrorPage/>;\r\n\r\n\t\tconst neighbourhoods = getNhoods(offer, cityOffers, NUMBER_NEIBOURHOODS);\r\n\t\tconst cityCoord = getCityCoord(hotels, city);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--property\">\r\n\t\t\t\t\t<section className=\"property\">\r\n\r\n\t\t\t\t\t\t<PropertyGallery\r\n\t\t\t\t\t\t\ttitle={offer.title}\r\n\t\t\t\t\t\t\timages={offer.images}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"property__container container\">\r\n\t\t\t\t\t\t\t<div className=\"property__wrapper\">\r\n\r\n\t\t\t\t\t\t\t\t<Mark\r\n\t\t\t\t\t\t\t\t\tisPremium={offer.is_premium}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"property__name-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"property__name\">\r\n\t\t\t\t\t\t\t\t\t\t{offer.title}\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\t\t\t\t\tisActive={this.isFavorite()}\r\n\t\t\t\t\t\t\t\t\t\tonBookmarkClick={(small) => this.handleBookmarkClick(offer, small)}\r\n\t\t\t\t\t\t\t\t\t\tsmall={false}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\trating={offer.rating}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyFeatures\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Price\r\n\t\t\t\t\t\t\t\t\tprice={offer.price}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyInside\r\n\t\t\t\t\t\t\t\t\tgoods={offer.goods}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyHost\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section className=\"property_map map\" style={{height: 579 + 'px', marginBottom: 50 + 'px'}}>\r\n\r\n\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<section className=\"near-places places\">\r\n\t\t\t\t\t\t\t<h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\r\n\t\t\t\t\t\t\t<div className=\"near-places__list places__list\">\r\n\r\n\t\t\t\t\t\t\t\t<NeghbourhoodList\r\n\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOfferProperty.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffer: PropTypes.object.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst {id} = ownProps.match.params;\r\n\tif (!getCityOffer(state, id)) return Object.assign({}, ownProps, {cityOffer: ''});\r\n\r\n\treturn Object.assign({}, ownProps, {\r\n\t\tid,\r\n\t\tcity: getCityOffer(state, id).city,\r\n\t\thotels: state.hotels,\r\n\t\tcityOffer: getCityOffer(state, id),\r\n\t\tcityOffers: getCityOffers(state, id),\r\n\t\tfavoriteList: state.favoriteList,\r\n\t\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\tcurrentUser: state.currentUser,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\ttoggleBookmark: (cityOffer) => dispatch(Operation.toggleFavoriteList(cityOffer)),\r\n});\r\n\r\nexport {OfferProperty}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferProperty);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_PATHNAME, LOCATION_BUTTON_CLASS} from '../../const';\r\n\r\nconst LocationButton = (props) => {\r\n\r\n  const {city, onFavoriteCityClick, prefix} = props;\r\n  const handleFavotiteCityClick = () => onFavoriteCityClick(city);\r\n\r\n  return (\r\n    <div className={LOCATION_BUTTON_CLASS[prefix.toUpperCase()]}>\r\n      <div className=\"locations__item\">\r\n        <Link to={BASE_PATHNAME} className=\"locations__item-link buttonLink\"\r\n          onClick={handleFavotiteCityClick}\r\n        >\r\n          <span>{city}</span>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nLocationButton.propTypes = {\r\n  city: PropTypes.string.isRequired,\r\n  onFavoriteCityClick: PropTypes.func.isRequired,\r\n  prefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LocationButton;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport history from \"../../history\";\r\n\r\nimport Header from \"../header/header\";\r\nimport LocationButton from \"../location-button/location-button\";\r\nimport { getRandomInt, getInputClassName } from \"../../helpers/helpers\";\r\nimport \"./sign-in.css\";\r\n\r\nclass SignIn extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      city: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      emailValid: false,\r\n      passwordValid: false,\r\n      formValid: false,\r\n    };\r\n  }\r\n  \r\n\r\n  componentDidMount() {\r\n    const { hotels } = this.props;\r\n\r\n    document.title = `6 cities - sign in`;\r\n\r\n    this.setState(() => ({\r\n      city: hotels[getRandomInt(hotels.length)].city,\r\n    }));\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.currentUser !== this.props.currentUser) {\r\n\t    history.replace('/');\r\n    }\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    const { onSubmit } = this.props;\r\n\r\n    e.preventDefault();\r\n\r\n    onSubmit({\r\n      email: this.state.email,\r\n      password: this.state.password,\r\n    });\r\n  };\r\n\r\n  validateField = (name, value) => {\r\n    let emailValid = this.state.emailValid;\r\n    let passwordValid = this.state.passwordValid;\r\n    const minPassLength = 6;\r\n    const maxPassLength = 12;\r\n\r\n    switch (name) {\r\n      case `email`:\r\n        emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\r\n        break;\r\n\r\n      case `password`:\r\n        passwordValid =\r\n          value.length >= minPassLength && value.length <= maxPassLength;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        emailValid,\r\n        passwordValid,\r\n      },\r\n      this.validateForm\r\n    );\r\n  };\r\n\r\n  validateForm = () => {\r\n    this.setState({\r\n      formValid: this.state.emailValid && this.state.passwordValid,\r\n    });\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    this.setState({ [name]: value }, () => {\r\n      this.validateField(name, value);\r\n    });\r\n  };\r\n\r\n  handleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n  render() {\r\n    const { hotels, isAuthRequired, currentUser } = this.props;\r\n\r\n    return (\r\n      <div className=\"page page--gray page--login\">\r\n        <Header\r\n          isAuthorizationRequired={isAuthRequired}\r\n          currentUser={currentUser}\r\n          onLogoClick={() => this.handleCityClick(hotels[0].city)}\r\n        />\r\n\r\n        <main className=\"page__main page__main--login\">\r\n          <div className=\"page__login-container container\">\r\n            <section className=\"login\">\r\n              <h1 className=\"login__title\">Sign in</h1>\r\n              <form\r\n                className=\"login__form form\"\r\n                action=\"#\"\r\n                method=\"post\"\r\n                onSubmit={this.handleSubmit}\r\n              >\r\n                <div className=\"login__input-wrapper form__input-wrapper\">\r\n                  <label className=\"visually-hidden\">E-mail</label>\r\n                  <input\r\n                    className={`login__input form__input ${getInputClassName(\r\n                      this.state.email,\r\n                      this.state.emailValid\r\n                    )}`}\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required=\"\"\r\n                    value={this.state.email}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"login__input-wrapper form__input-wrapper\">\r\n                  <label className=\"visually-hidden\">Password</label>\r\n                  <input\r\n                    className={`login__input form__input ${getInputClassName(\r\n                      this.state.password,\r\n                      this.state.passwordValid\r\n                    )}`}\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Password\"\r\n                    required=\"\"\r\n                    value={this.state.password}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <button\r\n                  className=\"login__submit form__submit button\"\r\n                  type=\"submit\"\r\n                  disabled={!this.state.formValid}\r\n                >\r\n                  Sign in\r\n                </button>\r\n              </form>\r\n            </section>\r\n\r\n            <LocationButton\r\n              city={this.state.city}\r\n              onFavoriteCityClick={this.handleCityClick}\r\n              prefix=\"login\"\r\n            />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSignIn.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  onSubmit: PropTypes.func.isRequired,\r\n  onCityClick: PropTypes.func.isRequired,\r\n  currentUser: PropTypes.object.isRequired,\r\n  isAuthRequired: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default SignIn;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport Rating from '../rating/rating';\r\nimport Mark from '../mark/mark';\r\nimport Price from '../price/price';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\n\r\nconst FavoriteCard = (props) => {\r\n\r\n  const {item} = props;\r\n\r\n  const handleBookmarkClick = () => props.onBookmarkClick(props.item);\r\n\r\n  return (\r\n    <article className=\"favorites__card place-card\">\r\n\r\n      <Mark\r\n        isPremium={item.is_premium}\r\n        prefix=\"place-card\"\r\n      />\r\n\r\n      <div className=\"favorites__image-wrapper place-card__image-wrapper\">\r\n        <Link to={`/offer/` + item.hotelId} className=\"buttonLink\">\r\n          <img className=\"place-card__image\" src={item.preview_image} width=\"150\" height=\"110\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"favorites__card-info place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n\r\n          <Price\r\n            price={item.price}\r\n            prefix=\"place-card\"\r\n          />\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={handleBookmarkClick}\r\n            isActive={true}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n\r\n        <Rating\r\n          rating={item.rating}\r\n          prefix=\"place-card\"\r\n        />\r\n\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={`/offer/` + item.hotelId} className=\"card__title buttonLink\">{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nFavoriteCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onBookmarkClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FavoriteCard;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LocationButton from '../location-button/location-button';\r\nimport FavoriteCard from '../favorite-card/favorite-card';\r\n\r\nconst FavoritesList = (props) => {\r\n\r\n\tconst {favoriteList, onBookmarkClick, onFavoriteCityClick} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => onBookmarkClick(item);\r\n\r\n\tconst handleFavoriteCityClick = (city) => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<ul className=\"favorites__list\">\r\n\r\n\t\t\t{favoriteList.map((cityObj, ind) => {\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li className=\"favorites__locations-items\" key={cityObj.city + ind}>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={cityObj.city}\r\n\t\t\t\t\t\t\tkey={cityObj.city + ind}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\tprefix=\"favorites\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"favorites__places\">\r\n\r\n\t\t\t\t\t\t\t{cityObj.favorites.map((hotel) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<FavoriteCard\r\n\t\t\t\t\t\t\t\t\t\t\titem={hotel}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={hotel.hotelId}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nFavoritesList.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tonBookmarkClick: PropTypes.func.isRequired,\r\n\tonFavoriteCityClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FavoritesList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport FavoritesList from '../favorites-list/favorites-list';\r\nimport Header from '../header/header';\r\nimport {APP_ROUTE, BASE_PATHNAME} from '../../const';\r\nimport {formatFavoriteList} from '../../helpers/helpers.js';\r\n\r\nconst Favorites = (props) => {\r\n\r\n  const {favoriteList, toggleBookmark, cityClick, isAuthRequired, currentUser} = props;\r\n\r\n  const handleBookmarkClick = (item) => toggleBookmark(item);\r\n\r\n  const handleFavoriteCityClick = (city) => cityClick(city);\r\n\r\n  document.title = `6 cities - favorites`;\r\n\r\n  return (\r\n    <div className={`page ${!favoriteList.length ? `page--favorites-empty` : ``}`}>\r\n\r\n      <Header\r\n        isAuthorizationRequired={isAuthRequired}\r\n        currentUser={currentUser}\r\n      />\r\n\r\n      {favoriteList.length\r\n        ? <main className=\"page__main page__main--favorites\">\r\n          <div className=\"page__favorites-container container\">\r\n            <section className=\"favorites\">\r\n              <h1 className=\"favorites__title\">Saved listing</h1>\r\n\r\n              <FavoritesList\r\n                favoriteList={formatFavoriteList(favoriteList)}\r\n                onBookmarkClick={handleBookmarkClick}\r\n                onFavoriteCityClick={handleFavoriteCityClick}\r\n              />\r\n\r\n            </section>\r\n          </div>\r\n        </main>\r\n        : <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n          <div className=\"page__favorites-container container\">\r\n            <section className=\"favorites favorites--empty\">\r\n              <h1 className=\"visually-hidden\">Favorites (empty)</h1>\r\n              <div className=\"favorites__status-wrapper\">\r\n                <b className=\"favorites__status\">Nothing yet saved.</b>\r\n                <p className=\"favorites__status-description\">Save properties to narrow down search or plan yor future\r\n\t\t\t\t\t\t\t\t\ttrips.</p>\r\n              </div>\r\n            </section>\r\n          </div>\r\n        </main>\r\n      }\r\n      <footer className=\"footer\">\r\n        <Link to={BASE_PATHNAME + APP_ROUTE.ROOT} className=\"footer__logo-link\">\r\n          <img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"64\" height=\"33\"/>\r\n        </Link>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nFavorites.propTypes = {\r\n  favoriteList: PropTypes.array.isRequired,\r\n  isAuthRequired: PropTypes.bool,\r\n  currentUser: PropTypes.object,\r\n  toggleBookmark: PropTypes.func,\r\n  cityClick: PropTypes.func,\r\n\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n  return Object.assign({}, ownProps, {});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n  cityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n  toggleBookmark: (cityOffer) => dispatch(Operation.toggleFavoriteList(cityOffer)),\r\n});\r\n\r\nexport {Favorites};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites);\r\n","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\r\n\treturn (\r\n\t\t<div id=\"preloader\">\r\n\t\t\t<div id=\"loader\"/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nconst PrivateRoute = ({component: Component, isAuthRequired, ...rest}) => (\r\n\t<Route {...rest} render={(props) => (\r\n\t\tisAuthRequired === false\r\n\t\t\t? <Component {...rest} {...props}/>\r\n\t\t\t: <Redirect to='/'/>\r\n\t)}/>\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\nimport { ActionCreator, Operation } from \"../../reducer\";\r\nimport { getIndex } from \"../../helpers/helpers\";\r\nimport { APP_ROUTE } from \"../../const\";\r\n\r\nimport Main from \"../main/main\";\r\nimport OfferProperty from \"../offer-property/offer-property\";\r\nimport SignIn from \"../sign-in/sign-in\";\r\nimport Favorites from \"../favorites/favorites\";\r\nimport Loader from \"../loader/loader\";\r\nimport ErrorPage from \"../error-page/error-page\";\r\nimport PrivateRoute from \"../private-route/private-route\";\r\n\r\nclass App extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      activeOfferId: {},\r\n      isHotelsLoaded: false,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.hotels !== this.props.hotels) {\r\n      this.setState({ isHotelsLoaded: true });\r\n    }\r\n  }\r\n\r\n  handleReload = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        isHotelsLoaded: !prevState.isHotelsLoaded,\r\n      }),\r\n      () => window.location.reload()\r\n    );\r\n  };\r\n\r\n  handleOfferClick = (item) => {\r\n    return this.setState({ activeOfferId: item.id });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      hotels,\r\n      city,\r\n      currentUser,\r\n      isAuthorizationRequired,\r\n      favoriteList,\r\n      cityClick,\r\n      login,\r\n    } = this.props;\r\n\r\n    return this.state.isHotelsLoaded && city ? (\r\n      <Switch>\r\n        <Route exact path={APP_ROUTE.ROOT}>\r\n          <Main\r\n            {...this.props}\r\n            cityOffers={hotels[getIndex(hotels, city)].offers || []}\r\n            onClick={this.handleOfferClick}\r\n            onCityClick={cityClick}\r\n            reload={this.handleReload}\r\n          />\r\n        </Route>\r\n        <Route exact path={APP_ROUTE.LOGIN}>\r\n          <SignIn\r\n            hotels={hotels}\r\n            onSubmit={login}\r\n            onCityClick={cityClick}\r\n            currentUser={currentUser}\r\n            isAuthRequired={isAuthorizationRequired}\r\n          />\r\n        </Route>\r\n        <PrivateRoute\r\n          exact\r\n          path={APP_ROUTE.FAVORITES}\r\n          component={Favorites}\r\n          isAuthRequired={isAuthorizationRequired}\r\n          favoriteList={favoriteList}\r\n          currentUser={currentUser}\r\n        />\r\n        <Route\r\n          path={APP_ROUTE.OFFER}\r\n          render={(props) => <OfferProperty {...props} />}\r\n        ></Route>\r\n        <Route path={APP_ROUTE.ERROR} component={ErrorPage} />\r\n      </Switch>\r\n    ) : (\r\n      <Loader />\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  city: PropTypes.string.isRequired,\r\n  cityClick: PropTypes.func.isRequired,\r\n  isAuthorizationRequires: PropTypes.bool,\r\n  currentUser: PropTypes.object,\r\n  login: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) =>\r\n  Object.assign({}, ownProps, {\r\n    city: state.city,\r\n    hotels: state.hotels,\r\n    currentOffer: state.currentOffer,\r\n    favoriteList: state.favoriteList,\r\n    isAuthorizationRequired: state.isAuthorizationRequired,\r\n    currentUser: state.currentUser,\r\n  });\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  cityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n  onClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n  login: (authData) => dispatch(Operation.login(authData)),\r\n  getCurrentUserData: (uid) => dispatch(Operation.downloadCurrentUserData(uid)),\r\n});\r\n\r\nexport { App };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import {createStore, applyMiddleware} from \"redux\";\r\nimport {Provider} from \"react-redux\";\r\nimport React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport thunk from \"redux-thunk\";\r\nimport {compose} from \"recompose\";\r\nimport {Router} from \"react-router-dom\";\r\nimport history from \"./history\";\r\n\r\nimport App from \"./components/app/app\";\r\nimport {reducer, Operation} from \"./reducer\";\r\n\r\nconst init = () => {\r\n  const store = createStore(\r\n      reducer,\r\n      compose(\r\n          applyMiddleware(thunk),\r\n          window.__REDUX_DEVTOOLS_EXTENSION__\r\n            ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n            : (f) => f\r\n      )\r\n  );\r\n\r\n  store.dispatch(Operation.loadHotels());\r\n  store.dispatch(Operation.checkAuth());\r\n\r\n  ReactDom.render(\r\n      <Provider store={store}>\r\n        <Router history={history}>\r\n          <App />\r\n        </Router>\r\n      </Provider>,\r\n      document.getElementById(`root`)\r\n  );\r\n};\r\n\r\ninit();\r\n"],"sourceRoot":""}