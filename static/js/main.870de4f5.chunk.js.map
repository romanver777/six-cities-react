{"version":3,"sources":["history.js","fb.js","reducer.js","const.js","helpers/helpers.js","components/sorting-type/sorting-type.jsx","components/bookmark-button/bookmark-button.jsx","components/mark/mark.jsx","components/rating/rating.jsx","components/price/price.jsx","components/card/card.jsx","components/card-list/card-list.jsx","components/cities-list/cities-list.jsx","components/cities-no-places/cities-no-places.jsx","components/map/map.jsx","components/header/header.jsx","components/main/main.jsx","components/neighbourhood-list/neughbourhood-list.jsx","components/error-page/error-page.jsx","components/property-gallery/property-gallery.jsx","components/property-features/property-features.jsx","components/property-inside/property-inside.jsx","components/property-host/property-host.jsx","components/offer-property/offer-property.jsx","components/location-button/location-button.jsx","components/sign-in/sign-in.jsx","components/favorite-card/favorite-card.jsx","components/favorites-list/favorites-list.jsx","components/favorites/favorites.jsx","components/loader/loader.jsx","components/private-route/private-route.jsx","components/app/app.jsx","index.js"],"names":["history","createBrowserHistory","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","getDatabase","initialState","city","hotels","currentOffer","favoriteList","isAuthorizationRequired","currentUser","reviews","sortingType","getFavoriteIndexFromList","offer","length","findIndex","item","hotelId","ActionType","ActionCreator","type","payload","status","dataUser","list","reducer","state","action","Object","assign","splice","Operation","loadHotels","dispatch","getState","dbRef","ref","get","child","then","snapshot","exists","val","catch","error","console","log","checkAuth","getAuth","onAuthStateChanged","user","downloadCurrentUserData","uid","login","authData","auth","setPersistence","browserSessionPersistence","signInWithEmailAndPassword","email","password","userCredential","uploadToFavoriteList","db","update","toggleFavoriteList","index","push","BASE_PATHNAME","APP_ROUTE","LOCATION_BUTTON_CLASS","FAVORITES","LOGIN","INPUT_LOGIN_CLASS","getIndex","items","i","toLowerCase","getActiveIconParams","width","height","iconUrl","iconSize","getIconParams","getAllOffers","arr","forEach","hasOwnProperty","offers","getCityOffer","id","filter","it","getCityOffers","getInputClassName","inputValue","inputValid","formatFavoriteList","arrayOfObject","cities","Set","res","add","map","favorites","obj","SortingType","props","closeSortingList","e","wrapRef","current","contains","target","isOpen","setState","handleClickToggle","prevState","handleClick","currentTarget","querySelector","classList","remove","onChangeOption","innerHTML","React","createRef","document","addEventListener","this","removeEventListener","className","method","tabIndex","onClick","xlinkHref","PureComponent","propType","PropTypes","func","isRequired","string","size","prefix","BookmarkButton","onBookmarkClick","isActive","small","buttonClassActive","style","fill","stroke","Mark","isPremium","Rating","rating","currentRatingPersent","Price","price","Card","isFavorite","onMouseOver","onMouseLeave","is_premium","to","src","preview_image","alt","handleBookmarkClick","title","CardList","handleMouseOver","handleMouseLeave","key","Component","CitiesList","Fragment","color","backgroundColor","CitiesNoPlaces","Map","_initMap","cityCoord","icon","leaflet","zoom","center","zoomControl","marker","setView","tileLayer","attribution","addTo","mark","markers","coords","_changeIconsOnHover","_latlng","lat","lng","setIcon","prevProps","offerHover","off","visibility","defaultValue","Header","onLogoClick","window","location","pathname","name","hash","Main","handleCardClick","hoverItem","handleCityClick","onCityClick","handleSortOffers","sort","a","b","toggleBookmark","setSortingType","cityOffers","reload","connect","cityOffer","NeighbourhoodList","ErrorPage","textDecoration","PropertyGallery","images","img","PropertyFeatures","bedrooms","max_adults","PropertyInside","goods","good","PropertyHost","host","avatar_url","is_pro","description","OfferProperty","scrollTo","neighbourhoods","number","from","latLng","distanceTo","prev","next","slice","getNhoods","getCityCoord","marginBottom","ownProps","match","params","LocationButton","onFavoriteCityClick","toUpperCase","SignIn","handleSubmit","onSubmit","preventDefault","validateField","value","emailValid","passwordValid","validateForm","formValid","handleChange","max","Math","floor","random","isAuthRequired","placeholder","required","onChange","disabled","FavoriteCard","FavoritesList","handleFavoriteCityClick","cityObj","ind","hotel","cityClick","Loader","PrivateRoute","component","rest","render","App","handleReload","isHotelsLoaded","handleOfferClick","activeOfferId","exact","path","Favorites","getCurrentUserData","store","createStore","applyMiddleware","thunk","ReactDom","getElementById","init"],"mappings":"6RAIeA,EAFCC,c,oECYVC,EAAMC,YAXW,CACrBC,OAAO,0CACPC,WAAW,+BACXC,UAAU,eACVC,cAAc,2BACdC,kBAAkB,eAClBC,MAAM,4CACNC,cAAc,eACdC,YAAY,yEAMCT,GAFGU,YAAYV,GAEfA,GCRTW,EAAe,CACnBC,KAAK,GACLC,OAAQ,GACRC,aAAc,GACdC,aAAc,GACdC,yBAAyB,EACzBC,YAAa,GACbC,QAAS,GACTC,YAAY,WAGRC,EAA2B,SAACC,EAAON,GACvC,OAAKA,GAAiBA,EAAaO,OAE5BP,EAAaQ,WAAU,SAACC,GAAD,OAAUA,EAAKC,UAAYJ,EAAMI,YAFZ,GAK/CC,EACK,WADLA,EAEO,aAFPA,EAGc,oBAHdA,EAIkB,wBAJlBA,EAKa,mBALbA,EAQS,eARTA,EASY,kBATZA,EAUU,gBAVVA,EAWc,oBAXdA,EAYQ,cAZRA,EAaa,mBAGbC,EACK,SAACf,GAAD,MAAW,CAClBgB,KAAMF,EACNG,QAASjB,IAHPe,EAMO,SAACd,GAAD,MAAa,CACtBe,KAAMF,EACNG,QAAShB,IARPc,EAWa,SAACb,GAAD,MAAmB,CAClCc,KAAMF,EACNG,QAASf,IAbPa,EAgBkB,SAACG,GAAD,MAAa,CACjCF,KAAMF,EACNG,QAASC,IAlBPH,EAqBY,SAACI,GAAD,MAAe,CAC7BH,KAAMF,EACNG,QAASE,IAvBPJ,EA8Ca,SAACK,GAAD,MAAW,CAC1BJ,KAAK,oBACLC,QAASG,IAhDPL,EAwDY,SAACC,GAAD,MAAW,CACzBA,KAAK,mBACLC,QAASD,IAIPK,EAAU,WAAmC,IAAlCC,EAAiC,uDAAzBvB,EAAcwB,EAAW,uCAChD,OAAQA,EAAOP,MACb,KAAKF,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BtB,KAAMuB,EAAON,UAGjB,KAAKH,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BrB,OAAQsB,EAAON,UAGnB,KAAKH,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BpB,aAAcqB,EAAON,UAGzB,KAAKH,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BlB,wBAAyBmB,EAAON,UAGpC,KAAKH,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BjB,YAAakB,EAAON,UAGxB,KAAKH,EACH,OAAIQ,EAAMjB,YAAYF,aACbqB,OAAOC,OAAO,GAAIH,EAAO,CAC9BjB,YAAY,eACPmB,OAAOC,OAAO,GAAIH,EAAMjB,YAAa,CACtCF,aAAa,GAAD,mBAAMmB,EAAMjB,YAAYF,cAAxB,CAAsCoB,EAAON,eAK1DO,OAAOC,OAAO,GAAIH,EAAO,CAC9BjB,YAAY,eACPmB,OAAOC,OAAO,GAAIH,EAAMjB,YAAa,CACtCF,aAAc,CAAEoB,EAAON,cAK/B,KAAKH,EACH,IAAIM,EAAI,YAAOE,EAAMnB,cAGrB,OAFAiB,EAAKM,OAAOH,EAAON,QAAS,GAErBO,OAAOC,OAAO,GAAIH,EAAO,CAC9BnB,aAAciB,IAGlB,KAAKN,EAKL,KAAKA,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BnB,aAAcoB,EAAON,UAGzB,KAAKH,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9BhB,QAASiB,EAAON,UAGpB,KAAKH,EACH,OAAOU,OAAOC,OAAO,GAAIH,EAAO,CAC9Bf,YAAagB,EAAON,UAGxB,QACE,OAAOK,IAIPK,EAAY,CAChBC,WAAY,kBAAM,SAACC,EAAUC,GAC3B,IAAMC,EAAQC,YAAIlC,eAElBmC,YAAIC,YAAMH,EAAD,YACNI,MAAK,SAACC,GACDA,EAASC,UACXR,EAASd,EAAwBqB,EAASE,WAG7CH,MAAK,WACJ,IAAMnC,EAAO8B,IAAW7B,OAAO,GAAGD,KAE9BA,GAAM6B,EAASd,EAAsBf,OAE1CuC,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIlBG,UAAW,kBAAM,SAACd,EAAUC,GACbc,cACRC,oBAAmB,SAACC,GACnBA,GACJjB,EAASF,EAAUoB,wBAAwBD,EAAKE,WAKpDC,MAAO,SAACC,GAAD,OAAc,SAACrB,EAAUC,GAC9B,IAAMqB,EAAOP,YAAQxD,GACrBgE,YAAeD,EAAME,KAClBlB,MAAK,kBACJmB,YAA2BH,EAAMD,EAASK,MAAOL,EAASM,aAE3DrB,MAAK,SAACsB,GAAD,OACJ5B,EAASF,EAAUoB,wBAAwBU,EAAeX,KAAKE,SAEhET,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIlBO,wBAAyB,SAACC,GAAD,OAAS,SAACnB,EAAUC,GAC3C,IAAMC,EAAQC,YAAIlC,eAElBmC,YAAIC,YAAMH,EAAD,gBAAiBiB,KACvBb,MAAK,SAACC,GACDA,EAASC,WACXR,EAASd,EAA6BqB,EAASE,QAC/CT,EAASd,GAAmC,QAG/CoB,MAAK,WACAL,IAAWzB,YAAYF,cACzB0B,EACEd,EAA8Be,IAAWzB,YAAYF,kBAI1DoC,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIlBkB,qBAAsB,SAACtC,GAAD,OAAU,SAACS,EAAUC,GACzC,IAAM6B,EAAK7D,cACLkD,EAAMJ,cAAUvC,YAAY2C,IAElCY,YAAO5B,YAAI2B,EAAI,SAAWX,GAAM,CAAE7C,aAAciB,IAC7Ce,MAAK,WACJN,EAASF,EAAUoB,wBAAwBC,OAE5CT,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIlBqB,mBAAoB,SAACpD,GAAD,OAAW,SAACoB,EAAUC,GACxC,IAAIV,EAAOU,IAAWzB,YAAYF,aAC5B2D,EAAQtD,EAAyBC,EAAOW,GAE9C,OAAG0C,GAAS,GACV1C,EAAKM,OAAOoC,EAAO,QACnBjC,EAASF,EAAU+B,qBAAqBtC,KAGvCA,GACDA,EAAK2C,KAAKtD,QACVoB,EAASF,EAAU+B,qBAAqBtC,UAG1CS,EAASF,EAAU+B,qBAAqB,CAACjD,Q,OClRhCuD,EAAa,oBAKbC,EACL,SADKA,EAEN,IAFMA,EAGL,aAHKA,EAID,aAJCA,EAKL,IAOKC,EAAwB,CACnCC,UAAU,oDACVC,MAAM,iDAGKC,GACL,cADKA,GAEL,c,oBCrBKC,GAAW,SAACC,EAAOvE,GAE9B,IAAK,IAAIwE,EAAI,EAAGA,EAAID,EAAM7D,OAAQ8D,IAChC,GAAID,EAAMC,GAAGxE,KAAKyE,gBAAkBzE,EAAKyE,cACvC,OAAOD,GAYAE,GAAsB,eAACC,EAAD,uDDNV,GCM8BC,EAApB,uDDNV,GCMU,MAA4C,CAC7EC,QAASb,EAAa,sBACtBc,SAAU,CAACH,EAAOC,KAGPG,GAAgB,eAACJ,EAAD,uDDXJ,GCWwBC,EAApB,uDDXJ,GCWI,MAA4C,CACvEC,QAASb,EAAa,eACtBc,SAAU,CAACH,EAAOC,KAGPI,GAAe,SAAC1D,GAC3B,IAAI2D,EAAM,GAQV,OANA3D,EAAMrB,OAAOiF,SAAQ,SAACtE,GAChBA,EAAKuE,eAAL,YACFF,EAAG,sBAAOA,GAAP,YAAerE,EAAKwE,aAIpBH,GAGII,GAAe,SAAC/D,EAAOgE,GAElC,OAAON,GAAa1D,GAAOiE,QAAO,SAACC,GAAD,OAAQA,EAAG3E,WAAayE,KAAI,IAGnDG,GAAgB,SAACnE,EAAOgE,GACnC,IAAMtF,EAAOqF,GAAa/D,EAAOgE,GAAItF,KAErC,OAAOgF,GAAa1D,GAAOiE,QAAO,SAACC,GAAD,OAAQA,EAAGxF,OAASA,MA+C1C0F,GAAoB,SAACC,EAAYC,GAE7C,OAAIA,EAAmBvB,GAEnBsB,EAAWjF,OAAS,EAAU2D,GAE5B,IAGKwB,GAAqB,SAACC,GAEjC,IAAIC,EAAS,IAAIC,IACbC,EAAM,GAWV,OATAH,EAAcZ,SAAQ,SAACM,GAAD,OAAQO,EAAOG,IAAIV,EAAGxF,SAE5C,YAAI+F,GAAQI,KAAI,SAACnG,GACf,OAAOiG,EAAIlC,KAAK,CACd/D,OACAoG,UAAU,YAAKN,EAAcP,QAAO,SAACc,GAAD,OAASrG,IAASqG,EAAIrG,cAIvDiG,G,oBCpHHK,G,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAgBRC,iBAAmB,SAACC,GACb,EAAKC,SAAY,EAAKA,QAAQC,QAAQC,SAASH,EAAEI,SACpD,EAAKvF,MAAMwF,QAAQ,EAAKC,SAAS,CAACD,QAAQ,KAnB3B,EAuBnBE,kBAAoB,SAACP,GACnB,EAAKM,UAAS,SAACE,GAAD,MAAgB,CAC5BH,QAASG,EAAUH,YAzBJ,EA6BnBI,YAAc,SAACT,GACbA,EAAEU,cACCC,cAAc,2BACdC,UAAUC,OAAO,0BACpBb,EAAEI,OAAOQ,UAAUnB,IAAI,0BAEvB,EAAKc,oBACL,EAAKT,MAAMgB,eAAed,EAAEI,OAAOW,YAjCnC,EAAKd,QAAUe,IAAMC,YACrB,EAAKpG,MAAQ,CACXwF,QAAQ,GALO,E,gEAUjBa,SAASC,iBAAiB,QAASC,KAAKrB,oB,6CAIxCmB,SAASG,oBAAoB,QAASD,KAAKrB,oB,+BA0B3C,OACE,0BAAMuB,UAAU,kBAAkBxG,OAAO,IAAIyG,OAAO,MAAMhG,IAAK6F,KAAKnB,SAClE,0BAAMqB,UAAU,2BAAhB,YACA,0BACEA,UAAU,uBACVE,SAAS,IACTC,QAASL,KAAKb,mBAEba,KAAKtB,MAAMhG,YACZ,yBAAKwH,UAAU,wBAAwBpD,MAAM,IAAIC,OAAO,KACtD,yBAAKuD,UAAU,yBAGnB,wBACED,QAASL,KAAKX,YACda,UACEF,KAAKvG,MAAMwF,OAAX,qIAKF,wBAAIiB,UAAU,wCAAwCE,SAAS,KAA/D,WAGA,wBAAIF,UAAU,iBAAiBE,SAAS,KAAxC,sBAGA,wBAAIF,UAAU,iBAAiBE,SAAS,KAAxC,sBAGA,wBAAIF,UAAU,iBAAiBE,SAAS,KAAxC,yB,GAvEgBR,IAAMW,eAgFhC9B,GAAY+B,SAAW,CACrBd,eAAgBe,KAAUC,KAAKC,WAC/BjI,YAAa+H,KAAUG,OAAOD,YAGjBlC,U,SCrFToC,GACI,CACRC,OAAO,WACPhE,MAAO,GACPC,OAAQ,IAJJ8D,GAME,CACNC,OAAO,aACPhE,MAAO,GACPC,OAAQ,IAmCKgE,GA/BQ,SAACrC,GAAW,IAE3BsC,EAAoCtC,EAApCsC,gBAAiBC,EAAmBvC,EAAnBuC,SAAUC,EAASxC,EAATwC,MAE5BJ,EAASI,EAAQL,GAAWC,OAASD,GAAaC,OAClDK,EAAoBF,EAAQ,UAAMH,EAAN,gCAElC,OACC,4BAAQZ,UAAS,UAAKY,EAAL,6BAAgCK,EAAhC,WACbhI,KAAK,SACLkH,QAAS,kBAAMW,EAAgBE,KAElC,yBAAKhB,UAAS,UAAKY,EAAL,mBAEXhE,MAAOoE,EAAQL,GAAW/D,MAAQ+D,GAAa/D,MAC/CC,OAAQmE,EAAQL,GAAW9D,OAAS8D,GAAa9D,OACjDqE,MAAOH,EAAW,CAACI,KAAK,UAAYC,OAAO,WAAc,CAACD,KAAK,OAC7DC,OAAO,YAEX,yBAAKhB,UAAU,oBAEhB,0BAAMJ,UAAU,mBAAhB,kBClBYqB,GAhBF,SAAC7C,GAAW,IAEjB8C,EAAqB9C,EAArB8C,UAAWV,EAAUpC,EAAVoC,OAElB,OAAOU,EACN,yBAAKtB,UAAS,UAAKY,EAAL,WACb,0CAEC,ICmBWW,GA3BA,SAAC/C,GAAW,IAEnBgD,EAAkBhD,EAAlBgD,OAAQZ,EAAUpC,EAAVoC,OAITa,EAFmB,IAEID,EADZ,EAGjB,OACC,yBAAKxB,UAAS,UAAKY,EAAL,oBACb,yBAAKZ,UAAS,UAAKY,EAAL,0BACb,0BAAMM,MAAO,CAACtE,MAAO6E,EAAuB,OAC5C,0BAAMzB,UAAU,mBAAhB,WAEM,aAANY,EACE,0BAAMZ,UAAS,UAAKY,EAAL,iCAA4CY,GAD7D,KCKWE,GAnBD,SAAClD,GAAW,IAElBmD,EAAiBnD,EAAjBmD,MAAOf,EAAUpC,EAAVoC,OAEd,OACC,yBAAKZ,UAAS,UAAKY,EAAL,YACb,uBAAGZ,UAAS,UAAKY,EAAL,kBAAZ,SAA+Ce,GAC/C,0BAAM3B,UAAS,UAAKY,EAAL,iBACP,eAANA,EAAA,OADF,eCsEYgB,GAvEF,SAACpD,GAAW,IAEhB3F,EAAoB2F,EAApB3F,KAAMgJ,EAAcrD,EAAdqD,WAEP1C,EAAc,SAACT,GAAD,OAAOF,EAAM2B,QAAQzB,IAKzC,OACE,6BAASsB,UAAU,gCACjBzC,GAAI1E,EAAK0E,GACTuE,YAAa,kBAPQpD,EAOc7F,EAPR2F,EAAMsD,YAAYpD,GAAzB,IAACA,GAQrBqD,aAPqB,kBAAMvD,EAAMuD,iBAUjC,kBAAC,GAAD,CACET,UAAWzI,EAAKmJ,WAChBpB,OAAO,eAGT,yBAAKZ,UAAU,mDACb,kBAAC,KAAD,CAAMiC,GAAI,UAAYpJ,EAAKC,QACzBkH,UAAU,aACVG,QAAS,kBAAMhB,EAAYtG,KAE3B,yBAAKmH,UAAU,oBAAoBkC,IAAKrJ,EAAKsJ,cAAevF,MAAM,MAAMC,OAAO,MAAMuF,IAAI,YAG7F,yBAAKpC,UAAU,oBACb,yBAAKA,UAAU,6BAEb,kBAAC,GAAD,CACE2B,MAAO9I,EAAK8I,MACZf,OAAO,eAGT,kBAAC,GAAD,CACEE,gBAAiB,SAACE,GAAD,OA/BC,SAACtI,EAAOsI,GAAR,OAAkBxC,EAAMsC,gBAAgBpI,EAAOsI,GA+BrCqB,CAAoBxJ,EAAMmI,IACtDD,SAAUc,EACVb,OAAO,KAKX,kBAAC,GAAD,CACEQ,OAAQ3I,EAAK2I,OACbZ,OAAO,eAGT,wBAAIZ,UAAU,oBACZ,kBAAC,KAAD,CAAMiC,GAAE,iBAAYpJ,EAAKC,SACvBkH,UAAU,yBACVG,QAAS,kBAAMhB,EAAYtG,KAC3BA,EAAKyJ,QAET,uBAAGtC,UAAU,oBAAoBnH,EAAKI,SCN/BsJ,G,kDArDd,WAAY/D,GAAQ,IAAD,uBAClB,cAAMA,IASPW,YAAc,SAACtG,GAAD,OAAU,EAAK2F,MAAM2B,QAAQtH,IAVxB,EAWnB2J,gBAAkB,SAAC3J,GAAD,OAAU,EAAK2F,MAAMsD,YAAYjJ,IAXhC,EAYnB4J,iBAAmB,SAAC/D,GAAD,OAAO,EAAKF,MAAMuD,aAAarD,IAZ/B,EAanB2D,oBAAsB,SAAC3J,EAAOsI,GAAR,OAAkB,EAAKxC,MAAMsC,gBAAgBpI,EAAOsI,IAbvD,EAenBa,WAAa,SAACzJ,EAAcS,GAE3B,GAAIT,EAGH,QAFiBA,EAAaoF,QAAO,SAACC,GAAD,OAAQA,EAAG3E,UAAYD,EAAKC,WAE7CH,QApBH,IAEX6D,EAAS,EAAKgC,MAAMhC,MAApBA,MAFW,OAIlB,EAAKjD,MAAQ,CACZiD,MAAOA,GALU,E,qDAwBT,IAAD,SACsBsD,KAAKtB,MAA5BhC,EADC,EACDA,MAAOpE,EADN,EACMA,aAEd,OAECoE,EAAM4B,KAAI,SAACvF,GAEV,OAAO,kBAAC,GAAD,CACNA,KAAMA,EACN6J,IAAK7J,EAAKC,QACV+I,WAAY,EAAKA,WAAWzJ,EAAcS,GAC1CsH,QAAS,EAAKhB,YACd2C,YAAa,EAAKU,gBAClBT,aAAc,EAAKU,iBACnB3B,gBAAiB,EAAKuB,6B,GAxCJ3C,IAAMiD,WC4CdC,GA1CI,SAACpE,GAAW,IAEtBhC,EAAwBgC,EAAxBhC,MAAOvE,EAAiBuG,EAAjBvG,KAAMkI,EAAW3B,EAAX2B,QAEpB,OACE,kBAAC,IAAM0C,SAAP,KACE,wBAAI7C,UAAU,mBAAd,UACA,yBAAKA,UAAU,QACb,6BAASA,UAAU,uBACjB,wBAAIA,UAAU,8BAEXxD,EAAM4B,KAAI,SAACX,EAAIhB,GAEd,OACE,wBAAIuD,UAAU,kBACZ0C,IAAKjG,GAEL,kBAAC,KAAD,CAAMwF,GAAI/F,EAAgB8D,UAAavC,EAAGxF,OAASA,EAAb,6GAEtCiJ,MAAO,CAAC4B,MAAM,OAASC,gBAAgB,WACvC5C,QAAS,kBAAMA,EAAQ1C,EAAGxF,OAC1ByK,IAAKjG,GAEH,8BAAOgB,EAAGxF,gBCLf+K,GArBQ,SAACxE,GAAW,IAE3BvG,EAAQuG,EAARvG,KAEP,OACC,yBAAK+H,UAAU,sEACd,6BAASA,UAAU,qBAClB,yBAAKA,UAAU,wCACd,uBAAGA,UAAU,kBAAb,+BACA,uBAAGA,UAAU,8BAAb,6DAAqG/H,KAGvG,yBAAK+H,UAAU,4BC+HHiD,G,kDAtId,WAAazE,GAAQ,IAAD,8BACnB,cAAOA,IA2CR0E,SAAW,SAACC,EAAW3G,GAAyB,IAAlB9D,EAAiB,uDAAT,KAE/BT,EAAOkL,EACTC,EAAOC,KAAQD,KAAKpG,MAClBsG,EAAO,GACPlF,EAAMiF,KAAQjF,IAAI,MAAO,CAC9BmF,OAAQtL,EACRqL,KAAMA,EACNE,aAAa,EACbC,QAAQ,IAGTrF,EAAIsF,QAAQzL,EAAMqL,GAElBD,KAAQM,UAAR,2EAA8F,CAC7FC,YAAa,sJAEZC,MAAMzF,GAER,IACI0F,EADAC,EAAU,GAGVrL,IAEH0K,EAAOC,KAAQD,KAAKzG,OACpBmH,EAAOT,KAAQI,OAAO/K,EAAMsL,OAAQ,CAACZ,UAChCS,MAAMzF,IA1BkC,oBA6B3B5B,GA7B2B,IA6B9C,2BAA0B,CAAC,IAAhB3D,EAAe,QAEzBuK,EAAOC,KAAQD,KAAKpG,MACpB8G,EAAOT,KAAQI,OAAO5K,EAAKmL,OAAQ,CAACZ,SACpCW,EAAQ/H,KAAK8H,IAjCgC,8BAoC9C,cAAiBC,EAAjB,eAA0B,CAArB,IAAMtG,EAAE,KACZA,EAAGoG,MAAMzF,GAGV,EAAKY,SAAS,CACb+E,QAASA,EACT3F,IAAKA,KAtFa,EA0FpB6F,oBAAsB,SAACvL,EAAOqL,GAAa,IAAD,gBAExBA,GAFwB,IAEzC,2BAA0B,CAAC,IAAhBtG,EAAe,QAErB2F,OAAI,EAMNA,EAJE1K,GACC+E,EAAGyG,QAAQC,MAAQzL,EAAMsL,OAAO,IACnCvG,EAAGyG,QAAQE,MAAQ1L,EAAMsL,OAAO,GAEzBX,KAAQD,KAAKpG,GAAc,GAAI,KAQhCqG,KAAQD,KAAKpG,MAErBS,EAAG4G,QAAQjB,IApB6B,gCAvFzC,EAAK7J,MAAQ,CACZ6E,IAAK,KACL2F,QAAS,IALS,E,gEASE,IAAD,EAEWjE,KAAKtB,MAA7BwF,EAFa,EAEbA,OAAQxH,EAFK,EAELA,MAAO9D,EAFF,EAEEA,MAElBA,EAEHoH,KAAKoD,SAASc,EAAQxH,EAAO9D,GAG7BoH,KAAKoD,SAASc,EAAQxH,K,yCAIJ8H,GAAY,IAAD,EAEaxE,KAAKtB,MAAzCwF,EAFuB,EAEvBA,OAAQO,EAFe,EAEfA,WAAY/H,EAFG,EAEHA,MAAO9D,EAFJ,EAEIA,MAC3BqL,EAAWjE,KAAKvG,MAAhBwK,QAEHO,EAAU5L,QAAUA,IAEvBoH,KAAKvG,MAAM6E,IAAIoG,MACf1E,KAAKvG,MAAM6E,IAAImB,SACfO,KAAKoD,SAASc,EAAQxH,EAAO9D,IAG1B4L,EAAUN,SAAWA,IAExBlE,KAAKvG,MAAM6E,IAAIoG,MACf1E,KAAKvG,MAAM6E,IAAImB,SACfO,KAAKoD,SAASc,EAAQxH,IAGvBsD,KAAKmE,oBAAoBM,EAAYR,K,+BAyE3B,IAEHvH,EAASsD,KAAKtB,MAAdhC,MAEP,OACC,kBAAC,IAAMqG,SAAP,KACC,yBAAKtF,GAAG,QACR,0BAAM2D,MAAO,CAACuD,WAAY,UAAWC,aAAclI,S,GA3HrCkD,IAAMW,eCkDTsE,GAlDA,SAACnG,GAAW,IAElBnG,EAAqDmG,EAArDnG,wBAAyBC,EAA4BkG,EAA5BlG,YAAasM,EAAepG,EAAfoG,YAE7C,OACE,4BAAQ5E,UAAU,UAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,gBACb,kBAAC,KAAD,CAAMiC,GAAI/F,EACR8D,UAAU,+BACVG,QAASyE,GAET,yBAAK5E,UAAU,eAAekC,IAAKjG,EAAa,gBAAoBmG,IAAI,gBAAgBxF,MAAM,KAAKC,OAAO,SAG9G,yBAAKmD,UAAU,eACb,wBAAIA,UAAU,oBACZ,wBAAIA,UAAU,yBACZ,4BAAQA,UAAU,yDAChB,yBAAKA,UAAU,gDAGd1H,IAAgBD,EACb,0BAAM2H,UAAU,gCAEd6E,OAAOC,SAASC,WAAa7I,EAAuB,kBAAC,KAAD,CAAM+F,GAAI/F,GAAsB5D,EAAY0M,MAAe1M,EAAY0M,MAE7H,0BAAMhF,UAAU,iBAEd6E,OAAOC,SAASC,WAAaF,OAAOC,SAASG,KAAO/I,EAAmB,kBAAC,KAAD,CAAM+F,GAAI/F,GAAV,WAAxE,mBCrBjBgJ,G,kDAEL,WAAY1G,GAAQ,IAAD,8BAClB,cAAMA,IAkBP2G,gBAAkB,SAACtM,GAAD,OAAU,EAAK2F,MAAM2B,QAAQtH,IAnB5B,EAqBnB2J,gBAAkB,SAAC3J,GAAD,OAAU,EAAKmG,UAAS,SAACE,GAE1C,OAAQA,EAAUkG,YAAcvM,EAAQ,CAACuM,UAAWvM,GAAQ,SAvB1C,EA0BnB4J,iBAAmB,kBAAM,EAAKzD,SAAS,CAACoG,UAAW,QA1BhC,EA4BnBC,gBAAkB,SAACpN,GAAD,OAAU,EAAKuG,MAAM8G,YAAYrN,IA5BhC,EA8BnBsN,iBAAmB,SAAClI,EAAQpE,GAC3B,OAAQA,GACP,IAAI,qBACHoE,EAAOmI,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAE9D,MAAQ+D,EAAE/D,SAClC,MACD,IAAI,qBACHtE,EAAOmI,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAE/D,MAAQ8D,EAAE9D,SAClC,MACD,IAAI,kBACHtE,EAAOmI,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAElE,OAASiE,EAAEjE,UACnC,MACD,QAAS,OAAOnE,EAEjB,OAAOA,GA3CW,EA8CnBgF,oBAAsB,SAAC3J,EAAOsI,GAAW,IAAD,EAEW,EAAKxC,MAAhDnG,EAFgC,EAEhCA,wBAAyBsN,EAFO,EAEPA,eAE5BtN,EACHwM,OAAOC,SAASpL,OAAOuC,EbnEJ,KamEgCC,GAEnDyJ,EAAejN,IAlDhB,EAAKa,MAAQ,CACZ6L,UAAW,MAJM,E,gEASlBxF,SAAS0C,MAAT,qBAA+BxC,KAAKtB,MAAMvG,Q,yCAGxBqM,GACdA,EAAUrM,OAAS6H,KAAKtB,MAAMvG,OACjC6H,KAAKtB,MAAMoH,eAAX,WACAhG,SAAS0C,MAAT,qBAA+BxC,KAAKtB,MAAMvG,S,+BA0ClC,IAAD,EAEoH6H,KAAKtB,MAA1HtG,EAFC,EAEDA,OAAQD,EAFP,EAEOA,KAAM4N,EAFb,EAEaA,WAAYvN,EAFzB,EAEyBA,YAAaD,EAFtC,EAEsCA,wBAAyByN,EAF/D,EAE+DA,OAAQ1N,EAFvE,EAEuEA,aAAcI,EAFrF,EAEqFA,YAAaoN,EAFlG,EAEkGA,eAEpGzC,EAAYjL,EADJqE,GAASrE,EAAQD,IACC+L,OAEhC,OACC,yBAAKhE,UAAU,8BAEd,kBAAC,GAAD,CACC3H,wBAAyBA,EACzBC,YAAaA,EACbsM,YAAakB,IAGd,0BAAM9F,UAAW6F,EAAWlN,OAAS,+BACnB,wDAEjB,kBAAC,GAAD,CAAY6D,MAAOtE,EACbD,KAAMA,EACNkI,QAASL,KAAKuF,kBAGpB,yBAAKrF,UAAU,UAEb6F,EAAWlN,OACX,yBAAKqH,UAAU,sCACd,6BAASA,UAAU,yBAClB,wBAAIA,UAAU,mBAAd,UACA,uBAAGA,UAAU,iBAAiB6F,EAAWlN,OAAzC,sBAAoEV,GAEpE,kBAAC,GAAD,CACCyK,IAAKzK,EACLO,YAAaA,EACbgH,eAAgB,SAACvG,GAAD,OAAU2M,EAAe3M,MAG1C,yBAAK+G,UAAU,kDAEd,kBAAC,GAAD,CACC/H,KAAMA,EACNuE,MAAOsD,KAAKyF,iBAAL,YAA0BM,GAAarN,GAC9CJ,aAAcA,EACd+H,QAASL,KAAKqF,gBACdrD,YAAahC,KAAK0C,gBAClBT,aAAcjC,KAAK2C,iBACnB3B,gBAAiBhB,KAAKuC,wBAKzB,yBAAKrC,UAAU,yBACd,6BAASA,UAAU,kBAElB,kBAAC,GAAD,CACCgE,OAAQb,EACR3G,MAAOqJ,EACPtB,WAAYzE,KAAKvG,MAAM6L,eAOzB,kBAAC,GAAD,CAAgBnN,KAAMA,W,GA3HZyH,IAAMiD,WAyJVoD,gBAXS,SAACxM,GAAD,MAAY,CACnCf,YAAae,EAAMf,gBAGO,SAACsB,GAAD,MAAe,CACzC6L,eAAgB,SAACK,GAAD,OAAelM,EAASF,EAAUkC,mBAAmBkK,KACrEJ,eAAgB,SAAC3M,GAAD,OAAUa,EAASd,EAA6BC,QAKlD8M,CAA6Cb,ICzI7Ce,GA3BW,SAACzH,GAAW,IAE9BhC,EAA6BgC,EAA7BhC,MAAOvE,EAAsBuG,EAAtBvG,KAAMG,EAAgBoG,EAAhBpG,aAOpB,OAAO,kBAAC,GAAD,CACNH,KAAMA,EACNuE,MAAOA,EACPpE,aAAcA,EACd+H,QATmB,SAACtH,GAAD,OAAU2F,EAAM2B,QAAQtH,IAU3CiJ,YATuB,SAACjJ,GAAD,OAAU2F,EAAMsD,YAAYjJ,IAUnDkJ,aATwB,SAACrD,GAAD,OAAOF,EAAMuD,aAAarD,IAUlDoC,gBAT2B,SAACpI,EAAOsI,GAAR,OAAkBxC,EAAMsC,gBAAgBpI,EAAOsI,OCa7DkF,GAnBG,WAEhB,OACE,0BAAMlG,UAAU,gEACd,yBAAKA,UAAU,uCACb,6BAASA,UAAU,8BACjB,wBAAIA,UAAU,mBAAd,aACA,yBAAKA,UAAU,6BACb,uBAAGA,UAAU,qBAAb,aACA,uBAAGA,UAAU,iCAAb,6BACqB,kBAAC,KAAD,CAAMiC,GAAI/F,GAAgB,0BAAMgF,MAAO,CAACiF,eAAgB,cAA9B,SAD/C,cCiBGC,I,MA1BS,SAAC5H,GAAW,IAE3B6H,EAAiB7H,EAAjB6H,OAAQ/D,EAAS9D,EAAT8D,MAEf,OACE,yBAAKtC,UAAU,yCACb,yBAAKA,UAAU,qBAEZqG,EAAOjI,KAAI,SAACkI,EAAK7J,GAAN,OAER,yBAAKuD,UAAU,0BAA0B0C,IAAKJ,EAAQ7F,GACpD,yBAAKuD,UAAU,kBAAkBkC,IAAKoE,EAAKlE,IAAG,gBAAW3F,aCUxD8J,GAvBU,SAAC/H,GAAW,IAE7B9F,EAAS8F,EAAT9F,MAEP,OACC,wBAAIsH,UAAU,sBACb,wBAAIA,UAAU,+CAAd,gBAGA,wBAAIA,UAAU,iDACZtH,EAAM8N,SADR,aAGA,wBAAIxG,UAAU,+CAAd,OACMtH,EAAM+N,WADZ,aCYYC,GAxBQ,SAAClI,GAAW,IAE3BmI,EAASnI,EAATmI,MAEP,OACC,yBAAK3G,UAAU,oBACd,wBAAIA,UAAU,0BAAd,iBACA,wBAAIA,UAAU,yBAEX2G,EAAMvI,KAAI,SAACwI,GAAD,OACX,wBAAI5G,UAAU,wBAAwB0C,IAAKkE,GACzCA,SCeQC,GAzBM,SAACrI,GAAW,IAExB9F,EAAS8F,EAAT9F,MAEP,OACE,yBAAKsH,UAAU,kBACb,wBAAIA,UAAU,wBAAd,iBACA,yBAAKA,UAAU,4BACb,yBAAKA,UAAU,+EACb,yBAAKA,UAAU,gCAAgCkC,IAAKjG,EAAa,IAASvD,EAAMoO,KAAKC,WAAYnK,MAAM,KAAKC,OAAO,KAAKuF,IAAI,iBAE9H,0BAAMpC,UAAU,uBAAuBtH,EAAMoO,KAAK9B,MAClD,0BAAMhF,UAAU,yBAAyBtH,EAAMoO,KAAKE,OAAX,WAE3C,yBAAKhH,UAAU,yBACb,uBAAGA,UAAU,kBAAkBtH,EAAMuO,gBCEvCC,G,kDAEL,WAAa1I,GAAQ,IAAD,8BACnB,cAAMA,IAmBPW,YAAc,SAACtG,GAAD,OAAU,EAAKmG,SAAS,CAACtG,MAAOG,IAAO,kBAAM,EAAK2F,MAAM2B,QAAQtH,OApB1D,EAsBpB2J,gBAAkB,SAAC3J,GAAD,OAAU,EAAKmG,UAAS,SAACE,GAE1C,OAAQA,EAAUkG,YAAcvM,EAAQ,CAACuM,UAAWvM,GAAQ,SAxBzC,EA2BpB4J,iBAAmB,kBAAM,EAAKzD,SAAS,CAACoG,UAAW,QA3B/B,EA6BpBvD,WAAa,WAAO,IAAD,EACgB,EAAKrD,MAAhCwH,EADW,EACXA,UAAW5N,EADA,EACAA,aAClB,QAAKA,EAAaO,QAEXP,EAAaQ,WAAU,SAACC,GAAD,OAAUA,EAAKC,UAAYkN,EAAUlN,YAAY,GAjC5D,EAoCpBuJ,oBAAsB,SAAC3J,EAAOsI,GAAW,IAAD,EACoC,EAAKxC,MAAzEnG,EADgC,EAChCA,wBAAyB2N,EADO,EACPA,UAAWL,EADJ,EACIA,eAAgBvN,EADpB,EACoBA,aAEvDC,EACHwM,OAAOC,SAASpL,OAAOuC,EpB9DJ,KoB8DgCC,GAGlDyJ,EADG3E,EACYtI,EAEAsN,EAFO5N,IAxCxB,EAAKmB,MAAQ,CACZ6L,UAAW,KACX1M,MAAO,EAAK8F,MAAMwH,WALA,E,gEAUnBpG,SAAS0C,MAAT,UAAoBxC,KAAKtB,MAAMwH,UAAU/N,KAAzC,cAAmD6H,KAAKtB,MAAMwH,UAAU1D,S,yCAGtDgC,GACfA,EAAU0B,YAAclG,KAAKtB,MAAMwH,YACrCnB,OAAOsC,SAAS,EAAE,GAClBvH,SAAS0C,MAAT,UAAoBxC,KAAKtB,MAAMwH,UAAU/N,KAAzC,cAAmD6H,KAAKtB,MAAMwH,UAAU1D,U,+BAkC/D,IAAD,SAC8ExC,KAAKtB,MAArFtG,EADE,EACFA,OAAQ2N,EADN,EACMA,WAAY5N,EADlB,EACkBA,KAAMK,EADxB,EACwBA,YAAaD,EADrC,EACqCA,wBAAyBD,EAD9D,EAC8DA,aAChEM,EAASoH,KAAKvG,MAAdb,MAEP,IAAKoH,KAAKtB,MAAMwH,UAAW,OAAO,kBAAC,GAAD,MAClC,IAAKtN,EAAO,OAAO,kBAAC,GAAD,MAEnB,IAAM0O,EnB5BiB,SAAC1O,EAAO8D,EAAO6K,GAEtC,IAAInK,EAAM,GACJoK,EAAOjE,KAAQkE,OAAO7O,EAAMsL,QAElC9G,EAAIlB,KAAK,CACPtD,QACAC,OAAQ,IAPuC,oBAUhC6D,GAVgC,IAUjD,2BAAwB,CAAC,IAAdiB,EAAa,QAEtB,GAAIA,EAAGF,KAAO7E,EAAM6E,GAAI,CAEtB,IAAI0E,EAAKoB,KAAQkE,OAAO9J,EAAGuG,QAE3B9G,EAAIlB,KAAK,CACPtD,MAAO+E,EACP9E,OAAQ2O,EAAKE,WAAWvF,OAlBmB,8BAsBjD/E,EAAMA,EAAIsI,MAAK,SAACiC,EAAMC,GAAP,OAAgBD,EAAK9O,OAAS+O,EAAK/O,UAElD,IAAK,IAAI8D,EAAI,EAAGA,EAAIS,EAAIvE,OAAQ8D,IAC9BS,EAAIT,GAAKS,EAAIT,GAAG/D,MAGlB,OAAOwE,EAAIyK,MAAM,EAAGN,EAAS,GmBANO,CAAUlP,EAAOmN,EpBjEP,GoBkE3B1C,EnBrEoB,SAACjL,EAAQD,GAInC,OAAOC,EAFOqE,GAASrE,EAAQD,IAEV+L,OmBiEH6D,CAAa3P,EAAQD,GAEvC,OACC,yBAAK+H,UAAU,QAEd,kBAAC,GAAD,CACC3H,wBAAyBA,EACzBC,YAAaA,IAGd,0BAAM0H,UAAU,mCACf,6BAASA,UAAU,YAElB,kBAAC,GAAD,CACCsC,MAAO5J,EAAM4J,MACb+D,OAAQ3N,EAAM2N,SAGf,yBAAKrG,UAAU,iCACd,yBAAKA,UAAU,qBAEd,kBAAC,GAAD,CACCsB,UAAW5I,EAAMsJ,WACjBpB,OAAO,aAGR,yBAAKZ,UAAU,0BACd,wBAAIA,UAAU,kBACZtH,EAAM4J,OAGR,kBAAC,GAAD,CACCvB,SAAUjB,KAAK+B,aACff,gBAAiB,SAACE,GAAD,OAAW,EAAKqB,oBAAoB3J,EAAOsI,IAC5DA,OAAO,KAKT,kBAAC,GAAD,CACCQ,OAAQ9I,EAAM8I,OACdZ,OAAO,aAGR,kBAAC,GAAD,CACClI,MAAOA,IAGR,kBAAC,GAAD,CACCiJ,MAAOjJ,EAAMiJ,MACbf,OAAO,aAGR,kBAAC,GAAD,CACC+F,MAAOjO,EAAMiO,QAGd,kBAAC,GAAD,CACCjO,MAAOA,MAKV,6BAASsH,UAAU,mBAAmBkB,MAAO,CAACrE,OAAQ,QAAYiL,aAAc,SAE/E,kBAAC,GAAD,CACC9D,OAAQb,EACR3G,MAAO4K,EACP7C,WAAYzE,KAAKvG,MAAM6L,UACvB1M,MAAOA,MAKV,yBAAKsH,UAAU,aACd,6BAASA,UAAU,sBAClB,wBAAIA,UAAU,sBAAd,qCACA,yBAAKA,UAAU,kCAEd,kBAAC,GAAD,CACC/H,KAAMA,EACNuE,MAAO4K,EACPhP,aAAcA,EACd+H,QAASL,KAAKX,YACd2C,YAAahC,KAAK0C,gBAClBT,aAAcjC,KAAK2C,iBACnB3B,gBAAiBhB,KAAKuC,+B,GAlJH3C,IAAMW,eA6LnB0F,gBAtBS,SAACxM,EAAOwO,GAAc,IACtCxK,EAAMwK,EAASC,MAAMC,OAArB1K,GACP,OAAKD,GAAa/D,EAAOgE,GAElB9D,OAAOC,OAAO,GAAIqO,EAAU,CAClCxK,KACAtF,KAAMqF,GAAa/D,EAAOgE,GAAItF,KAC9BC,OAAQqB,EAAMrB,OACd8N,UAAW1I,GAAa/D,EAAOgE,GAC/BsI,WAAYnI,GAAcnE,EAAOgE,GACjCnF,aAAcmB,EAAMnB,aACpBC,wBAAyBkB,EAAMlB,wBAC/BC,YAAaiB,EAAMjB,cAViBmB,OAAOC,OAAO,GAAIqO,EAAU,CAAC/B,UAAW,QAcnD,SAAClM,EAAUiO,GAAX,MAAyB,CACnD5H,QAAS,SAACzH,GAAD,OAAWoB,EAASd,EAA8BN,KAC3DiN,eAAgB,SAACK,GAAD,OAAelM,EAASF,EAAUkC,mBAAmBkK,QAIvDD,CAA6CmB,I,QCpL7CgB,GAxBQ,SAAC1J,GAAW,IAE1BvG,EAAqCuG,EAArCvG,KAAMkQ,EAA+B3J,EAA/B2J,oBAAqBvH,EAAUpC,EAAVoC,OAGlC,OACE,yBAAKZ,UAAW7D,EAAsByE,EAAOwH,gBAC3C,yBAAKpI,UAAU,mBACb,kBAAC,KAAD,CAAMiC,GAAI/F,EAAgB8D,UAAU,kCAClCG,QANwB,kBAAMgI,EAAoBlQ,KAQlD,8BAAOA,OCiKFoQ,I,wDAxKb,WAAY7J,GAAQ,IAAD,8BACjB,cAAMA,IA6BR8J,aAAe,SAAC5J,GAAO,IACb6J,EAAa,EAAK/J,MAAlB+J,SAER7J,EAAE8J,iBAEFD,EAAS,CACP/M,MAAO,EAAKjC,MAAMiC,MAClBC,SAAU,EAAKlC,MAAMkC,YArCN,EAyCnBgN,cAAgB,SAACzD,EAAM0D,GACrB,IAAIC,EAAa,EAAKpP,MAAMoP,WACxBC,EAAgB,EAAKrP,MAAMqP,cAI/B,OAAQ5D,GACN,IAAI,QACF2D,EAAaD,EAAMV,MAAM,wCACzB,MAEF,IAAI,WACFY,EACEF,EAAM/P,QAVU,GAUiB+P,EAAM/P,QATvB,GAgBtB,EAAKqG,SACH,CACE2J,aACAC,iBAEF,EAAKC,eAlEU,EAsEnBA,aAAe,WACb,EAAK7J,SAAS,CACZ8J,UAAW,EAAKvP,MAAMoP,YAAc,EAAKpP,MAAMqP,iBAxEhC,EA4EnBG,aAAe,SAACrK,GACd,IAAMgK,EAAQhK,EAAEI,OAAO4J,MACjB1D,EAAOtG,EAAEI,OAAOkG,KAEtB,EAAKhG,SAAL,gBAAiBgG,EAAO0D,IAAS,WAC/B,EAAKD,cAAczD,EAAM0D,OAjFV,EAqFnBrD,gBAAkB,SAACpN,GAAD,OAAU,EAAKuG,MAAM8G,YAAYrN,IAlFjD,EAAKsB,MAAQ,CACXtB,KAAM,GACNuD,MAAO,GACPC,SAAU,GACVkN,YAAY,EACZC,eAAe,EACfE,WAAW,GATI,E,gEAcE,IACX5Q,EAAW4H,KAAKtB,MAAhBtG,OAER0H,SAAS0C,MAAT,qBAEAxC,KAAKd,UAAS,iBAAO,CACnB/G,KAAMC,GrB6DiB8Q,EqB7DG9Q,EAAOS,OrB+D9BsQ,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAMF,MqB/DC/Q,MrB6DpB,IAAC+Q,O,yCqBzDR1E,GACbA,EAAUhM,cAAgBwH,KAAKtB,MAAMlG,aACxCuM,OAAOC,SAASpL,OAAOuC,EtBnCN,KsBmCkCC,K,+BA6D5C,IAAD,SACyC4D,KAAKtB,MAA7CtG,EADD,EACCA,OAAQkR,EADT,EACSA,eAAgB9Q,EADzB,EACyBA,YAEhC,OACE,yBAAK0H,UAAU,+BACb,kBAAC,GAAD,CACE3H,wBAAyB+Q,EACzB9Q,YAAaA,EACbsM,YAAa,kBAAM,EAAKS,gBAAgBnN,EAAO,GAAGD,SAGpD,0BAAM+H,UAAU,gCACd,yBAAKA,UAAU,mCACb,6BAASA,UAAU,SACjB,wBAAIA,UAAU,gBAAd,WACA,0BACEA,UAAU,mBACVxG,OAAO,IACPyG,OAAO,OACPsI,SAAUzI,KAAKwI,cAEf,yBAAKtI,UAAU,4CACb,2BAAOA,UAAU,mBAAjB,UACA,2BACEA,UAAS,mCAA8BrC,GACrCmC,KAAKvG,MAAMiC,MACXsE,KAAKvG,MAAMoP,aAEb1P,KAAK,QACL+L,KAAK,QACLqE,YAAY,QACZC,SAAS,GACTZ,MAAO5I,KAAKvG,MAAMiC,MAClB+N,SAAUzJ,KAAKiJ,gBAGnB,yBAAK/I,UAAU,4CACb,2BAAOA,UAAU,mBAAjB,YACA,2BACEA,UAAS,mCAA8BrC,GACrCmC,KAAKvG,MAAMkC,SACXqE,KAAKvG,MAAMqP,gBAEb3P,KAAK,WACL+L,KAAK,WACLqE,YAAY,WACZC,SAAS,GACTZ,MAAO5I,KAAKvG,MAAMkC,SAClB8N,SAAUzJ,KAAKiJ,gBAGnB,4BACE/I,UAAU,oCACV/G,KAAK,SACLuQ,UAAW1J,KAAKvG,MAAMuP,WAHxB,aAUJ,kBAAC,GAAD,CACE7Q,KAAM6H,KAAKvG,MAAMtB,KACjBkQ,oBAAqBrI,KAAKuF,gBAC1BzE,OAAO,iB,GAxJAlB,IAAMW,gBCsDZoJ,GAtDM,SAACjL,GAAW,IAExB3F,EAAQ2F,EAAR3F,KAIP,OACE,6BAASmH,UAAU,8BAEjB,kBAAC,GAAD,CACEsB,UAAWzI,EAAKmJ,WAChBpB,OAAO,eAGT,yBAAKZ,UAAU,sDACb,kBAAC,KAAD,CAAMiC,GAAI,UAAYpJ,EAAKC,QAASkH,UAAU,cAC5C,yBAAKA,UAAU,oBAAoBkC,IAAKrJ,EAAKsJ,cAAevF,MAAM,MAAMC,OAAO,MAAMuF,IAAI,YAG7F,yBAAKpC,UAAU,yCACb,yBAAKA,UAAU,6BAEb,kBAAC,GAAD,CACE2B,MAAO9I,EAAK8I,MACZf,OAAO,eAGT,kBAAC,GAAD,CACEE,gBAxBkB,kBAAMtC,EAAMsC,gBAAgBtC,EAAM3F,OAyBpDkI,UAAU,EACVC,OAAO,KAKX,kBAAC,GAAD,CACEQ,OAAQ3I,EAAK2I,OACbZ,OAAO,eAGT,wBAAIZ,UAAU,oBACZ,kBAAC,KAAD,CAAMiC,GAAI,UAAYpJ,EAAKC,QAASkH,UAAU,0BAA0BnH,EAAKyJ,QAE/E,uBAAGtC,UAAU,oBAAoBnH,EAAKI,SCI/ByQ,GAlDO,SAAClL,GAAW,IAE1BpG,EAAsDoG,EAAtDpG,aAAc0I,EAAwCtC,EAAxCsC,gBAAiBqH,EAAuB3J,EAAvB2J,oBAEhC9F,EAAsB,SAACxJ,GAAD,OAAUiI,EAAgBjI,IAEhD8Q,EAA0B,SAAC1R,GAAD,OAAUkQ,EAAoBlQ,IAE9D,OACC,wBAAI+H,UAAU,mBAEZ5H,EAAagG,KAAI,SAACwL,EAASC,GAE3B,OACC,wBAAI7J,UAAU,6BAA6B0C,IAAKkH,EAAQ3R,KAAO4R,GAE9D,kBAAC,GAAD,CACC5R,KAAM2R,EAAQ3R,KACdyK,IAAKkH,EAAQ3R,KAAO4R,EACpB1B,oBAAqBwB,EACrB/I,OAAO,cAGR,yBAAKZ,UAAU,qBAEb4J,EAAQvL,UAAUD,KAAI,SAAC0L,GAEvB,OACE,kBAAC,GAAD,CACCjR,KAAMiR,EACNpH,IAAKoH,EAAMhR,QACXgI,gBAAiBuB,cCmDb0D,gBAbS,SAACxM,EAAOwO,GAE9B,OAAOtO,OAAOC,OAAO,GAAIqO,EAAU,OAGV,SAACjO,GAAD,MAAe,CAExCiQ,UAAW,SAAC9R,GAAD,OAAU6B,EAASd,EAAsBf,KACpD0N,eAAgB,SAACK,GAAD,OAAelM,EAASF,EAAUkC,mBAAmBkK,QAKxDD,EA7EG,SAACvH,GAAW,IAErBpG,EAAwEoG,EAAxEpG,aAAcuN,EAA0DnH,EAA1DmH,eAAgBoE,EAA0CvL,EAA1CuL,UAAWX,EAA+B5K,EAA/B4K,eAAgB9Q,EAAekG,EAAflG,YAQhE,OAFAsH,SAAS0C,MAAT,uBAGE,yBAAKtC,UAAS,eAAW5H,EAAaO,OAAd,6BAEtB,kBAAC,GAAD,CACEN,wBAAyB+Q,EACzB9Q,YAAaA,IAGdF,EAAaO,OACV,0BAAMqH,UAAU,oCAChB,yBAAKA,UAAU,uCACb,6BAASA,UAAU,aACjB,wBAAIA,UAAU,oBAAd,iBAEA,kBAAC,GAAD,CACE5H,aAAc0F,GAAmB1F,GACjC0I,gBAtBc,SAACjI,GAAD,OAAU8M,EAAe9M,IAuBvCsP,oBArBkB,SAAClQ,GAAD,OAAU8R,EAAU9R,SA2B5C,0BAAM+H,UAAU,gEAChB,yBAAKA,UAAU,uCACb,6BAASA,UAAU,8BACjB,wBAAIA,UAAU,mBAAd,qBACA,yBAAKA,UAAU,6BACb,uBAAGA,UAAU,qBAAb,sBACA,uBAAGA,UAAU,iCAAb,uEAOV,4BAAQA,UAAU,UAChB,kBAAC,KAAD,CAAMiC,GAAI/F,EAAgB8D,UAAU,qBAClC,yBAAKA,UAAU,eAAekC,IAAKjG,EAAa,gBAAoBmG,IAAI,gBAAgBxF,MAAM,KAAKC,OAAO,aChDrGmN,GATA,WAEd,OACC,yBAAKzM,GAAG,aACP,yBAAKA,GAAG,a,SCKI0M,GARM,SAAC,GAAD,IAAatH,EAAb,EAAEuH,UAAsBd,EAAxB,EAAwBA,eAAmBe,EAA3C,sDACpB,kBAAC,IAAD,iBAAWA,EAAX,CAAiBC,OAAQ,SAAC5L,GAAD,OACL,IAAnB4K,EACG,kBAACzG,EAAD,iBAAewH,EAAU3L,IACzB,kBAAC,IAAD,CAAUyD,GAAG,WCUZoI,G,kDACJ,WAAY7L,GAAQ,IAAD,8BACjB,cAAMA,IAcR8L,aAAe,WACb,EAAKtL,UACH,SAACE,GAAD,MAAgB,CACdqL,gBAAiBrL,EAAUqL,mBAE7B,kBAAM1F,OAAOC,SAASgB,aApBP,EAwBnB0E,iBAAmB,SAAC3R,GAClB,OAAO,EAAKmG,SAAS,CAAEyL,cAAe5R,EAAK0E,MAtB3C,EAAKhE,MAAQ,CACXkR,cAAe,GACfF,gBAAgB,GALD,E,+DASAjG,GACbA,EAAUpM,SAAW4H,KAAKtB,MAAMtG,QAClC4H,KAAKd,SAAS,CAAEuL,gBAAgB,M,+BAiB1B,IAAD,EASHzK,KAAKtB,MAPPtG,EAFK,EAELA,OACAD,EAHK,EAGLA,KACAK,EAJK,EAILA,YACAD,EALK,EAKLA,wBACAD,EANK,EAMLA,aACA2R,EAPK,EAOLA,UACA7O,EARK,EAQLA,MAGF,OAAO4E,KAAKvG,MAAMgR,gBAAkBtS,EAClC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOyS,OAAK,EAACC,KAAMzO,GACjB,kBAAC,GAAD,iBACM4D,KAAKtB,MADX,CAEEqH,WAAY3N,EAAOqE,GAASrE,EAAQD,IAAOoF,QAAU,GACrD8C,QAASL,KAAK0K,iBACdlF,YAAayE,EACbjE,OAAQhG,KAAKwK,iBAGjB,kBAAC,IAAD,CAAOI,OAAK,EAACC,KAAMzO,GACjB,kBAAC,GAAD,CACEhE,OAAQA,EACRqQ,SAAUrN,EACVoK,YAAayE,EACbzR,YAAaA,EACb8Q,eAAgB/Q,KAGpB,kBAAC,GAAD,CACEqS,OAAK,EACLC,KAAMzO,EACNgO,UAAWU,GACXxB,eAAgB/Q,EAChBD,aAAcA,EACdE,YAAaA,IAEf,kBAAC,IAAD,CACEqS,KAAMzO,EACNkO,OAAQ,SAAC5L,GAAD,OAAW,kBAAC,GAAkBA,MAExC,kBAAC,IAAD,CAAOmM,KAAMzO,EAAiBgO,UAAWhE,MAG3C,kBAAC,GAAD,U,GA3EYxG,IAAMW,eA4GT0F,gBAnBS,SAACxM,EAAOwO,GAAR,OACtBtO,OAAOC,OAAO,GAAIqO,EAAU,CAC1B9P,KAAMsB,EAAMtB,KACZC,OAAQqB,EAAMrB,OACdC,aAAcoB,EAAMpB,aACpBC,aAAcmB,EAAMnB,aACpBC,wBAAyBkB,EAAMlB,wBAC/BC,YAAaiB,EAAMjB,iBAGI,SAACwB,GAAD,MAAe,CACxCiQ,UAAW,SAAC9R,GAAD,OAAU6B,EAASd,EAAsBf,KACpDkI,QAAS,SAACzH,GAAD,OAAWoB,EAASd,EAA8BN,KAC3DwC,MAAO,SAACC,GAAD,OAAcrB,EAASF,EAAUsB,MAAMC,KAC9C0P,mBAAoB,SAAC5P,GAAD,OAASnB,EAASF,EAAUoB,wBAAwBC,QAK3D8K,CAA6CsE,KCjH/C,WACX,IAAMS,EAAQC,YACVzR,EACA0R,YAAgBC,MAQpBH,EAAMhR,SAASF,EAAUC,cACzBiR,EAAMhR,SAASF,EAAUgB,aAEzBsQ,IAASd,OACL,kBAAC,IAAD,CAAUU,MAAOA,GACf,kBAAC,IAAD,CAAQ3T,QAASA,GACf,kBAAC,GAAD,QAGJyI,SAASuL,eAAT,SAINC,K","file":"static/js/main.870de4f5.chunk.js","sourcesContent":["import {createBrowserHistory} from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","import {initializeApp} from \"firebase/app\";\r\nimport {getDatabase} from \"firebase/database\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: `AIzaSyBxAD3KOWDk8CIHIf92sMRDVn1ncpoxA4w`,\r\n  authDomain: `cities-5fbfb.firebaseapp.com`,\r\n  projectId: `cities-5fbfb`,\r\n  storageBucket: `cities-5fbfb.appspot.com`,\r\n  messagingSenderId: `925423531890`,\r\n  appId: `1:925423531890:web:366423e60c1ba0f6a14feb`,\r\n  measurementId: `G-SR29YM1GY2`,\r\n  databaseURL: `https://cities-5fbfb-default-rtdb.europe-west1.firebasedatabase.app/`,\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const db = getDatabase(app);\r\n\r\nexport default app;\r\n","import {\r\n  getAuth,\r\n  setPersistence,\r\n  signInWithEmailAndPassword,\r\n  browserSessionPersistence,\r\n} from \"firebase/auth\";\r\nimport app from \"./fb\";\r\nimport { getDatabase, ref, child, get, update } from \"firebase/database\";\r\n\r\nconst initialState = {\r\n  city: ``,\r\n  hotels: [],\r\n  currentOffer: {},\r\n  favoriteList: [],\r\n  isAuthorizationRequired: true,\r\n  currentUser: {},\r\n  reviews: [],\r\n  sortingType: `Popular`,\r\n};\r\n\r\nconst getFavoriteIndexFromList = (offer, favoriteList) => {\r\n  if (!favoriteList || !favoriteList.length) return -1;\r\n\r\n  return favoriteList.findIndex((item) => item.hotelId === offer.hotelId);\r\n};\r\n\r\nconst ActionType = {\r\n  SET_CITY: `SET_CITY`,\r\n  SET_HOTELS: `SET_HOTELS`,\r\n  SET_CURRENT_OFFER: `SET_CURRENT_OFFER`,\r\n  REQUIRE_AUTHORIZATION: `REQUIRE_AUTHORIZATION`,\r\n  SET_CURRENT_USER: `SET_CURRENT_USER`,\r\n  RELOAD_ALL: `RELOAD_ALL`,\r\n  TOGGLE_FAVORITE: `TOGGLE_FAVORITE`,\r\n  ADD_FAVORITE: `ADD_FAVORITE`,\r\n  REMOVE_FAVORITE: `REMOVE_FAVORITE`,\r\n  SET_FAVORITES: `SET_FAVORITES`,\r\n  SET_FAVORITE_LIST: `SET_FAVORITE_LIST`,\r\n  SET_REVIEWS: `SET_REVIEWS`,\r\n  SET_SORTING_TYPE: `SET_SORTING_TYPE`,\r\n};\r\n\r\nconst ActionCreator = {\r\n  setCity: (city) => ({\r\n    type: ActionType.SET_CITY,\r\n    payload: city,\r\n  }),\r\n\r\n  setHotels: (hotels) => ({\r\n    type: ActionType.SET_HOTELS,\r\n    payload: hotels,\r\n  }),\r\n\r\n  setCurrentOffer: (currentOffer) => ({\r\n    type: ActionType.SET_CURRENT_OFFER,\r\n    payload: currentOffer,\r\n  }),\r\n\r\n  requireAuthorization: (status) => ({\r\n    type: ActionType.REQUIRE_AUTHORIZATION,\r\n    payload: status,\r\n  }),\r\n\r\n  setCurrentUser: (dataUser) => ({\r\n    type: ActionType.SET_CURRENT_USER,\r\n    payload: dataUser,\r\n  }),\r\n\r\n  toggleFavorite: (offer, favoriteList) => {\r\n    const offerInd = getFavoriteIndexFromList(offer, favoriteList);\r\n\r\n    if (offerInd < 0) {\r\n      return {\r\n        type: `ADD_FAVORITE`,\r\n        payload: offer,\r\n      };\r\n    }\r\n    return {\r\n      type: `REMOVE_FAVORITE`,\r\n      payload: offerInd,\r\n    };\r\n  },\r\n\r\n  setFavorites: (favoriteList) => ({\r\n    type: `SET_FAVORITES`,\r\n    payload: favoriteList,\r\n  }),\r\n\r\n  setFavoriteList: (list) => ({\r\n    type: `SET_FAVORITE_LIST`,\r\n    payload: list,\r\n  }),\r\n\r\n  setReviews: (reviews) => ({\r\n    type: `SET_REVIEWS`,\r\n    payload: reviews,\r\n  }),\r\n\r\n  setSortingType: (type) => ({\r\n    type: `SET_SORTING_TYPE`,\r\n    payload: type,\r\n  }),\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionType.SET_CITY:\r\n      return Object.assign({}, state, {\r\n        city: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_HOTELS:\r\n      return Object.assign({}, state, {\r\n        hotels: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_CURRENT_OFFER:\r\n      return Object.assign({}, state, {\r\n        currentOffer: action.payload,\r\n      });\r\n\r\n    case ActionType.REQUIRE_AUTHORIZATION:\r\n      return Object.assign({}, state, {\r\n        isAuthorizationRequired: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        currentUser: action.payload,\r\n      });\r\n\r\n    case ActionType.ADD_FAVORITE:\r\n      if (state.currentUser.favoriteList) {\r\n        return Object.assign({}, state, {\r\n          currentUser: {\r\n            ...Object.assign({}, state.currentUser, {\r\n              favoriteList: [...state.currentUser.favoriteList, action.payload],\r\n            }),\r\n          },\r\n        });\r\n      }\r\n      return Object.assign({}, state, {\r\n        currentUser: {\r\n          ...Object.assign({}, state.currentUser, {\r\n            favoriteList: [ action.payload],\r\n          }),\r\n        },\r\n      });\r\n\r\n    case ActionType.REMOVE_FAVORITE:\r\n      let list = [...state.favoriteList];\r\n      list.splice(action.payload, 1);\r\n\r\n      return Object.assign({}, state, {\r\n        favoriteList: list,\r\n      });\r\n\r\n    case ActionType.SET_FAVORITES:\r\n      return Object.assign({}, state, {\r\n        favoriteList: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_FAVORITE_LIST:\r\n      return Object.assign({}, state, {\r\n        favoriteList: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_REVIEWS:\r\n      return Object.assign({}, state, {\r\n        reviews: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_SORTING_TYPE:\r\n      return Object.assign({}, state, {\r\n        sortingType: action.payload,\r\n      });\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst Operation = {\r\n  loadHotels: () => (dispatch, getState) => {\r\n    const dbRef = ref(getDatabase());\r\n\r\n    get(child(dbRef, `hotels/`))\r\n      .then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          dispatch(ActionCreator.setHotels(snapshot.val()));\r\n        }\r\n      })\r\n      .then(() => {\r\n        const city = getState().hotels[0].city;\r\n        \r\n        if (city) dispatch(ActionCreator.setCity(city));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  checkAuth: () => (dispatch, getState) => {\r\n    const auth = getAuth();\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n\t\t    dispatch(Operation.downloadCurrentUserData(user.uid));\r\n      }\r\n    });    \r\n  },\r\n\r\n  login: (authData) => (dispatch, getState) => {\r\n    const auth = getAuth(app);\r\n    setPersistence(auth, browserSessionPersistence)\r\n      .then(() =>\r\n        signInWithEmailAndPassword(auth, authData.email, authData.password)\r\n      )\r\n      .then((userCredential) =>\r\n        dispatch(Operation.downloadCurrentUserData(userCredential.user.uid))\r\n      )\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  downloadCurrentUserData: (uid) => (dispatch, getState) => {\r\n    const dbRef = ref(getDatabase());\r\n\r\n    get(child(dbRef, `users/${uid}`))\r\n      .then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          dispatch(ActionCreator.setCurrentUser(snapshot.val()));\r\n          dispatch(ActionCreator.requireAuthorization(false));\r\n        }\r\n      })\r\n      .then(() => {\r\n        if (getState().currentUser.favoriteList) {\r\n          dispatch(\r\n            ActionCreator.setFavoriteList(getState().currentUser.favoriteList)\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  uploadToFavoriteList: (list) => (dispatch, getState) => {\r\n    const db = getDatabase();\r\n    const uid = getAuth().currentUser.uid;\r\n\r\n    update(ref(db, `users/` + uid), { favoriteList: list })\r\n      .then(() => {\r\n        dispatch(Operation.downloadCurrentUserData(uid));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  toggleFavoriteList: (offer) => (dispatch, getState) => {\r\n    let list = getState().currentUser.favoriteList;\r\n    const index = getFavoriteIndexFromList(offer, list);\r\n\r\n    if(index > -1) {\r\n      list.splice(index, 1);\r\n      dispatch(Operation.uploadToFavoriteList(list));\r\n      return;\r\n    }\r\n    if(list) {\r\n      list.push(offer);\r\n      dispatch(Operation.uploadToFavoriteList(list));\r\n      return;\r\n    }\r\n    dispatch(Operation.uploadToFavoriteList([offer]));\r\n  },\r\n};\r\nexport { ActionCreator, reducer, Operation };\r\n","export const BASE_PATHNAME = `/six-cities-react`;\r\nexport const BASE_HASH = `/#`;\r\n// export const BASE_PATHNAME = ``;\r\n// export const BASE_HASH = ``;\r\n\r\nexport const APP_ROUTE = {\r\n  LOGIN: `/login`,\r\n  ROOT: `/`,\r\n  OFFER: `/offer/:id`,\r\n  FAVORITES: `/favorites`,\r\n  ERROR: `*`,\r\n};\r\n\r\nexport const ICON_SIZE = 30;\r\n\r\nexport const NUMBER_NEIBOURHOODS = 3;\r\n\r\nexport const LOCATION_BUTTON_CLASS = {\r\n  FAVORITES: `favorites__locations locations locations--current`,\r\n  LOGIN: `locations locations--login locations--current`,\r\n};\r\n\r\nexport const INPUT_LOGIN_CLASS = {\r\n  ERROR: `input_error`,\r\n  VALID: `input_valid`,\r\n};\r\n","import {ICON_SIZE, INPUT_LOGIN_CLASS, BASE_PATHNAME} from '../const';\r\nimport leaflet from 'leaflet';\r\n\r\nexport const getIndex = (items, city) => {\r\n\r\n  for (let i = 0; i < items.length; i++) {\r\n    if (items[i].city.toLowerCase() === city.toLowerCase()) {\r\n      return i;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getCityCoord = (hotels, city) => {\r\n\r\n  const index = getIndex(hotels, city);\r\n\r\n  return hotels[index].coords;\r\n};\r\n\r\nexport const getActiveIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n  iconUrl: BASE_PATHNAME + `/img/pin-active.svg`,\r\n  iconSize: [width, height]\r\n});\r\n\r\nexport const getIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n  iconUrl: BASE_PATHNAME + `/img/pin.svg`,\r\n  iconSize: [width, height]\r\n});\r\n\r\nexport const getAllOffers = (state) => {\r\n  let arr = [];\r\n\r\n  state.hotels.forEach((item) => {\r\n    if (item.hasOwnProperty(`offers`)) {\r\n      arr = [...arr, ...item.offers];\r\n    }\r\n  });\r\n\r\n  return arr;\r\n};\r\n\r\nexport const getCityOffer = (state, id) => {\r\n\r\n  return getAllOffers(state).filter((it) => it.hotelId === +id)[0];\r\n};\r\n\r\nexport const getCityOffers = (state, id) => {\r\n  const city = getCityOffer(state, id).city;\r\n\r\n  return getAllOffers(state).filter((it) => it.city === city);\r\n};\r\n\r\nexport const getNhoods = (offer, items, number) => {\r\n\r\n  let arr = [];\r\n  const from = leaflet.latLng(offer.coords);\r\n\r\n  arr.push({\r\n    offer,\r\n    length: 0\r\n  });\r\n\r\n  for (const it of items) {\r\n\r\n    if (it.id !== offer.id) {\r\n\r\n      let to = leaflet.latLng(it.coords);\r\n\r\n      arr.push({\r\n        offer: it,\r\n        length: from.distanceTo(to)\r\n      });\r\n    }\r\n  }\r\n  arr = arr.sort((prev, next) => prev.length - next.length);\r\n\r\n  for (let i = 0; i < arr.length; i++) {\r\n    arr[i] = arr[i].offer;\r\n  }\r\n\r\n  return arr.slice(1, number + 1);\r\n};\r\n\r\nexport const getLS = (name) => {\r\n  return JSON.parse(localStorage.getItem(name));\r\n};\r\n\r\nexport const setLS = (name, arr) => {\r\n  return localStorage.setItem(name, JSON.stringify(arr));\r\n};\r\n\r\nexport const getRandomInt = (max) => {\r\n\r\n  return Math.floor(Math.random() * Math.floor(max));\r\n};\r\n\r\nexport const \tgetInputClassName = (inputValue, inputValid) => {\r\n\r\n  if (inputValid) return INPUT_LOGIN_CLASS.VALID;\r\n\r\n  if (inputValue.length > 0) return INPUT_LOGIN_CLASS.ERROR;\r\n\r\n  return ``;\r\n};\r\n\r\nexport const formatFavoriteList = (arrayOfObject) => {\r\n\r\n  let cities = new Set();\r\n  let res = [];\r\n\r\n  arrayOfObject.forEach((it) => cities.add(it.city));\r\n\r\n  [...cities].map((city) => {\r\n    return res.push({\r\n      city,\r\n      favorites: [...arrayOfObject.filter((obj) => city === obj.city)],\r\n    });\r\n  });\r\n\r\n  return res;\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass SortingType extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.wrapRef = React.createRef();\r\n    this.state = {\r\n      isOpen: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"click\", this.closeSortingList);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"click\", this.closeSortingList);\r\n  }\r\n\r\n  closeSortingList = (e) => {\r\n    if (!this.wrapRef || !this.wrapRef.current.contains(e.target)) {\r\n\t  if(this.state.isOpen) this.setState({isOpen: false});\r\n    }\r\n  };\r\n\r\n  handleClickToggle = (e) => {\r\n    this.setState((prevState) => ({\r\n      isOpen: !prevState.isOpen,\r\n    }));\r\n  };\r\n\r\n  handleClick = (e) => {\r\n    e.currentTarget\r\n      .querySelector(\".places__option--active\")\r\n      .classList.remove(\"places__option--active\");\r\n    e.target.classList.add(\"places__option--active\");\r\n\r\n    this.handleClickToggle();\r\n    this.props.onChangeOption(e.target.innerHTML);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"places__sorting\" action=\"#\" method=\"get\" ref={this.wrapRef}>\r\n        <span className=\"places__sorting-caption\">Sort by </span>\r\n        <span\r\n          className=\"places__sorting-type\"\r\n          tabIndex=\"0\"\r\n          onClick={this.handleClickToggle}\r\n        >\r\n          {this.props.sortingType}\r\n          <svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\r\n            <use xlinkHref=\"#icon-arrow-select\" />\r\n          </svg>\r\n        </span>\r\n        <ul\r\n          onClick={this.handleClick}\r\n          className={\r\n            this.state.isOpen\r\n              ? `places__options places__options--custom places__options--opened`\r\n              : `places__options places__options--custom places__options--closed`\r\n          }\r\n        >\r\n          <li className=\"places__option places__option--active\" tabIndex=\"0\">\r\n            Popular\r\n          </li>\r\n          <li className=\"places__option\" tabIndex=\"0\">\r\n            Price: low to high\r\n          </li>\r\n          <li className=\"places__option\" tabIndex=\"0\">\r\n            Price: high to low\r\n          </li>\r\n          <li className=\"places__option\" tabIndex=\"0\">\r\n            Top rated first\r\n          </li>\r\n        </ul>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nSortingType.propType = {\r\n  onChangeOption: PropTypes.func.isRequired,\r\n  sortingType: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default SortingType;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst size = {\r\n\tdefault: {\r\n\t\tprefix: `property`,\r\n\t\twidth: 31,\r\n\t\theight: 33,\r\n\t},\r\n\tsmall: {\r\n\t\tprefix: `place-card`,\r\n\t\twidth: 18,\r\n\t\theight: 19,\r\n\t}\r\n};\r\n\r\nconst BookmarkButton = (props) => {\r\n\r\n\tconst {onBookmarkClick, isActive, small} = props;\r\n\r\n\tconst prefix = small ? size.small.prefix : size.default.prefix;\r\n\tconst buttonClassActive = isActive ? `${prefix}__bookmark-button--active` : ``;\r\n\r\n\treturn (\r\n\t\t<button className={`${prefix}__bookmark-button ${buttonClassActive} button`}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={() => onBookmarkClick(small)}\r\n\t\t>\r\n\t\t\t<svg className={`${prefix}__bookmark-icon`}\r\n\r\n\t\t\t\t\t width={small ? size.small.width : size.default.width}\r\n\t\t\t\t\t height={small ? size.small.height : size.default.height}\r\n\t\t\t\t\t style={isActive ? {fill: `#4481c3`, stroke: `#4481c3`} : {fill: `none`,\r\n\t\t\t\t\t\t\t stroke: `#b8b8b8`}}\r\n\t\t\t>\r\n\t\t\t\t<use xlinkHref=\"#icon-bookmark\"/>\r\n\t\t\t</svg>\r\n\t\t\t<span className=\"visually-hidden\">To bookmarks</span>\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nBookmarkButton.propTypes = {\r\n\tisActive: PropTypes.bool,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default BookmarkButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Mark = (props) => {\r\n\r\n\tconst {isPremium, prefix} = props;\r\n\r\n\treturn isPremium ?\r\n\t\t<div className={`${prefix}__mark`}>\r\n\t\t\t<span>Premium</span>\r\n\t\t</div>\r\n\t\t: '';\r\n};\r\n\r\nMark.propTypes = {\r\n\tisPremium: PropTypes.bool.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Mark;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Rating = (props) => {\r\n\r\n\tconst {rating, prefix} = props;\r\n\r\n\tconst maxRatingPersent = 100;\r\n\tconst maxStars = 5;\r\n\tconst currentRatingPersent = rating * maxRatingPersent / maxStars;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__rating rating`}>\r\n\t\t\t<div className={`${prefix}__stars rating__stars`}>\r\n\t\t\t\t<span style={{width: currentRatingPersent + '%'}}/>\r\n\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t</div>\r\n\t\t\t{prefix === `property`\r\n\t\t\t\t? <span className={`${prefix}__rating-value rating__value`}>{rating}</span>\r\n\t\t\t\t: ``\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nRating.propTypes = {\r\n\trating: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Rating;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Price = (props) => {\r\n\r\n\tconst {price, prefix} = props;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__price`}>\r\n\t\t\t<b className={`${prefix}__price-value`}>&euro;{price}</b>\r\n\t\t\t<span className={`${prefix}__price-text`}>\r\n\t\t\t\t{prefix === `place-card` ? `/` : ``}&nbsp;night\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPrice.propTypes = {\r\n\tprice: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Price;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Mark from '../mark/mark';\r\nimport Rating from '../rating/rating';\r\nimport Price from '../price/price';\r\n\r\nconst Card = (props) => {\r\n\r\n  const {item, isFavorite} = props;\r\n\r\n  const handleClick = (e) => props.onClick(e);\r\n  const handleMouseOver = (e) => props.onMouseOver(e);\r\n  const handleMouseLeave = () => props.onMouseLeave();\r\n  const handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n  return (\r\n    <article className=\"cities__place-card place-card\"\r\n      id={item.id}\r\n      onMouseOver={() => handleMouseOver(item)}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n\r\n      <Mark\r\n        isPremium={item.is_premium}\r\n        prefix=\"place-card\"\r\n      />\r\n\r\n      <div className=\"cities__image-wrapper place-card__image-wrapper\">\r\n        <Link to={`/offer/` + item.hotelId}\r\n          className=\"buttonLink\"\r\n          onClick={() => handleClick(item)}\r\n        >\r\n          <img className=\"place-card__image\" src={item.preview_image} width=\"260\" height=\"200\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n\r\n          <Price\r\n            price={item.price}\r\n            prefix=\"place-card\"\r\n          />\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={(small) => handleBookmarkClick(item, small)}\r\n            isActive={isFavorite}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n\r\n        <Rating\r\n          rating={item.rating}\r\n          prefix=\"place-card\"\r\n        />\r\n\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={`/offer/${item.hotelId}`}\r\n            className=\"card__title buttonLink\"\r\n            onClick={() => handleClick(item)}\r\n          >{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onClick: PropTypes.func,\r\n  onMouseOver: PropTypes.func,\r\n  onMouseLeave: PropTypes.func,\r\n  onBookmarkClick: PropTypes.func,\r\n  isFavorite: PropTypes.bool,\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Card from '../card/card';\r\n\r\nclass CardList extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst {items} = this.props.items;\r\n\r\n\t\tthis.state = {\r\n\t\t\titems: items,\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\thandleMouseOver = (item) => this.props.onMouseOver(item);\r\n\thandleMouseLeave = (e) => this.props.onMouseLeave(e);\r\n\thandleBookmarkClick = (offer, small) => this.props.onBookmarkClick(offer, small);\r\n\r\n\tisFavorite = (favoriteList, item) => {\r\n\r\n\t\tif (favoriteList) {\r\n\t\t\tlet isFavorite = favoriteList.filter((it) => it.hotelId === item.hotelId);\r\n\r\n\t\t\treturn !!isFavorite.length;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {items, favoriteList} = this.props;\r\n\r\n\t\treturn (\r\n\r\n\t\t\titems.map((item) => {\r\n\r\n\t\t\t\treturn <Card\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tkey={item.hotelId}\r\n\t\t\t\t\tisFavorite={this.isFavorite(favoriteList, item)}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t/>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCardList.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n};\r\n\r\nexport default CardList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nconst CitiesList = (props) => {\r\n\r\n  const {items, city, onClick} = props;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h1 className=\"visually-hidden\">Cities</h1>\r\n      <div className=\"tabs\">\r\n        <section className=\"locations container\">\r\n          <ul className=\"locations__list tabs__list\">\r\n\r\n            {items.map((it, i) => {\r\n\r\n              return (\r\n                <li className=\"locations__item\"\r\n                  key={i}\r\n                >\r\n                  <Link to={APP_ROUTE.ROOT} className={ (it.city === city) ? `locations__item-link tabs__item buttonLink tabs__item--active`\r\n                    : `locations__item-link tabs__item buttonLink`}\r\n                  style={{color: `#000`, backgroundColor: `#f5f5f5`}}\r\n                  onClick={() => onClick(it.city)}\r\n                  key={i}\r\n                  >\r\n                    <span>{it.city}</span>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n\r\n          </ul>\r\n        </section>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nCitiesList.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  onClick: PropTypes.func,\r\n  city: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst CitiesNoPlaces = (props) => {\r\n\r\n\tconst {city} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"cities__places-container cities__places-container--empty container\">\r\n\t\t\t<section className=\"cities__no-places\">\r\n\t\t\t\t<div className=\"cities__status-wrapper tabs__content\">\r\n\t\t\t\t\t<b className=\"cities__status\">No places to stay available</b>\r\n\t\t\t\t\t<p className=\"cities__status-description\">We could not find any property availbale at the moment in {city}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<div className=\"cities__right-section\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCitiesNoPlaces.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesNoPlaces;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport leaflet from 'leaflet';\r\n\r\nimport {getIconParams, getActiveIconParams} from '../../helpers/helpers';\r\n\r\nclass Map extends React.PureComponent {\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmap: null,\r\n\t\t\tmarkers: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\r\n\t\tconst {coords, items, offer} = this.props;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\telse {\r\n\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\r\n\t\tconst {coords, offerHover, items, offer} = this.props;\r\n\t\tconst {markers} = this.state;\r\n\r\n\t\tif (prevProps.offer !== offer) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\r\n\r\n\t\tif (prevProps.coords !== coords) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\r\n\t\tthis._changeIconsOnHover(offerHover, markers);\r\n\t}\r\n\r\n\t_initMap = (cityCoord, items, offer = null) => {\r\n\r\n\t\tconst city = cityCoord;\r\n\t\tlet icon = leaflet.icon(getIconParams());\r\n\t\tconst zoom = 12;\r\n\t\tconst map = leaflet.map('map', {\r\n\t\t\tcenter: city,\r\n\t\t\tzoom: zoom,\r\n\t\t\tzoomControl: false,\r\n\t\t\tmarker: true\r\n\t\t});\r\n\r\n\t\tmap.setView(city, zoom);\r\n\r\n\t\tleaflet.tileLayer(`https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png`, {\r\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n\t\t})\r\n\t\t\t.addTo(map);\r\n\r\n\t\tlet markers = [];\r\n\t\tlet mark;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\ticon = leaflet.icon(getActiveIconParams());\r\n\t\t\tmark = leaflet.marker(offer.coords, {icon});\r\n\t\t\tmark.addTo(map);\r\n\t\t}\r\n\r\n\t\tfor (const item of items) {\r\n\r\n\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\tmark = leaflet.marker(item.coords, {icon});\r\n\t\t\tmarkers.push(mark);\r\n\t\t}\r\n\r\n\t\tfor (const it of markers) {\r\n\t\t\tit.addTo(map);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmarkers: markers,\r\n\t\t\tmap: map\r\n\t\t});\r\n\t};\r\n\r\n\t_changeIconsOnHover = (offer, markers) => {\r\n\r\n\t\tfor (const it of markers) {\r\n\r\n\t\t\tlet icon;\r\n\r\n\t\t\tif (offer) {\r\n\t\t\t\tif (it._latlng.lat === offer.coords[0] &&\r\n\t\t\t\t\tit._latlng.lng === offer.coords[1]) {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams(35, 35));\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t}\r\n\t\t\tit.setIcon(icon);\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {items} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div id=\"map\"></div>\r\n\t\t\t\t<span style={{visibility: 'hidden'}} defaultValue={items}/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMap.propTypes = {\r\n\tcoords: PropTypes.array.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\toffer: PropTypes.object,\r\n\tofferHover: PropTypes.object,\r\n};\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE, BASE_PATHNAME} from '../../const';\r\n\r\nconst Header = (props) => {\r\n\r\n  const {isAuthorizationRequired, currentUser, onLogoClick} = props;\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"container\">\r\n        <div className=\"header__wrapper\">\r\n          <div className=\"header__left\">\r\n            <Link to={APP_ROUTE.ROOT}\r\n              className=\"header__logo-link buttonLink\"\r\n              onClick={onLogoClick}\r\n            >\r\n              <img className=\"header__logo\" src={BASE_PATHNAME + `/img/logo.svg`} alt=\"6 cities logo\" width=\"81\" height=\"41\"/>\r\n            </Link>\r\n          </div>\r\n          <nav className=\"header__nav\">\r\n            <ul className=\"header__nav-list\">\r\n              <li className=\"header__nav-item user\">\r\n                <button className=\"header__nav-link header__nav-link--profile buttonLink\">\r\n                  <div className=\"header__avatar-wrapper user__avatar-wrapper\">\r\n                  </div>\r\n\r\n                  {currentUser && !isAuthorizationRequired\r\n                    ? <span className=\"header__user-name user__name\">\r\n                      {/* (window.location.hash !== `#` + APP_ROUTE.FAVORITES) ? <Link to={APP_ROUTE.FAVORITES}>{currentUser.name}</Link> : currentUser.name*/}\r\n                      {(window.location.pathname !== APP_ROUTE.FAVORITES) ? <Link to={APP_ROUTE.FAVORITES}>{currentUser.name}</Link> : currentUser.name}\r\n                    </span>\r\n                    : <span className=\"header__login\">\r\n                      {/* (window.location.hash !== `#` + APP_ROUTE.LOGIN) ?\t<Link to={APP_ROUTE.LOGIN}>Sign in</Link> : `Sign In`*/}\r\n                      {(window.location.pathname !== window.location.hash + APP_ROUTE.LOGIN) ?\t<Link to={APP_ROUTE.LOGIN}>Sign in</Link> : `Sign In`}\r\n                    </span>\r\n                  }\r\n\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nHeader.propTypes = {\r\n  isAuthorizationRequired: PropTypes.bool,\r\n  currentUser: PropTypes.object.isRequired,\r\n  onLogoClick: PropTypes.func,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport SortingType from '../sorting-type/sorting-type';\r\nimport CardList from '../card-list/card-list';\r\nimport CitiesList from '../cities-list/cities-list';\r\nimport CitiesNoPlaces from '../cities-no-places/cities-no-places';\r\nimport Map from '../map/map';\r\nimport Header from '../header/header';\r\n\r\nimport {getIndex} from '../../helpers/helpers';\r\nimport {BASE_PATHNAME, APP_ROUTE, BASE_HASH} from '../../const';\r\n\r\nclass Main extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.title = `6 cities - ${this.props.city}`;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (prevProps.city !== this.props.city) {\r\n\t\t\tthis.props.setSortingType(`Popular`);\r\n\t\t\tdocument.title = `6 cities - ${this.props.city}`;\r\n\t\t}\r\n\t}\r\n\r\n\thandleCardClick = (item) => this.props.onClick(item);\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\thandleSortOffers = (offers, type) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase `Price: low to high`:\r\n\t\t\t\toffers.sort((a, b) => a.price - b.price);\r\n\t\t\t\tbreak;\r\n\t\t\tcase `Price: high to low`:\r\n\t\t\t\toffers.sort((a, b) => b.price - a.price);\r\n\t\t\t\tbreak;\r\n\t\t\tcase `Top rated first`:\r\n\t\t\t\toffers.sort((a, b) => b.rating - a.rating);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: return offers;\r\n\t\t}\r\n\t\treturn offers;\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\r\n\t\tconst {isAuthorizationRequired, toggleBookmark} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\t\t\twindow.location.assign(BASE_PATHNAME + BASE_HASH + APP_ROUTE.LOGIN);\r\n\t\t} else{\r\n\t\t\ttoggleBookmark(offer);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, city, cityOffers, currentUser, isAuthorizationRequired, reload, favoriteList, sortingType, setSortingType} = this.props;\r\n\t\tconst index = getIndex(hotels, city);\r\n\t\tconst cityCoord = hotels[index].coords;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--main\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={reload}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className={cityOffers.length ? 'page__main page__main--index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t : 'page__main page__main--index page__main--index-empty'}>\r\n\r\n\t\t\t\t\t<CitiesList items={hotels}\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCityClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"cities\">\r\n\r\n\t\t\t\t\t\t{cityOffers.length ?\r\n\t\t\t\t\t\t\t<div className=\"cities__places-container container\">\r\n\t\t\t\t\t\t\t\t<section className=\"cities__places places\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"visually-hidden\">Places</h2>\r\n\t\t\t\t\t\t\t\t\t<b className=\"places__found\">{cityOffers.length} places to stay in {city}</b>\r\n\r\n\t\t\t\t\t\t\t\t\t<SortingType\r\n\t\t\t\t\t\t\t\t\t\tkey={city}\r\n\t\t\t\t\t\t\t\t\t\tsortingType={sortingType}\r\n\t\t\t\t\t\t\t\t\t\tonChangeOption={(type) => setSortingType(type)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"cities__places-list places__list tabs__content\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<CardList\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\titems={this.handleSortOffers([...cityOffers], sortingType)}\r\n\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCardClick}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<div className=\"cities__right-section\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"cities_map map\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\t\t\t\titems={cityOffers}\r\n\t\t\t\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t: <CitiesNoPlaces city={city}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMain.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tonCityClick: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tsortingType: state.sortingType,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\ttoggleBookmark: (cityOffer) => dispatch(Operation.toggleFavoriteList(cityOffer)),\r\n\tsetSortingType: (type) => dispatch(ActionCreator.setSortingType(type)),\r\n});\r\n\r\nexport {Main}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CardList from '../card-list/card-list';\r\n\r\nconst NeighbourhoodList = (props) => {\r\n\r\n\tconst {items, city, favoriteList} = props;\r\n\r\n\tconst handleClick = (item) => props.onClick(item);\r\n\tconst handleMouseOver = (item) => props.onMouseOver(item);\r\n\tconst handleMouseLeave = (e) => props.onMouseLeave(e);\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n\treturn <CardList\r\n\t\tcity={city}\r\n\t\titems={items}\r\n\t\tfavoriteList={favoriteList}\r\n\t\tonClick={handleClick}\r\n\t\tonMouseOver={handleMouseOver}\r\n\t\tonMouseLeave={handleMouseLeave}\r\n\t\tonBookmarkClick={handleBookmarkClick}\r\n\t/>\r\n};\r\n\r\nNeighbourhoodList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func.isRequired,\r\n\tonMouseLeave: PropTypes.func.isRequired\r\n};\r\n\r\nexport default NeighbourhoodList;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nconst ErrorPage = () => {\r\n\r\n  return (\r\n    <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n      <div className=\"page__favorites-container container\">\r\n        <section className=\"favorites favorites--empty\">\r\n          <h1 className=\"visually-hidden\">404 error</h1>\r\n          <div className=\"favorites__status-wrapper\">\r\n            <b className=\"favorites__status\">404 error</b>\r\n            <p className=\"favorites__status-description\">\r\n\t\t\t\t\t\t\tPage not found. Go to the <Link to={APP_ROUTE.ROOT}><span style={{textDecoration: 'underline'}}>main</span></Link> page\r\n            </p>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './property-gallery.css';\r\n\r\nconst PropertyGallery = (props) => {\r\n\r\n  const {images, title} = props;\r\n\r\n  return (\r\n    <div className=\"property__gallery-container container\">\r\n      <div className=\"property__gallery\">\r\n\r\n        {images.map((img, i) =>\r\n          (\r\n            <div className=\"property__image-wrapper\" key={title + i}>\r\n              <img className=\"property__image\" src={img} alt={`studio${i}`}/>\r\n            </div>\r\n          )\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPropertyGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default PropertyGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyFeatures = (props) => {\r\n\r\n\tconst {offer} = props;\r\n\r\n\treturn (\r\n\t\t<ul className=\"property__features\">\r\n\t\t\t<li className=\"property__feature property__feature--entire\">\r\n\t\t\t\tEntire place\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--bedrooms\">\r\n\t\t\t\t{offer.bedrooms} Bedrooms\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--adults\">\r\n\t\t\t\tMax {offer.max_adults} adults\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nPropertyFeatures.propTypes = {\r\n\toffer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyFeatures;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyInside = (props) => {\r\n\r\n\tconst {goods} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__inside\">\r\n\t\t\t<h2 className=\"property__inside-title\">What&apos;s inside</h2>\r\n\t\t\t<ul className=\"property__inside-list\">\r\n\r\n\t\t\t\t{ goods.map((good) =>\r\n\t\t\t\t\t<li className=\"property__inside-item\" key={good}>\r\n\t\t\t\t\t\t{good}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyInside.propTypes = {\r\n\tgoods: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default PropertyInside;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {BASE_PATHNAME} from '../../const';\r\n\r\nconst PropertyHost = (props) => {\r\n\r\n  const {offer} = props;\r\n\r\n  return (\r\n    <div className=\"property__host\">\r\n      <h2 className=\"property__host-title\">Meet the host</h2>\r\n      <div className=\"property__host-user user\">\r\n        <div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\r\n          <img className=\"property__avatar user__avatar\" src={BASE_PATHNAME + `/` + offer.host.avatar_url} width=\"74\" height=\"74\" alt=\"Host avatar\"/>\r\n        </div>\r\n        <span className=\"property__user-name\">{offer.host.name}</span>\r\n        <span className=\"property__user-status\">{offer.host.is_pro ? `Pro` : ``}</span>\r\n      </div>\r\n      <div className=\"property__description\">\r\n        <p className=\"property__text\">{offer.description}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPropertyHost.propTypes = {\r\n  offer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyHost;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport Map from '../map/map';\r\nimport NeghbourhoodList from '../neighbourhood-list/neughbourhood-list';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Header from '../header/header';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport Mark from '../mark/mark';\r\nimport PropertyGallery from '../property-gallery/property-gallery';\r\nimport Rating from '../rating/rating';\r\nimport PropertyFeatures from '../property-features/property-features';\r\nimport PropertyInside from '../property-inside/property-inside';\r\nimport Price from '../price/price';\r\nimport PropertyHost from '../property-host/property-host';\r\n\r\nimport {getCityCoord, getCityOffer, getCityOffers, getNhoods} from '../../helpers/helpers';\r\nimport {BASE_PATHNAME, APP_ROUTE, NUMBER_NEIBOURHOODS, BASE_HASH} from '../../const';\r\n\r\nclass OfferProperty extends React.PureComponent{\r\n\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffer: this.props.cityOffer\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.title = `${this.props.cityOffer.city} - ${this.props.cityOffer.title}`;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif(prevProps.cityOffer !== this.props.cityOffer) {\r\n\t\t\twindow.scrollTo(0,0);\r\n\t\t\tdocument.title = `${this.props.cityOffer.city} - ${this.props.cityOffer.title}`;\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick = (item) => this.setState({offer: item}, () => this.props.onClick(item));\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\tisFavorite = () => {\r\n\t\tconst {cityOffer, favoriteList} = this.props;\r\n\t\tif (!favoriteList.length) return false;\r\n\r\n\t\treturn favoriteList.findIndex((item) => item.hotelId === cityOffer.hotelId) >= 0;\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\t\tconst {isAuthorizationRequired, cityOffer, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\t\t\twindow.location.assign(BASE_PATHNAME + BASE_HASH + APP_ROUTE.LOGIN);\r\n\t\t} else{\r\n\t\t\tif (small) {\r\n\t\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t\t} else {\r\n\t\t\t\ttoggleBookmark(cityOffer, favoriteList);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\t\tconst {hotels, cityOffers, city, currentUser, isAuthorizationRequired, favoriteList} = this.props;\r\n\t\tconst {offer} = this.state;\r\n\r\n\t\tif (!this.props.cityOffer) return <ErrorPage/>;\r\n\t\tif (!offer) return <ErrorPage/>;\r\n\r\n\t\tconst neighbourhoods = getNhoods(offer, cityOffers, NUMBER_NEIBOURHOODS);\r\n\t\tconst cityCoord = getCityCoord(hotels, city);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--property\">\r\n\t\t\t\t\t<section className=\"property\">\r\n\r\n\t\t\t\t\t\t<PropertyGallery\r\n\t\t\t\t\t\t\ttitle={offer.title}\r\n\t\t\t\t\t\t\timages={offer.images}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"property__container container\">\r\n\t\t\t\t\t\t\t<div className=\"property__wrapper\">\r\n\r\n\t\t\t\t\t\t\t\t<Mark\r\n\t\t\t\t\t\t\t\t\tisPremium={offer.is_premium}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"property__name-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"property__name\">\r\n\t\t\t\t\t\t\t\t\t\t{offer.title}\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\t\t\t\t\tisActive={this.isFavorite()}\r\n\t\t\t\t\t\t\t\t\t\tonBookmarkClick={(small) => this.handleBookmarkClick(offer, small)}\r\n\t\t\t\t\t\t\t\t\t\tsmall={false}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\trating={offer.rating}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyFeatures\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Price\r\n\t\t\t\t\t\t\t\t\tprice={offer.price}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyInside\r\n\t\t\t\t\t\t\t\t\tgoods={offer.goods}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyHost\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section className=\"property_map map\" style={{height: 579 + 'px', marginBottom: 50 + 'px'}}>\r\n\r\n\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<section className=\"near-places places\">\r\n\t\t\t\t\t\t\t<h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\r\n\t\t\t\t\t\t\t<div className=\"near-places__list places__list\">\r\n\r\n\t\t\t\t\t\t\t\t<NeghbourhoodList\r\n\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOfferProperty.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffer: PropTypes.object.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst {id} = ownProps.match.params;\r\n\tif (!getCityOffer(state, id)) return Object.assign({}, ownProps, {cityOffer: ''});\r\n\r\n\treturn Object.assign({}, ownProps, {\r\n\t\tid,\r\n\t\tcity: getCityOffer(state, id).city,\r\n\t\thotels: state.hotels,\r\n\t\tcityOffer: getCityOffer(state, id),\r\n\t\tcityOffers: getCityOffers(state, id),\r\n\t\tfavoriteList: state.favoriteList,\r\n\t\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\tcurrentUser: state.currentUser,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\ttoggleBookmark: (cityOffer) => dispatch(Operation.toggleFavoriteList(cityOffer)),\r\n});\r\n\r\nexport {OfferProperty}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferProperty);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {APP_ROUTE, LOCATION_BUTTON_CLASS} from '../../const';\r\n\r\nconst LocationButton = (props) => {\r\n\r\n  const {city, onFavoriteCityClick, prefix} = props;\r\n  const handleFavotiteCityClick = () => onFavoriteCityClick(city);\r\n\r\n  return (\r\n    <div className={LOCATION_BUTTON_CLASS[prefix.toUpperCase()]}>\r\n      <div className=\"locations__item\">\r\n        <Link to={APP_ROUTE.ROOT} className=\"locations__item-link buttonLink\"\r\n          onClick={handleFavotiteCityClick}\r\n        >\r\n          <span>{city}</span>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nLocationButton.propTypes = {\r\n  city: PropTypes.string.isRequired,\r\n  onFavoriteCityClick: PropTypes.func.isRequired,\r\n  prefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LocationButton;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Header from \"../header/header\";\r\nimport LocationButton from \"../location-button/location-button\";\r\nimport { getRandomInt, getInputClassName } from \"../../helpers/helpers\";\r\nimport {BASE_PATHNAME, APP_ROUTE, BASE_HASH} from \"../../const\";\r\nimport \"./sign-in.css\";\r\n\r\nclass SignIn extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      city: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      emailValid: false,\r\n      passwordValid: false,\r\n      formValid: false,\r\n    };\r\n  }\r\n  \r\n\r\n  componentDidMount() {\r\n    const { hotels } = this.props;\r\n\r\n    document.title = `6 cities - sign in`;\r\n\r\n    this.setState(() => ({\r\n      city: hotels[getRandomInt(hotels.length)].city,\r\n    }));\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.currentUser !== this.props.currentUser) {\r\n\t    window.location.assign(BASE_PATHNAME + BASE_HASH + APP_ROUTE.ROOT);\r\n    }\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    const { onSubmit } = this.props;\r\n\r\n    e.preventDefault();\r\n\r\n    onSubmit({\r\n      email: this.state.email,\r\n      password: this.state.password,\r\n    });\r\n  };\r\n\r\n  validateField = (name, value) => {\r\n    let emailValid = this.state.emailValid;\r\n    let passwordValid = this.state.passwordValid;\r\n    const minPassLength = 6;\r\n    const maxPassLength = 12;\r\n\r\n    switch (name) {\r\n      case `email`:\r\n        emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\r\n        break;\r\n\r\n      case `password`:\r\n        passwordValid =\r\n          value.length >= minPassLength && value.length <= maxPassLength;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        emailValid,\r\n        passwordValid,\r\n      },\r\n      this.validateForm\r\n    );\r\n  };\r\n\r\n  validateForm = () => {\r\n    this.setState({\r\n      formValid: this.state.emailValid && this.state.passwordValid,\r\n    });\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    this.setState({ [name]: value }, () => {\r\n      this.validateField(name, value);\r\n    });\r\n  };\r\n\r\n  handleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n  render() {\r\n    const { hotels, isAuthRequired, currentUser } = this.props;\r\n\r\n    return (\r\n      <div className=\"page page--gray page--login\">\r\n        <Header\r\n          isAuthorizationRequired={isAuthRequired}\r\n          currentUser={currentUser}\r\n          onLogoClick={() => this.handleCityClick(hotels[0].city)}\r\n        />\r\n\r\n        <main className=\"page__main page__main--login\">\r\n          <div className=\"page__login-container container\">\r\n            <section className=\"login\">\r\n              <h1 className=\"login__title\">Sign in</h1>\r\n              <form\r\n                className=\"login__form form\"\r\n                action=\"#\"\r\n                method=\"post\"\r\n                onSubmit={this.handleSubmit}\r\n              >\r\n                <div className=\"login__input-wrapper form__input-wrapper\">\r\n                  <label className=\"visually-hidden\">E-mail</label>\r\n                  <input\r\n                    className={`login__input form__input ${getInputClassName(\r\n                      this.state.email,\r\n                      this.state.emailValid\r\n                    )}`}\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required=\"\"\r\n                    value={this.state.email}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"login__input-wrapper form__input-wrapper\">\r\n                  <label className=\"visually-hidden\">Password</label>\r\n                  <input\r\n                    className={`login__input form__input ${getInputClassName(\r\n                      this.state.password,\r\n                      this.state.passwordValid\r\n                    )}`}\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Password\"\r\n                    required=\"\"\r\n                    value={this.state.password}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <button\r\n                  className=\"login__submit form__submit button\"\r\n                  type=\"submit\"\r\n                  disabled={!this.state.formValid}\r\n                >\r\n                  Sign in\r\n                </button>\r\n              </form>\r\n            </section>\r\n\r\n            <LocationButton\r\n              city={this.state.city}\r\n              onFavoriteCityClick={this.handleCityClick}\r\n              prefix=\"login\"\r\n            />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSignIn.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  onSubmit: PropTypes.func.isRequired,\r\n  onCityClick: PropTypes.func.isRequired,\r\n  currentUser: PropTypes.object.isRequired,\r\n  isAuthRequired: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default SignIn;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport Rating from '../rating/rating';\r\nimport Mark from '../mark/mark';\r\nimport Price from '../price/price';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\n\r\nconst FavoriteCard = (props) => {\r\n\r\n  const {item} = props;\r\n\r\n  const handleBookmarkClick = () => props.onBookmarkClick(props.item);\r\n\r\n  return (\r\n    <article className=\"favorites__card place-card\">\r\n\r\n      <Mark\r\n        isPremium={item.is_premium}\r\n        prefix=\"place-card\"\r\n      />\r\n\r\n      <div className=\"favorites__image-wrapper place-card__image-wrapper\">\r\n        <Link to={`/offer/` + item.hotelId} className=\"buttonLink\">\r\n          <img className=\"place-card__image\" src={item.preview_image} width=\"150\" height=\"110\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"favorites__card-info place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n\r\n          <Price\r\n            price={item.price}\r\n            prefix=\"place-card\"\r\n          />\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={handleBookmarkClick}\r\n            isActive={true}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n\r\n        <Rating\r\n          rating={item.rating}\r\n          prefix=\"place-card\"\r\n        />\r\n\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={`/offer/` + item.hotelId} className=\"card__title buttonLink\">{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nFavoriteCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onBookmarkClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FavoriteCard;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LocationButton from '../location-button/location-button';\r\nimport FavoriteCard from '../favorite-card/favorite-card';\r\n\r\nconst FavoritesList = (props) => {\r\n\r\n\tconst {favoriteList, onBookmarkClick, onFavoriteCityClick} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => onBookmarkClick(item);\r\n\r\n\tconst handleFavoriteCityClick = (city) => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<ul className=\"favorites__list\">\r\n\r\n\t\t\t{favoriteList.map((cityObj, ind) => {\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li className=\"favorites__locations-items\" key={cityObj.city + ind}>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={cityObj.city}\r\n\t\t\t\t\t\t\tkey={cityObj.city + ind}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\tprefix=\"favorites\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"favorites__places\">\r\n\r\n\t\t\t\t\t\t\t{cityObj.favorites.map((hotel) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<FavoriteCard\r\n\t\t\t\t\t\t\t\t\t\t\titem={hotel}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={hotel.hotelId}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nFavoritesList.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tonBookmarkClick: PropTypes.func.isRequired,\r\n\tonFavoriteCityClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FavoritesList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport FavoritesList from '../favorites-list/favorites-list';\r\nimport Header from '../header/header';\r\nimport {BASE_PATHNAME, APP_ROUTE} from '../../const';\r\nimport {formatFavoriteList} from '../../helpers/helpers.js';\r\n\r\nconst Favorites = (props) => {\r\n\r\n  const {favoriteList, toggleBookmark, cityClick, isAuthRequired, currentUser} = props;\r\n\r\n  const handleBookmarkClick = (item) => toggleBookmark(item);\r\n\r\n  const handleFavoriteCityClick = (city) => cityClick(city);\r\n\r\n  document.title = `6 cities - favorites`;\r\n\r\n  return (\r\n    <div className={`page ${!favoriteList.length ? `page--favorites-empty` : ``}`}>\r\n\r\n      <Header\r\n        isAuthorizationRequired={isAuthRequired}\r\n        currentUser={currentUser}\r\n      />\r\n\r\n      {favoriteList.length\r\n        ? <main className=\"page__main page__main--favorites\">\r\n          <div className=\"page__favorites-container container\">\r\n            <section className=\"favorites\">\r\n              <h1 className=\"favorites__title\">Saved listing</h1>\r\n\r\n              <FavoritesList\r\n                favoriteList={formatFavoriteList(favoriteList)}\r\n                onBookmarkClick={handleBookmarkClick}\r\n                onFavoriteCityClick={handleFavoriteCityClick}\r\n              />\r\n\r\n            </section>\r\n          </div>\r\n        </main>\r\n        : <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n          <div className=\"page__favorites-container container\">\r\n            <section className=\"favorites favorites--empty\">\r\n              <h1 className=\"visually-hidden\">Favorites (empty)</h1>\r\n              <div className=\"favorites__status-wrapper\">\r\n                <b className=\"favorites__status\">Nothing yet saved.</b>\r\n                <p className=\"favorites__status-description\">Save properties to narrow down search or plan yor future\r\n\t\t\t\t\t\t\t\t\ttrips.</p>\r\n              </div>\r\n            </section>\r\n          </div>\r\n        </main>\r\n      }\r\n      <footer className=\"footer\">\r\n        <Link to={APP_ROUTE.ROOT} className=\"footer__logo-link\">\r\n          <img className=\"footer__logo\" src={BASE_PATHNAME + `/img/logo.svg`} alt=\"6 cities logo\" width=\"64\" height=\"33\"/>\r\n        </Link>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nFavorites.propTypes = {\r\n  favoriteList: PropTypes.array.isRequired,\r\n  isAuthRequired: PropTypes.bool,\r\n  currentUser: PropTypes.object,\r\n  toggleBookmark: PropTypes.func,\r\n  cityClick: PropTypes.func,\r\n\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n  return Object.assign({}, ownProps, {});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n  cityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n  toggleBookmark: (cityOffer) => dispatch(Operation.toggleFavoriteList(cityOffer)),\r\n});\r\n\r\nexport {Favorites};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites);\r\n","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\r\n\treturn (\r\n\t\t<div id=\"preloader\">\r\n\t\t\t<div id=\"loader\"/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nconst PrivateRoute = ({component: Component, isAuthRequired, ...rest}) => (\r\n\t<Route {...rest} render={(props) => (\r\n\t\tisAuthRequired === false\r\n\t\t\t? <Component {...rest} {...props}/>\r\n\t\t\t: <Redirect to='/'/>\r\n\t)}/>\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\nimport { ActionCreator, Operation } from \"../../reducer\";\r\nimport { getIndex } from \"../../helpers/helpers\";\r\nimport { APP_ROUTE } from \"../../const\";\r\n\r\nimport Main from \"../main/main\";\r\nimport OfferProperty from \"../offer-property/offer-property\";\r\nimport SignIn from \"../sign-in/sign-in\";\r\nimport Favorites from \"../favorites/favorites\";\r\nimport Loader from \"../loader/loader\";\r\nimport ErrorPage from \"../error-page/error-page\";\r\nimport PrivateRoute from \"../private-route/private-route\";\r\n\r\nclass App extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      activeOfferId: {},\r\n      isHotelsLoaded: false,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.hotels !== this.props.hotels) {\r\n      this.setState({ isHotelsLoaded: true });\r\n    }\r\n  }\r\n\r\n  handleReload = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        isHotelsLoaded: !prevState.isHotelsLoaded,\r\n      }),\r\n      () => window.location.reload()\r\n    );\r\n  };\r\n\r\n  handleOfferClick = (item) => {\r\n    return this.setState({ activeOfferId: item.id });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      hotels,\r\n      city,\r\n      currentUser,\r\n      isAuthorizationRequired,\r\n      favoriteList,\r\n      cityClick,\r\n      login,\r\n    } = this.props;\r\n\r\n    return this.state.isHotelsLoaded && city ? (\r\n      <Switch>\r\n        <Route exact path={APP_ROUTE.ROOT}>\r\n          <Main\r\n            {...this.props}\r\n            cityOffers={hotels[getIndex(hotels, city)].offers || []}\r\n            onClick={this.handleOfferClick}\r\n            onCityClick={cityClick}\r\n            reload={this.handleReload}\r\n          />\r\n        </Route>\r\n        <Route exact path={APP_ROUTE.LOGIN}>\r\n          <SignIn\r\n            hotels={hotels}\r\n            onSubmit={login}\r\n            onCityClick={cityClick}\r\n            currentUser={currentUser}\r\n            isAuthRequired={isAuthorizationRequired}\r\n          />\r\n        </Route>\r\n        <PrivateRoute\r\n          exact\r\n          path={APP_ROUTE.FAVORITES}\r\n          component={Favorites}\r\n          isAuthRequired={isAuthorizationRequired}\r\n          favoriteList={favoriteList}\r\n          currentUser={currentUser}\r\n        />\r\n        <Route\r\n          path={APP_ROUTE.OFFER}\r\n          render={(props) => <OfferProperty {...props} />}\r\n        ></Route>\r\n        <Route path={APP_ROUTE.ERROR} component={ErrorPage} />\r\n      </Switch>\r\n    ) : (\r\n      <Loader />\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  city: PropTypes.string.isRequired,\r\n  cityClick: PropTypes.func.isRequired,\r\n  isAuthorizationRequires: PropTypes.bool,\r\n  currentUser: PropTypes.object,\r\n  login: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) =>\r\n  Object.assign({}, ownProps, {\r\n    city: state.city,\r\n    hotels: state.hotels,\r\n    currentOffer: state.currentOffer,\r\n    favoriteList: state.favoriteList,\r\n    isAuthorizationRequired: state.isAuthorizationRequired,\r\n    currentUser: state.currentUser,\r\n  });\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  cityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n  onClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n  login: (authData) => dispatch(Operation.login(authData)),\r\n  getCurrentUserData: (uid) => dispatch(Operation.downloadCurrentUserData(uid)),\r\n});\r\n\r\nexport { App };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import {createStore, applyMiddleware} from \"redux\";\r\nimport {Provider} from \"react-redux\";\r\nimport React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport thunk from \"redux-thunk\";\r\n// import { compose } from \"recompose\";\r\nimport {Router} from \"react-router-dom\";\r\nimport history from \"./history\";\r\n\r\nimport App from \"./components/app/app\";\r\nimport {reducer, Operation} from \"./reducer\";\r\n\r\nconst init = () => {\r\n  const store = createStore(\r\n      reducer,\r\n      applyMiddleware(thunk)\r\n      // compose(\r\n      //   window.__REDUX_DEVTOOLS_EXTENSION__\r\n      //     ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n      //     : (f) => f\r\n      // )\r\n  );\r\n\r\n  store.dispatch(Operation.loadHotels());\r\n  store.dispatch(Operation.checkAuth());\r\n\r\n  ReactDom.render(\r\n      <Provider store={store}>\r\n        <Router history={history}>\r\n          <App />\r\n        </Router>\r\n      </Provider>,\r\n      document.getElementById(`root`)\r\n  );\r\n};\r\n\r\ninit();\r\n"],"sourceRoot":""}