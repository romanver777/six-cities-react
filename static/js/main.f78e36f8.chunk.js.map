{"version":3,"sources":["history.js","reducer.js","const.js","helpers/helpers.js","components/sorting-type/sorting-type.jsx","components/bookmark-button/bookmark-button.jsx","components/mark/mark.jsx","components/rating/rating.jsx","components/price/price.jsx","components/card/card.jsx","components/card-list/card-list.jsx","components/cities-list/cities-list.jsx","components/cities-no-places/cities-no-places.jsx","components/map/map.jsx","components/header/header.jsx","components/main/main.jsx","components/review/review.jsx","components/review-list/review-list.jsx","components/neighbourhood-list/neughbourhood-list.jsx","components/form-comments/form-comments.jsx","components/error-page/error-page.jsx","components/property-gallery/property-gallery.jsx","components/property-features/property-features.jsx","components/property-inside/property-inside.jsx","components/property-host/property-host.jsx","components/offer-property/offer-property.jsx","components/location-button/location-button.jsx","components/sign-in/sign-in.jsx","components/favorite-card/favorite-card.jsx","components/favorites-list/favorites-list.jsx","components/favorites/favorites.jsx","components/loader/loader.jsx","components/private-route/private-route.jsx","components/app/app.jsx","api.js","index.js"],"names":["history","createBrowserHistory","initialState","city","hotels","currentOffer","favoriteList","isAuthorizationRequired","currentUser","reviews","getFilteredLocalList","key","responseEmail","filtered","favoritesLocal","JSON","parse","localStorage","getItem","filter","it","email","ActionType","ActionCreator","type","payload","status","dataUser","offer","offerInd","length","findIndex","item","hotelId","getFavoriteIndexFromList","reducer","state","action","Object","assign","list","splice","Operation","dispatch","getState","api","get","then","response","data","authData","post","window","back","catch","id","APP_ROUTE","LOGIN","ROOT","OFFER","FAVORITES","ERROR","BASE_PATHNAME","LOCATION_BUTTON_CLASS","INPUT_LOGIN_CLASS","getIndex","items","i","toLowerCase","getActiveIconParams","width","height","iconUrl","iconSize","getIconParams","getAllOffers","arr","forEach","offers","push","getCityOffer","getCityOffers","setLS","name","setItem","stringify","getInputClassName","inputValue","inputValid","SortingType","props","handleClickToggle","setState","prevState","isOpen","handleClick","e","onChangeOption","document","querySelector","classList","remove","option","target","innerHTML","add","className","method","tabIndex","onClick","this","xlinkHref","React","PureComponent","propType","PropTypes","func","isRequired","size","prefix","BookmarkButton","onBookmarkClick","isActive","small","buttonClassActive","style","fill","stroke","Mark","isPremium","Rating","rating","currentRatingPersent","Price","price","Card","isFavorite","onMouseOver","onMouseLeave","is_premium","to","src","preview_image","alt","handleBookmarkClick","title","CardList","handleMouseOver","handleMouseLeave","map","Component","CitiesList","Fragment","color","backgroundColor","CitiesNoPlaces","Map","_initMap","cityCoord","icon","leaflet","zoom","center","zoomControl","marker","setView","tileLayer","attribution","addTo","mark","markers","coords","_changeIconsOnHover","_latlng","lat","lng","setIcon","prevProps","offerHover","off","visibility","defaultValue","Header","onLogoClick","location","pathname","Main","hoverItem","handleCityClick","onCityClick","handleSortOffers","sort","a","b","toggleBookmark","console","log","reload","index","cityOffer","cityOffers","connect","ownProps","Review","review","reviewDate","Date","date","toLocaleDateString","month","year","user","avatar_url","comment","dateTime","ReviewList","NeighbourhoodList","FormComments","validateForm","disabled","isRatingValid","isReviewValid","validateField","value","handleChange","clearForm","reset","handleSubmit","preventDefault","onSubmit","htmlFor","onChange","placeholder","textarea","ErrorPage","textDecoration","PropertyGallery","images","img","PropertyFeatures","bedrooms","max_adults","PropertyInside","goods","good","PropertyHost","host","is_pro","description","OfferProperty","getReviews","scrollTo","neighbourhoods","number","from","latLng","distanceTo","prev","next","slice","getNhoods","getCityCoord","submitReviewForm","marginBottom","match","params","LocationButton","onFavoriteCityClick","toUpperCase","SignIn","password","emailValid","passwordValid","formValid","max","Math","floor","random","isAuthRequired","required","FavoriteCard","FavoritesList","handleFavoriteCityClick","cityObj","ind","favorites","hotel","formatFavoriteList","arrayOfObject","cities","Set","obj","favorite","cityClick","href","Loader","PrivateRoute","component","rest","render","App","handleReload","isHotelsLoaded","handleOfferClick","activeOfferId","userList","login","exact","path","Favorites","setFavorites","favoritesList","setCurrentUser","createAPI","onUnauthorized","axios","create","baseURL","timeout","withCredentials","interceptors","use","error","store","createStore","compose","applyMiddleware","thunk","withExtraArgument","__REDUX_DEVTOOLS_EXTENSION__","f","ReactDom","getElementById","init"],"mappings":"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","file":"static/js/main.f78e36f8.chunk.js","sourcesContent":["import {createBrowserHistory} from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","const initialState = {\r\n  city: ``,\r\n\thotels: [],\r\n\tcurrentOffer: {},\r\n\tfavoriteList: [],\r\n\tisAuthorizationRequired: true,\r\n\tcurrentUser: {},\r\n\treviews: [],\r\n};\r\n\r\nconst getFavoriteIndexFromList = (offer, favoriteList) => {\r\n\r\n\tif (!favoriteList.length) return -1;\r\n\r\n\treturn favoriteList.findIndex((item) => item.hotelId === offer.hotelId);\r\n};\r\n\r\nconst getFilteredLocalList = (key, responseEmail) => {\r\n\tlet filtered;\r\n\tlet favoritesLocal = JSON.parse(localStorage.getItem(key));\r\n\r\n\tif (favoritesLocal) {\r\n\t\tfiltered = favoritesLocal.filter((it) => it.currentUser.email === responseEmail);\r\n\t}\r\n\r\n\treturn filtered;\r\n};\r\n\r\nconst ActionType = {\r\n\tSET_CITY: `SET_CITY`,\r\n\tLOAD_HOTELS: `LOAD_HOTELS`,\r\n\tSET_CURRENT_OFFER: `SET_CURRENT_OFFER`,\r\n\tREQUIRE_AUTHORIZATION: `REQUIRE_AUTHORIZATION`,\r\n\tSET_CURRENT_USER: `SET_CURRENT_USER`,\r\n\tRELOAD_ALL: `RELOAD_ALL`,\r\n\tTOGGLE_FAVORITE: `TOGGLE_FAVORITE`,\r\n\tADD_FAVORITE: `ADD_FAVORITE`,\r\n\tREMOVE_FAVORITE: `REMOVE_FAVORITE`,\r\n\tSET_FAVORITES: `SET_FAVORITES`,\r\n\tSET_REVIEWS: `SET_REVIEWS`,\r\n};\r\n\r\nconst ActionCreator = {\r\n\r\n\tsetCity: (city) => ({\r\n\t\ttype: ActionType.SET_CITY,\r\n\t\tpayload: city,\r\n\t}),\r\n\r\n\tloadHotels: (hotels) => ({\r\n\t\ttype: ActionType.LOAD_HOTELS,\r\n\t\tpayload: hotels,\r\n\t}),\r\n\r\n\tsetCurrentOffer: (currentOffer) => ({\r\n\t\ttype: ActionType.SET_CURRENT_OFFER,\r\n\t\tpayload: currentOffer,\r\n\t}),\r\n\r\n\trequireAuthorization: (status) => ({\r\n\t\ttype: ActionType.REQUIRE_AUTHORIZATION,\r\n\t\tpayload: status,\r\n\t}),\r\n\r\n\tsetCurrentUser: (dataUser) => ({\r\n\t\ttype: ActionType.SET_CURRENT_USER,\r\n\t\tpayload: dataUser,\r\n\t}),\r\n\r\n\t// reloadAll: () => ({\r\n\t// \ttype: ActionType.RELOAD_ALL,\r\n\t// \tpayload: null,\r\n\t// }),\r\n\r\n\ttoggleFavorite: (offer, favoriteList) => {\r\n\r\n\t\tconst offerInd = getFavoriteIndexFromList(offer, favoriteList);\r\n\r\n\t\tif (offerInd < 0) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: `ADD_FAVORITE`,\r\n\t\t\t\tpayload: offer,\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttype: `REMOVE_FAVORITE`,\r\n\t\t\tpayload: offerInd,\r\n\t\t}\r\n\t},\r\n\r\n\tsetFavorites: (favoriteList) => ({\r\n\t\ttype: `SET_FAVORITES`,\r\n\t\tpayload: favoriteList,\r\n\t}),\r\n\r\n\tsetReviews: (reviews) => ({\r\n\t\ttype: `SET_REVIEWS`,\r\n\t\tpayload: reviews,\r\n\t}),\r\n};\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\r\n\tswitch (action.type) {\r\n\r\n\t\tcase ActionType.SET_CITY:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcity: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.LOAD_HOTELS:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\thotels: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_CURRENT_OFFER:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcurrentOffer: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.REQUIRE_AUTHORIZATION:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tisAuthorizationRequired: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_CURRENT_USER:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcurrentUser: action.payload,\r\n\t\t\t});\r\n\r\n\t\t// case ActionType.RELOAD_ALL:\r\n\t\t// \treturn Object.assign({}, state);\r\n\r\n\t\tcase ActionType.ADD_FAVORITE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: [...state.favoriteList, action.payload],\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.REMOVE_FAVORITE:\r\n\r\n\t\t\tlet list = [...state.favoriteList];\r\n\t\t\tlist.splice(action.payload, 1);\r\n\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: list,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_FAVORITES:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_REVIEWS:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\treviews: action.payload,\r\n\t\t\t});\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n};\r\n\r\nconst Operation = {\r\n\r\n\tloadHotels: () => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.get(`https://run.mocky.io/v3/c3ca7b37-068d-481a-a3f9-b4da256a5f3d`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tdispatch(ActionCreator.loadHotels(response.data));\r\n\t\t\t});\r\n\t},\r\n\r\n\t// reloadAll: () => (dispatch) => {\r\n\t//\r\n\t// \tdispatch(Operation.loadHotels())\r\n\t// \t\t.then(() => {\r\n\t// \t\t\tdispatch(ActionCreator.setCity('Paris'));\r\n\t// \t\t});\r\n\t//\r\n\t// \treturn null;\r\n\t// },\r\n\r\n\tcheckAuth: () => (dispatch, getState, api) => {\r\n\r\n\t\treturn api\r\n\t\t\t.get(`/login`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tdispatch(ActionCreator.setCurrentUser(response.data));\r\n\t\t\t\t\tdispatch(ActionCreator.requireAuthorization(false));\r\n\r\n\t\t\t\t\tconst filtered = getFilteredLocalList('favorites', response.data.email);\r\n\r\n\t\t\t\t\tif (filtered) dispatch(ActionCreator.setFavorites(filtered[0].favoriteList));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {});\r\n\t},\r\n\r\n\tlogin: (authData) => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.post(`/login`, authData)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tdispatch(ActionCreator.setCurrentUser(response.data));\r\n\t\t\t\t\tdispatch(ActionCreator.requireAuthorization(false));\r\n\r\n\t\t\t\t\tconst filtered = getFilteredLocalList('favorites', response.data.email);\r\n\r\n\t\t\t\t\tif (filtered) dispatch(ActionCreator.setFavorites(filtered[0].favoriteList));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => window.history.back())\r\n\t\t\t.catch(() => {});\r\n\t},\r\n\r\n\tgetReviews: (id) => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.get(`/comments/${id}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif(response.data) dispatch(ActionCreator.setReviews(response.data));\r\n\t\t\t})\r\n\t},\r\n\r\n};\r\nexport {\r\n\tActionCreator,\r\n\treducer,\r\n\tOperation,\r\n}\r\n","// export const BASE_URL = process.env.PUBLIC_URL;\r\nconst IS_PROD = true;\r\n\r\nexport const BASE_URL = ``;\r\nexport const BASE_PATHNAME = IS_PROD ? `/six-cities-react/` : ``;\r\n\r\nexport const APP_ROUTE = {\r\n\tLOGIN: BASE_URL + `/login`,\r\n\tROOT: BASE_URL + `/`,\r\n\tOFFER: BASE_URL + `/offer/:id`,\r\n\tFAVORITES: BASE_URL + `/favorites`,\r\n\tERROR: BASE_PATHNAME + `*`,\r\n};\r\n\r\nexport const ICON_SIZE = 30;\r\n\r\nexport const NUMBER_NEIBOURHOODS = 3;\r\n\r\nexport const LOCATION_BUTTON_CLASS = {\r\n\tFAVORITES: `favorites__locations locations locations--current`,\r\n\tLOGIN: `locations locations--login locations--current`,\r\n};\r\n\r\nexport const INPUT_LOGIN_CLASS = {\r\n\tERROR: `input_error`,\r\n\tVALID: `input_valid`,\r\n};\r\n","import {ICON_SIZE, BASE_URL, INPUT_LOGIN_CLASS} from '../const';\r\nimport leaflet from 'leaflet';\r\n\r\nexport const getIndex = (items, city) => {\r\n\r\n\tfor (let i = 0; i < items.length; i++) {\r\n\r\n\t\tif (items[i].city.toLowerCase() === city.toLowerCase()) return i;\r\n\t}\r\n};\r\n\r\nexport const getCityCoord = (hotels, city) => {\r\n\r\n\tconst index = getIndex(hotels, city);\r\n\r\n\treturn hotels[index].coords;\r\n};\r\n\r\nexport const getActiveIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n\ticonUrl: BASE_URL +`/img/pin-active.svg`,\r\n\ticonSize: [width, height]\r\n});\r\n\r\nexport const getIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n\ticonUrl: BASE_URL + `/img/pin.svg`,\r\n\ticonSize: [width, height]\r\n});\r\n\r\nexport const getAllOffers = (state) => {\r\n\tlet arr = [];\r\n\r\n\tstate.hotels.forEach((item) => {\r\n\t\tif (item.offers.length) {\r\n\r\n\t\t\tfor(const offer of item.offers) arr.push(offer);\r\n\t\t}\r\n\t});\r\n\r\n\treturn arr;\r\n};\r\n\r\nexport const getCityOffer = (state, id) => {\r\n\r\n\treturn getAllOffers(state).filter((it) => it.hotelId === +id)[0];\r\n};\r\n\r\nexport const getCityOffers = (state, id) => {\r\n\tconst city = getCityOffer(state, id).city;\r\n\r\n\treturn getAllOffers(state).filter((it) => it.city === city);\r\n};\r\n\r\nexport const getNhoods = (offer, items, number) => {\r\n\r\n\tlet arr = [];\r\n\tconst from = leaflet.latLng(offer.coords);\r\n\r\n\tarr.push({\r\n\t\toffer: offer,\r\n\t\tlength: 0\r\n\t});\r\n\r\n\tfor (const it of items) {\r\n\r\n\t\tif (it.id !== offer.id) {\r\n\r\n\t\t\tlet to = leaflet.latLng(it.coords);\r\n\r\n\t\t\tarr.push({\r\n\t\t\t\toffer: it,\r\n\t\t\t\tlength: from.distanceTo(to)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tarr = arr.sort((prev, next) => prev.length - next.length);\r\n\r\n\tfor (let i = 0; i < arr.length; i++) {\r\n\t\tarr[i] = arr[i].offer;\r\n\t}\r\n\r\n\treturn arr.slice(1, number + 1);\r\n};\r\n\r\nexport const getLS = (name) => {\r\n\treturn JSON.parse(localStorage.getItem(name));\r\n};\r\n\r\nexport const setLS = (name, arr) => {\r\n\treturn localStorage.setItem(name, JSON.stringify(arr));\r\n};\r\n\r\nexport const getRandomInt = (max) => {\r\n\r\n\treturn Math.floor(Math.random() * Math.floor(max));\r\n};\r\n\r\nexport const \tgetInputClassName = (inputValue, inputValid) => {\r\n\r\n\tif (inputValid) return INPUT_LOGIN_CLASS.VALID;\r\n\r\n\tif (inputValue.length > 0) return INPUT_LOGIN_CLASS.ERROR;\r\n\r\n\treturn '';\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SortingType extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisOpen: false,\r\n\t\t\toption: `Popular`,\r\n\t\t}\r\n\t}\r\n\r\n\thandleClickToggle = () => {\r\n\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisOpen: !prevState.isOpen,\r\n\t\t}));\r\n\t};\r\n\r\n\thandleClick = (e) => {\r\n\r\n\t\tconst {onChangeOption} = this.props;\r\n\r\n\t\tdocument.querySelector('.places__option--active').classList.remove('places__option--active');\r\n\r\n\t\tthis.handleClickToggle();\r\n\t\tthis.setState({option: e.target.innerHTML});\r\n\r\n\t\te.target.classList.add('places__option--active');\r\n\r\n\t\tonChangeOption(e.target.innerHTML);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"places__sorting\" action=\"#\" method=\"get\">\r\n\t\t\t\t<span className=\"places__sorting-caption\">Sort by</span>\r\n\t\t\t\t<span className=\"places__sorting-type\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClickToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.state.option}\r\n\t\t\t\t\t<svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\r\n\t\t\t\t\t\t<use xlinkHref=\"#icon-arrow-select\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t\t<ul className={this.state.isOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t? `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t \t\t\t\t\t\t\t\t\tplaces__options--opened`\r\n\t\t\t\t\t\t\t\t\t\t\t\t: `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--closed`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<li className=\"places__option places__option--active\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPopular\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: low to high\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: high to low\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTop rated first\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSortingType.propType = {\r\n\tonChangeOption: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SortingType;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst size = {\r\n\tdefault: {\r\n\t\tprefix: `property`,\r\n\t\twidth: 31,\r\n\t\theight: 33,\r\n\t},\r\n\tsmall: {\r\n\t\tprefix: `place-card`,\r\n\t\twidth: 18,\r\n\t\theight: 19,\r\n\t}\r\n};\r\n\r\nconst BookmarkButton = (props) => {\r\n\r\n\tconst {onBookmarkClick, isActive, small} = props;\r\n\r\n\tconst prefix = small ? size.small.prefix : size.default.prefix;\r\n\tconst buttonClassActive = isActive ? `${prefix}__bookmark-button--active` : ``;\r\n\r\n\treturn (\r\n\t\t<button className={`${prefix}__bookmark-button ${buttonClassActive} button`}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={() => onBookmarkClick(small)}\r\n\t\t>\r\n\t\t\t<svg className={`${prefix}__bookmark-icon`}\r\n\r\n\t\t\t\t\t width={small ? size.small.width : size.default.width}\r\n\t\t\t\t\t height={small ? size.small.height : size.default.height}\r\n\t\t\t\t\t style={isActive ? {fill: `#4481c3`, stroke: `#4481c3`} : {fill: `none`,\r\n\t\t\t\t\t\t\t stroke: `#b8b8b8`}}\r\n\t\t\t>\r\n\t\t\t\t<use xlinkHref=\"#icon-bookmark\"/>\r\n\t\t\t</svg>\r\n\t\t\t<span className=\"visually-hidden\">To bookmarks</span>\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nBookmarkButton.propTypes = {\r\n\tisActive: PropTypes.bool,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default BookmarkButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Mark = (props) => {\r\n\r\n\tconst {isPremium, prefix} = props;\r\n\r\n\treturn isPremium ?\r\n\t\t<div className={`${prefix}__mark`}>\r\n\t\t\t<span>Premium</span>\r\n\t\t</div>\r\n\t\t: '';\r\n};\r\n\r\nMark.propTypes = {\r\n\tisPremium: PropTypes.bool.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Mark;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Rating = (props) => {\r\n\r\n\tconst {rating, prefix} = props;\r\n\r\n\tconst maxRatingPersent = 100;\r\n\tconst maxStars = 5;\r\n\tconst currentRatingPersent = rating * maxRatingPersent / maxStars;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__rating rating`}>\r\n\t\t\t<div className={`${prefix}__stars rating__stars`}>\r\n\t\t\t\t<span style={{width: currentRatingPersent + '%'}}/>\r\n\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t</div>\r\n\t\t\t{prefix === `property`\r\n\t\t\t\t? <span className={`${prefix}__rating-value rating__value`}>{rating}</span>\r\n\t\t\t\t: ``\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nRating.propTypes = {\r\n\trating: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Rating;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Price = (props) => {\r\n\r\n\tconst {price, prefix} = props;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__price`}>\r\n\t\t\t<b className={`${prefix}__price-value`}>&euro;{price}</b>\r\n\t\t\t<span className={`${prefix}__price-text`}>\r\n\t\t\t\t{prefix === `place-card` ? `/` : ``}&nbsp;night\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPrice.propTypes = {\r\n\tprice: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Price;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Mark from '../mark/mark';\r\nimport {BASE_URL} from '../../const';\r\nimport Rating from '../rating/rating';\r\nimport Price from '../price/price';\r\n\r\nconst Card = (props) => {\r\n\r\n  const {item, isFavorite} = props;\r\n\r\n\tconst handleClick = (e) => props.onClick(e);\r\n\tconst handleMouseOver = (e) => props.onMouseOver(e);\r\n\tconst handleMouseLeave = () => props.onMouseLeave();\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n  return (\r\n    <article className=\"cities__place-card place-card\"\r\n             id={item.id}\r\n             onMouseOver={() => handleMouseOver(item)}\r\n             onMouseLeave={handleMouseLeave}\r\n    >\r\n\r\n      <Mark\r\n        isPremium={item.is_premium}\r\n        prefix=\"place-card\"\r\n      />\r\n\r\n      <div className=\"cities__image-wrapper place-card__image-wrapper\">\r\n        <Link to={BASE_URL + `/offer/` + item.hotelId}\r\n              className=\"buttonLink\"\r\n              onClick={() => handleClick(item)}\r\n        >\r\n          <img className=\"place-card__image\" src={item.preview_image} width=\"260\" height=\"200\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n\r\n          <Price\r\n            price={item.price}\r\n            prefix=\"place-card\"\r\n          />\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={(small) => handleBookmarkClick(item, small)}\r\n            isActive={isFavorite}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n\r\n        <Rating\r\n          rating={item.rating}\r\n          prefix=\"place-card\"\r\n        />\r\n\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={BASE_URL + `/offer/${item.hotelId}`}\r\n                className=\"card__title buttonLink\"\r\n                onClick={() => handleClick(item)}\r\n          >{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onClick: PropTypes.func,\r\n  onMouseOver: PropTypes.func,\r\n  onMouseLeave: PropTypes.func,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Card from '../card/card';\r\n\r\nclass CardList extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst {items} = this.props.items;\r\n\r\n\t\tthis.state = {\r\n\t\t\titems: items,\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\thandleMouseOver = (item) => this.props.onMouseOver(item);\r\n\thandleMouseLeave = (e) => this.props.onMouseLeave(e);\r\n\thandleBookmarkClick = (offer, small) => this.props.onBookmarkClick(offer, small);\r\n\r\n\tisFavorite = (favoriteList, item) => {\r\n\r\n\t\tif (favoriteList) {\r\n\t\t\tlet isFavorite = favoriteList.filter((it) => it.hotelId === item.hotelId);\r\n\r\n\t\t\treturn !!isFavorite.length;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {items, favoriteList} = this.props;\r\n\r\n\t\treturn (\r\n\r\n\t\t\titems.map((item) => {\r\n\r\n\t\t\t\treturn <Card\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tkey={item.hotelId}\r\n\t\t\t\t\tisFavorite={this.isFavorite(favoriteList, item)}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t/>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCardList.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n};\r\n\r\nexport default CardList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst CitiesList = (props) => {\r\n\r\n\tconst {items, city, onClick} = props;\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<h1 className=\"visually-hidden\">Cities</h1>\r\n\t\t\t<div className=\"tabs\">\r\n\t\t\t\t<section className=\"locations container\">\r\n\t\t\t\t\t<ul className=\"locations__list tabs__list\">\r\n\r\n\t\t\t\t\t\t{items.map((it, i) => {\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li className=\"locations__item\"\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Link to={BASE_URL} className={ (it.city === city) ? `locations__item-link tabs__item buttonLink tabs__item--active`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `locations__item-link tabs__item buttonLink`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{color: '#000', backgroundColor: '#f5f5f5'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onClick(it.city)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span>{it.city}</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nCitiesList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n};\r\n\r\nexport default CitiesList;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst CitiesNoPlaces = (props) => {\r\n\r\n\tconst {city} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"cities__places-container cities__places-container--empty container\">\r\n\t\t\t<section className=\"cities__no-places\">\r\n\t\t\t\t<div className=\"cities__status-wrapper tabs__content\">\r\n\t\t\t\t\t<b className=\"cities__status\">No places to stay available</b>\r\n\t\t\t\t\t<p className=\"cities__status-description\">We could not find any property availbale at the moment in {city}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<div className=\"cities__right-section\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCitiesNoPlaces.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesNoPlaces;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport leaflet from 'leaflet';\r\n\r\nimport {getIconParams, getActiveIconParams} from '../../helpers/helpers';\r\n\r\nclass Map extends React.PureComponent {\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmap: null,\r\n\t\t\tmarkers: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\r\n\t\tconst {coords, items, offer} = this.props;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\telse {\r\n\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\r\n\t\tconst {coords, offerHover, items, offer} = this.props;\r\n\t\tconst {markers} = this.state;\r\n\r\n\t\tif (prevProps.offer !== offer) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\r\n\r\n\t\tif (prevProps.coords !== coords) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\r\n\t\tthis._changeIconsOnHover(offerHover, markers);\r\n\t}\r\n\r\n\t_initMap = (cityCoord, items, offer = null) => {\r\n\r\n\t\tconst city = cityCoord;\r\n\t\tlet icon = leaflet.icon(getIconParams());\r\n\t\tconst zoom = 12;\r\n\t\tconst map = leaflet.map('map', {\r\n\t\t\tcenter: city,\r\n\t\t\tzoom: zoom,\r\n\t\t\tzoomControl: false,\r\n\t\t\tmarker: true\r\n\t\t});\r\n\r\n\t\tmap.setView(city, zoom);\r\n\r\n\t\tleaflet.tileLayer(`https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png`, {\r\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n\t\t})\r\n\t\t\t.addTo(map);\r\n\r\n\t\tlet markers = [];\r\n\t\tlet mark;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\ticon = leaflet.icon(getActiveIconParams());\r\n\t\t\tmark = leaflet.marker(offer.coords, {icon});\r\n\t\t\tmark.addTo(map);\r\n\t\t}\r\n\r\n\t\tfor (const item of items) {\r\n\r\n\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\tmark = leaflet.marker(item.coords, {icon});\r\n\t\t\tmarkers.push(mark);\r\n\t\t}\r\n\r\n\t\tfor (const it of markers) {\r\n\t\t\tit.addTo(map);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmarkers: markers,\r\n\t\t\tmap: map\r\n\t\t});\r\n\t};\r\n\r\n\t_changeIconsOnHover = (offer, markers) => {\r\n\r\n\t\tfor (const it of markers) {\r\n\r\n\t\t\tlet icon;\r\n\r\n\t\t\tif (offer) {\r\n\t\t\t\tif (it._latlng.lat === offer.coords[0] &&\r\n\t\t\t\t\tit._latlng.lng === offer.coords[1]) {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams(35, 35));\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t}\r\n\t\t\tit.setIcon(icon);\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {items} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div id=\"map\"></div>\r\n\t\t\t\t<span style={{visibility: 'hidden'}} defaultValue={items}/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMap.propTypes = {\r\n\tcoords: PropTypes.array.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\toffer: PropTypes.object,\r\n\tofferHover: PropTypes.object,\r\n};\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst Header = (props) => {\r\n\r\n\tconst {isAuthorizationRequired, currentUser, onLogoClick} = props;\r\n\r\n\treturn (\r\n\t\t<header className=\"header\">\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"header__wrapper\">\r\n\t\t\t\t\t<div className=\"header__left\">\r\n\t\t\t\t\t\t<Link to={BASE_URL + `/`}\r\n\t\t\t\t\t\t\t\t\tclassName=\"header__logo-link buttonLink\"\r\n\t\t\t\t\t\t\t\t\tonClick={onLogoClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img className=\"header__logo\" src={BASE_URL + `/img/logo.svg`} alt=\"6 cities logo\" width=\"81\" height=\"41\"/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<nav className=\"header__nav\">\r\n\t\t\t\t\t\t<ul className=\"header__nav-list\">\r\n\t\t\t\t\t\t\t<li className=\"header__nav-item user\">\r\n\t\t\t\t\t\t\t\t<button className=\"header__nav-link header__nav-link--profile buttonLink\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"header__avatar-wrapper user__avatar-wrapper\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{!isAuthorizationRequired\r\n\t\t\t\t\t\t\t\t\t\t? <span className=\"header__user-name user__name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(window.location.pathname !== '/favorites') ? <Link to={BASE_URL + `/favorites`}>{currentUser.name}</Link> : currentUser.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t: <span className=\"header__login\">\r\n\t\t\t\t\t\t\t\t\t\t\t{(window.location.pathname !== '/login') ?\t<Link to={BASE_URL + `/login`}>Sign in</Link> : `Sign In`}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nHeader.propTypes = {\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object.isRequired,\r\n\tonLogoClick: PropTypes.func,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport SortingType from '../sorting-type/sorting-type';\r\nimport CardList from '../card-list/card-list';\r\nimport CitiesList from '../cities-list/cities-list';\r\nimport CitiesNoPlaces from '../cities-no-places/cities-no-places';\r\nimport Map from '../map/map';\r\nimport Header from '../header/header';\r\n\r\nimport {getIndex} from '../../helpers/helpers';\r\nimport {BASE_URL, BASE_PATHNAME, APP_ROUTE} from '../../const';\r\n\r\nclass Main extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffers: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst {city} = this.props;\r\n\r\n\t\tdocument.title = `6 cities - ${city}`;\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif (prevProps.city !== this.props.city) {\r\n\r\n\t\t\tthis.handleSortOffers('Popular');\r\n\t\t\tdocument.title = `6 cities - ${this.props.city}`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\r\n\t\tif(props.cityOffer !== state.offers) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffers: props.cityOffers\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\thandleSortOffers = (option) => {\r\n\r\n\t\tlet {offers} = this.state;\r\n\r\n\t\tswitch (option) {\r\n\r\n\t\t\tcase `Popular`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.id > b.id) return 1;\r\n\t\t\t\t\tif (a.id < b.id) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: low to high`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price > b.price) return 1;\r\n\t\t\t\t\tif (a.price < b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: high to low`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price < b.price) return 1;\r\n\t\t\t\t\tif (a.price > b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Top rated first`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.rating < b.rating) return 1;\r\n\t\t\t\t\tif (a.rating > b.rating) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t\tthis.setState({offers});\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\r\n\t\tconst {isAuthorizationRequired, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\r\n\t\t\tconsole.log(\"****************\");\r\n\t\t\tconsole.log(BASE_URL);\r\n\t\t\twindow.location.assign(BASE_PATHNAME + APP_ROUTE.LOGIN);\r\n\r\n\t\t} else{\r\n\r\n\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, city, currentUser, isAuthorizationRequired, reload, favoriteList} = this.props;\r\n\t\tconst index = getIndex(hotels, city);\r\n\t\tconst offers = hotels[index].offers;\r\n\t\tconst cityCoord = hotels[index].coords;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--main\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={reload}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className={offers.length ? 'page__main page__main--index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t : 'page__main page__main--index page__main--index-empty'}>\r\n\r\n\t\t\t\t\t<CitiesList items={hotels}\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCityClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"cities\">\r\n\r\n\t\t\t\t\t\t{offers.length ?\r\n\t\t\t\t\t\t\t<div className=\"cities__places-container container\">\r\n\t\t\t\t\t\t\t\t<section className=\"cities__places places\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"visually-hidden\">Places</h2>\r\n\t\t\t\t\t\t\t\t\t<b className=\"places__found\">{offers.length} places to stay in {city}</b>\r\n\r\n\t\t\t\t\t\t\t\t\t<SortingType\r\n\t\t\t\t\t\t\t\t\t\tkey={city}\r\n\t\t\t\t\t\t\t\t\t\tonChangeOption={this.handleSortOffers}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"cities__places-list places__list tabs__content\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<CardList\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\titems={offers}\r\n\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<div className=\"cities__right-section\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"cities_map map\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\t\t\t\titems={offers}\r\n\t\t\t\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t: <CitiesNoPlaces city={city}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMain.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tonOfferClick: PropTypes.func,\r\n\tonCityClick: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\t// const {id} = ownProps.match.params;\r\n\t//\r\n\treturn Object.assign({}, ownProps, {\r\n\t// \tid,\r\n\t// \tcity: getCityOffer(state, id).city,\r\n\t// \thotels: state.hotels,\r\n\t// \tcityOffer: getCityOffer(state, id),\r\n\t// \tcityOffers: getCityOffers(state, id),\r\n\t// \tfavoriteList: state.favoriteList,\r\n\t\t// isAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\t// currentUser: state.currentUser,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {Main}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Review = (props) => {\r\n\r\n\tconst {review} = props;\r\n\r\n\tconst rating = review.rating * 20;\r\n\tconst reviewDate = new Date(review.date).toLocaleDateString('en-US', {\r\n\t\tmonth: 'long',\r\n\t\tyear: 'numeric',\r\n\t});\r\n\r\n\treturn (\r\n\t\t<li className=\"reviews__item\">\r\n\t\t\t<div className=\"reviews__user user\">\r\n\t\t\t\t<div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\r\n\t\t\t\t\t<img className=\"reviews__avatar user__avatar\" src={review.user.avatar_url} width=\"54\" height=\"54\" alt=\"Reviews avatar\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className=\"reviews__user-name\">{review.user.name}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"reviews__info\">\r\n\t\t\t\t<div className=\"reviews__rating rating\">\r\n\t\t\t\t\t<div className=\"reviews__stars rating__stars\">\r\n\t\t\t\t\t\t<span style={{width: rating + '%'}}/>\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"reviews__text\">\r\n\t\t\t\t\t{review.comment}\r\n\t\t\t\t</p>\r\n\t\t\t\t<time className=\"reviews__time\" dateTime={review.date}>{reviewDate}</time>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\nReview.propTypes = {\r\n\treview: PropTypes.object.isRequired\r\n};\r\n\r\nexport default Review;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Review from '../review/review';\r\n\r\nconst ReviewList = (props) => {\r\n\r\n\tconst {reviews} = props;\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t<h2 className=\"reviews__title\">\r\n\t\t\tReviews &middot; <span className=\"reviews__amount\">{reviews.length}</span>\r\n\t\t</h2>\r\n\t\t<ul className=\"reviews__list\">\r\n\r\n\t\t\t{reviews.map((it) => {\r\n\t\t\t\treturn <Review\r\n\t\t\t\t\treview={it}\r\n\t\t\t\t\tkey={it.id}\r\n\t\t\t\t\t/>\r\n\t\t\t})}\r\n\r\n\t\t</ul>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nReviewList.propTypes = {\r\n\treviews: PropTypes.array.isRequired\r\n};\r\n\r\nexport default ReviewList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CardList from '../card-list/card-list';\r\n\r\nconst NeighbourhoodList = (props) => {\r\n\r\n\tconst {items, city, favoriteList} = props;\r\n\r\n\tconst handleClick = (item) => props.onClick(item);\r\n\tconst handleMouseOver = (item) => props.onMouseOver(item);\r\n\tconst handleMouseLeave = (e) => props.onMouseLeave(e);\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n\treturn <CardList\r\n\t\tcity={city}\r\n\t\titems={items}\r\n\t\tfavoriteList={favoriteList}\r\n\t\tonClick={handleClick}\r\n\t\tonMouseOver={handleMouseOver}\r\n\t\tonMouseLeave={handleMouseLeave}\r\n\t\tonBookmarkClick={handleBookmarkClick}\r\n\t/>\r\n};\r\n\r\nNeighbourhoodList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func.isRequired,\r\n\tonMouseLeave: PropTypes.func.isRequired\r\n};\r\n\r\nexport default NeighbourhoodList;\r\n","import React from 'react';\r\n\r\nclass FormComments extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\trating: '',\r\n\t\t\treview: '',\r\n\t\t\tisRatingValid: false,\r\n\t\t\tisReviewValid: false,\r\n\t\t\tdisabled: true,\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateForm = () => {\r\n\r\n\t\tthis.setState({\r\n\t\t\tdisabled: !(this.state.isRatingValid && this.state.isReviewValid),\r\n\t\t});\r\n\t};\r\n\r\n\tvalidateField = (name, value) => {\r\n\r\n\t\tlet {isRatingValid, isReviewValid} = this.state;\r\n\t\tconst minValue = 50;\r\n\t\tconst maxValue = 200;\r\n\r\n\t\tswitch (name) {\r\n\r\n\t\t\tcase `rating`: isRatingValid = value.length > 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase `review`: isReviewValid\t= value.length >= minValue && value.length <= maxValue;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tisRatingValid,\r\n\t\t\tisReviewValid\r\n\t\t}, () => this.validateForm());\r\n\t};\r\n\r\n\thandleChange = (e) => {\r\n\r\n\t\tconst {name, value} = e.target;\r\n\r\n\t\tthis.setState({[name]: value}, () => this.validateField(name, value));\r\n\t};\r\n\r\n\tclearForm = (e) => {\r\n\r\n\t\te.target.reset();\r\n\r\n\t\tthis.setState({\r\n\t\t\trating: '',\r\n\t\t\treview: '',\r\n\t\t\tisRatingValid: false,\r\n\t\t\tisReviewValid: false,\r\n\t\t\tdisabled: true,\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = (e) => {\r\n\r\n\t\te.preventDefault();\r\n\t\tthis.clearForm(e);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"reviews__form form\"\r\n\t\t\t\t\t\taction=\"#\"\r\n\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t>\r\n\t\t\t\t<label className=\"reviews__label form__label\" htmlFor=\"review\">Your review</label>\r\n\t\t\t\t<div className=\"reviews__rating-form form__rating\">\r\n\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t value=\"5\"\r\n\t\t\t\t\t\t\t\t id=\"5-stars\"\r\n\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"5-stars\" className=\"reviews__rating-label form__rating-label\" title=\"perfect\">\r\n\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t value=\"4\"\r\n\t\t\t\t\t\t\t\t\t id=\"4-stars\"\r\n\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"4-stars\" className=\"reviews__rating-label form__rating-label\" title=\"good\">\r\n\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t value=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t id=\"3-stars\"\r\n\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"3-stars\" className=\"reviews__rating-label form__rating-label\" title=\"not bad\">\r\n\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t\t value=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\t id=\"2-stars\"\r\n\t\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"2-stars\" className=\"reviews__rating-label form__rating-label\" title=\"badly\">\r\n\t\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t id=\"1-star\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"1-star\" className=\"reviews__rating-label form__rating-label\" title=\"terribly\">\r\n\t\t\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<textarea className=\"reviews__textarea form__textarea\" id=\"review\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Tell how was your stay, what you like and what can be improved\"\r\n\t\t\t\t\t\t\t\t\tname=\"review\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.textarea}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"reviews__button-wrapper\">\r\n\t\t\t\t\t<p className=\"reviews__help\">\r\n\t\t\t\t\t\tTo submit review please make sure to set <span className=\"reviews__star\">rating</span> and describe your stay with at least <b className=\"reviews__text-amount\">50 characters</b>.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<button className=\"reviews__submit form__submit button\" type=\"submit\"\r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nFormComments.propTypes = {\r\n};\r\n\r\nexport default FormComments;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_PATHNAME} from '../../const';\r\n\r\nconst ErrorPage = () => {\r\n\r\n\treturn (\r\n\t\t<main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t<section className=\"favorites favorites--empty\">\r\n\t\t\t\t\t<h1 className=\"visually-hidden\">404 error</h1>\r\n\t\t\t\t\t<div className=\"favorites__status-wrapper\">\r\n\t\t\t\t\t\t<b className=\"favorites__status\">404 error</b>\r\n\t\t\t\t\t\t<p className=\"favorites__status-description\">\r\n\t\t\t\t\t\t\tPage not found. Go to the <Link to={BASE_PATHNAME}><span style={{textDecoration: 'underline'}}>main</span></Link> page\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n\r\nexport default ErrorPage;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './property-gallery.css';\r\n\r\nconst PropertyGallery = (props) => {\r\n\r\n\tconst {images} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__gallery-container container\">\r\n\t\t\t<div className=\"property__gallery\">\r\n\r\n\t\t\t\t{images.map((img, i) =>\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t<div className=\"property__image-wrapper\" key={img}>\r\n\t\t\t\t\t\t\t<img className=\"property__image\" src={img} alt={`studio${i}`}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyGallery.propTypes = {\r\n\timages: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default PropertyGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyFeatures = (props) => {\r\n\r\n\tconst {offer} = props;\r\n\r\n\treturn (\r\n\t\t<ul className=\"property__features\">\r\n\t\t\t<li className=\"property__feature property__feature--entire\">\r\n\t\t\t\tEntire place\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--bedrooms\">\r\n\t\t\t\t{offer.bedrooms} Bedrooms\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--adults\">\r\n\t\t\t\tMax {offer.max_adults} adults\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nPropertyFeatures.propTypes = {\r\n\toffer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyFeatures;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyInside = (props) => {\r\n\r\n\tconst {goods} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__inside\">\r\n\t\t\t<h2 className=\"property__inside-title\">What&apos;s inside</h2>\r\n\t\t\t<ul className=\"property__inside-list\">\r\n\r\n\t\t\t\t{ goods.map((good) =>\r\n\t\t\t\t\t<li className=\"property__inside-item\" key={good}>\r\n\t\t\t\t\t\t{good}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyInside.propTypes = {\r\n\tgoods: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default PropertyInside;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst PropertyHost = (props) => {\r\n\r\n\tconst {offer} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__host\">\r\n\t\t\t<h2 className=\"property__host-title\">Meet the host</h2>\r\n\t\t\t<div className=\"property__host-user user\">\r\n\t\t\t\t<div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\r\n\t\t\t\t\t<img className=\"property__avatar user__avatar\" src={BASE_URL + `/` + offer.host.avatar_url} width=\"74\"\r\n\t\t\t\t\t\t\t height=\"74\" alt=\"Host avatar\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className=\"property__user-name\">{offer.host.name}</span>\r\n\t\t\t\t<span className=\"property__user-status\">{offer.host.is_pro ? `Pro` : ``}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"property__description\">\r\n\t\t\t\t<p className=\"property__text\">{offer.description}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyHost.propTypes = {\r\n\toffer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyHost;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport ReviewList from '../review-list/review-list';\r\nimport Map from '../map/map';\r\nimport NeghbourhoodList from '../neighbourhood-list/neughbourhood-list';\r\nimport FormComments from '../form-comments/form-comments';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Header from '../header/header';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport Mark from '../mark/mark';\r\nimport PropertyGallery from '../property-gallery/property-gallery';\r\nimport Rating from '../rating/rating';\r\nimport PropertyFeatures from '../property-features/property-features';\r\nimport PropertyInside from '../property-inside/property-inside';\r\nimport Price from '../price/price';\r\nimport PropertyHost from '../property-host/property-host';\r\n\r\nimport {getCityCoord, getCityOffer, getCityOffers, getNhoods} from '../../helpers/helpers';\r\nimport {BASE_PATHNAME, APP_ROUTE, NUMBER_NEIBOURHOODS} from '../../const';\r\n\r\nclass OfferProperty extends React.PureComponent{\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffer: this.props.cityOffer\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst {cityOffer, getReviews} = this.props;\r\n\r\n\t\tdocument.title = `${cityOffer.city} - ${cityOffer.title}`;\r\n\r\n\t\tgetReviews();\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif(prevProps.cityOffer !== this.props.cityOffer) {\r\n\r\n\t\t\twindow.scrollTo(0,0);\r\n\t\t\tdocument.title = `${this.props.cityOffer.city} - ${this.props.cityOffer.title}`;\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick = (item) => this.setState({offer: item}, () => this.props.onClick(item));\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\tisFavorite = () => {\r\n\r\n\t\tconst {cityOffer, favoriteList} = this.props;\r\n\r\n\t\tif (!favoriteList.length) return false;\r\n\r\n\t\treturn favoriteList.findIndex((item) => item.hotelId === cityOffer.hotelId) >= 0;\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\t\tconst {isAuthorizationRequired, cityOffer, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\r\n\t\t\twindow.location.assign(BASE_PATHNAME + APP_ROUTE.LOGIN);\r\n\r\n\t\t} else{\r\n\r\n\t\t\tif (small) {\r\n\t\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t\t} else {\r\n\t\t\t\ttoggleBookmark(cityOffer, favoriteList);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {hotels, cityOffers, city, currentUser, isAuthorizationRequired, favoriteList, reviews} = this.props;\r\n\t\tconst {offer} = this.state;\r\n\r\n\t\tif (!offer) return <ErrorPage/>;\r\n\r\n\t\tconst neighbourhoods = getNhoods(offer, cityOffers, NUMBER_NEIBOURHOODS);\r\n\t\tconst cityCoord = getCityCoord(hotels, city);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--property\">\r\n\t\t\t\t\t<section className=\"property\">\r\n\r\n\t\t\t\t\t\t<PropertyGallery\r\n\t\t\t\t\t\t\timages={offer.images}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"property__container container\">\r\n\t\t\t\t\t\t\t<div className=\"property__wrapper\">\r\n\r\n\t\t\t\t\t\t\t\t<Mark\r\n\t\t\t\t\t\t\t\t\tisPremium={offer.is_premium}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"property__name-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"property__name\">\r\n\t\t\t\t\t\t\t\t\t\t{offer.title}\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\t\t\t\t\tisActive={this.isFavorite()}\r\n\t\t\t\t\t\t\t\t\t\tonBookmarkClick={(small) => this.handleBookmarkClick(offer, small)}\r\n\t\t\t\t\t\t\t\t\t\tsmall={false}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\trating={offer.rating}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyFeatures\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Price\r\n\t\t\t\t\t\t\t\t\tprice={offer.price}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyInside\r\n\t\t\t\t\t\t\t\t\tgoods={offer.goods}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyHost\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<section className=\"property__reviews reviews\">\r\n\r\n\t\t\t\t\t\t\t\t\t<ReviewList reviews={reviews}/>\r\n\r\n\t\t\t\t\t\t\t\t\t{!isAuthorizationRequired\r\n\t\t\t\t\t\t\t\t\t\t? <FormComments\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={this.submitReviewForm}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section className=\"property_map map\" style={{height: 579 + 'px', marginBottom: 50 + 'px'}}>\r\n\r\n\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<section className=\"near-places places\">\r\n\t\t\t\t\t\t\t<h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\r\n\t\t\t\t\t\t\t<div className=\"near-places__list places__list\">\r\n\r\n\t\t\t\t\t\t\t\t<NeghbourhoodList\r\n\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOfferProperty.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffer: PropTypes.object.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\tconst {id} = ownProps.match.params;\r\n\r\n\treturn Object.assign({}, ownProps, {\r\n\t\tid,\r\n\t\tcity: getCityOffer(state, id).city,\r\n\t\thotels: state.hotels,\r\n\t\tcityOffer: getCityOffer(state, id),\r\n\t\tcityOffers: getCityOffers(state, id),\r\n\t\tfavoriteList: state.favoriteList,\r\n\t\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\tcurrentUser: state.currentUser,\r\n\t\treviews: state.reviews,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n\r\n\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n\tgetReviews: () => dispatch(Operation.getReviews(ownProps.match.params.id)),\r\n});\r\n\r\nexport {OfferProperty}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferProperty);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL, LOCATION_BUTTON_CLASS} from '../../const';\r\n\r\nconst LocationButton = (props) => {\r\n\r\n\tconst {city, onFavoriteCityClick, prefix} = props;\r\n\r\n\tconst handleFavotiteCityClick = () => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<div className={LOCATION_BUTTON_CLASS[prefix.toUpperCase()]}>\r\n\t\t\t<div className=\"locations__item\">\r\n\t\t\t\t<Link to={BASE_URL} className=\"locations__item-link buttonLink\"\r\n\t\t\t\t\t\t\tonClick={handleFavotiteCityClick}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{city}</span>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nLocationButton.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\tonFavoriteCityClick: PropTypes.func.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LocationButton;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Header from '../header/header';\r\nimport LocationButton from '../location-button/location-button';\r\nimport {getRandomInt, getInputClassName} from '../../helpers/helpers';\r\nimport './sign-in.css';\r\n\r\n\r\nclass SignIn extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcity: '',\r\n\t\t\temail: '',\r\n\t\t\tpassword: '',\r\n\t\t\temailValid: false,\r\n\t\t\tpasswordValid: false,\r\n\t\t\tformValid: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst {hotels} = this.props;\r\n\r\n\t\tdocument.title = `6 cities - sign in`;\r\n\r\n\t\tthis.setState(() => ({\r\n\t\t\tcity: hotels[getRandomInt(hotels.length)].city,\r\n\t\t}));\r\n\t}\r\n\r\n\thandleSubmit = (e) => {\r\n\r\n\t\tconst {onSubmit} = this.props;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tonSubmit({\r\n\t\t\temail: this.state.email,\r\n\t\t\tpassword: this.state.password,\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tvalidateField = (name, value) => {\r\n\r\n\t\tlet emailValid = this.state.emailValid;\r\n\t\tlet passwordValid = this.state.passwordValid;\r\n\t\tconst minPassLength = 6;\r\n\t\tconst maxPassLength = 12;\r\n\r\n\t\tswitch (name) {\r\n\r\n\t\t\tcase `email`: emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `password`: passwordValid = value.length >= minPassLength && value.length <= maxPassLength;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\temailValid,\r\n\t\t\tpasswordValid\r\n\t\t}, this.validateForm);\r\n\t};\r\n\r\n\tvalidateForm = () => {\r\n\t\tthis.setState({\r\n\t\t\tformValid: this.state.emailValid && this.state.passwordValid,\r\n\t\t});\r\n\t};\r\n\r\n\thandleChange = (e) => {\r\n\r\n\t\tconst value = e.target.value;\r\n\t\tconst name = e.target.name;\r\n\r\n\t\tthis.setState( {[name]: value}, () => {this.validateField(name, value)} );\r\n\t};\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, isAuthRequired, currentUser} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--login\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={() => this.handleCityClick(hotels[0].city)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--login\">\r\n\t\t\t\t\t<div className=\"page__login-container container\">\r\n\t\t\t\t\t\t<section className=\"login\">\r\n\t\t\t\t\t\t\t<h1 className=\"login__title\">Sign in</h1>\r\n\t\t\t\t\t\t\t<form className=\"login__form form\"\r\n\t\t\t\t\t\t\t\t\t\taction=\"#\"\r\n\t\t\t\t\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"login__input-wrapper form__input-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"visually-hidden\">E-mail</label>\r\n\t\t\t\t\t\t\t\t\t<input className={`login__input form__input ${getInputClassName(this.state.email, this.state.emailValid)}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t required=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value={this.state.email}\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"login__input-wrapper form__input-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"visually-hidden\">Password</label>\r\n\t\t\t\t\t\t\t\t\t<input className={`login__input form__input ${getInputClassName(this.state.password, this.state.passwordValid)}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t required=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value={this.state.password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"login__submit form__submit button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.formValid}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSign in\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={this.state.city}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={this.handleCityClick}\r\n\t\t\t\t\t\t\tprefix=\"login\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSignIn.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tonSubmit: PropTypes.func.isRequired,\r\n\tonCityClick: PropTypes.func.isRequired,\r\n\tcurrentUser: PropTypes.object.isRequired,\r\n\tisAuthRequired: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default SignIn;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\nimport Rating from '../rating/rating';\r\nimport Mark from '../mark/mark';\r\nimport Price from '../price/price';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\n\r\nconst FavoriteCard = (props) => {\r\n\r\n\tconst {item} = props;\r\n\r\n\tconst handleBookmarkClick = () => props.onBookmarkClick(props.item);\r\n\r\n\treturn (\r\n\t\t<article className=\"favorites__card place-card\">\r\n\r\n\t\t\t<Mark\r\n\t\t\t\tisPremium={item.is_premium}\r\n\t\t\t\tprefix=\"place-card\"\r\n\t\t\t/>\r\n\r\n\t\t\t<div className=\"favorites__image-wrapper place-card__image-wrapper\">\r\n\t\t\t\t<Link to={BASE_URL + `/offer/` + item.hotelId} className=\"buttonLink\">\r\n\t\t\t\t\t<img className=\"place-card__image\" src={item.preview_image} width=\"150\" height=\"110\" alt=\"Place\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"favorites__card-info place-card__info\">\r\n\t\t\t\t<div className=\"place-card__price-wrapper\">\r\n\r\n\t\t\t\t\t<Price\r\n\t\t\t\t\t\tprice={item.price}\r\n\t\t\t\t\t\tprefix=\"place-card\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\tisActive={true}\r\n\t\t\t\t\t\tsmall={true}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Rating\r\n\t\t\t\t\trating={item.rating}\r\n\t\t\t\t\tprefix=\"place-card\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<h2 className=\"place-card__name\">\r\n\t\t\t\t\t<Link to={BASE_URL + `/offer/` + item.hotelId} className=\"card__title buttonLink\">{item.title}</Link>\r\n\t\t\t\t</h2>\r\n\t\t\t\t<p className=\"place-card__type\">{item.type}</p>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nFavoriteCard.propTypes = {\r\n\titem: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default FavoriteCard;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LocationButton from '../location-button/location-button';\r\nimport FavoriteCard from '../favorite-card/favorite-card';\r\n\r\nconst FavoritesList = (props) => {\r\n\r\n\tconst {favoriteList, onBookmarkClick, onFavoriteCityClick} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => onBookmarkClick(item);\r\n\r\n\tconst handleFavoriteCityClick = (city) => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<ul className=\"favorites__list\">\r\n\r\n\t\t\t{favoriteList.map((cityObj, ind) => {\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li className=\"favorites__locations-items\" key={cityObj.city + ind}>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={cityObj.city}\r\n\t\t\t\t\t\t\tkey={cityObj.city + ind}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\tprefix=\"favorites\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"favorites__places\">\r\n\r\n\t\t\t\t\t\t\t{cityObj.favorites.map((hotel) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<FavoriteCard\r\n\t\t\t\t\t\t\t\t\t\t\titem={hotel}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={hotel.hotelId}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nFavoritesList.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tonBookmarkClick: PropTypes.func.isRequired,\r\n\tonFavoriteCityClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FavoritesList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport FavoritesList from '../favorites-list/favorites-list';\r\nimport Header from '../header/header';\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst formatFavoriteList = (arrayOfObject) => {\r\n\r\n\tlet cities = new Set();\r\n\tlet arr = [];\r\n\tlet obj = {\r\n\t\tcity: '',\r\n\t\tfavorites: [],\r\n\t};\r\n\r\n\tarrayOfObject.forEach((it) => cities.add(it.city));\r\n\r\n\tfor(const city of cities) {\r\n\r\n\t\tfor(const favorite of arrayOfObject) {\r\n\r\n\t\t\tif (city === favorite.city) {\r\n\r\n\t\t\t\tobj.city = city;\r\n\t\t\t\tobj.favorites.push(favorite);\r\n\t\t\t}\r\n\t\t}\r\n\t\tarr.push(obj);\r\n\t\tobj = {\r\n\t\t\tcity: '',\r\n\t\t\tfavorites: [],\r\n\t\t};\r\n\t}\r\n\treturn arr;\r\n};\r\n\r\nconst Favorites = (props) => {\r\n\r\n\tconst {favoriteList, toggleBookmark, cityClick, isAuthRequired, currentUser} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => toggleBookmark(item, favoriteList);\r\n\r\n\tconst handleFavoriteCityClick = (city) => cityClick(city);\r\n\r\n\tdocument.title = `6 cities - favorites`;\r\n\r\n\treturn (\r\n\t\t<div className={`page ${!favoriteList.length ? `page--favorites-empty` : ``}`}>\r\n\r\n\t\t\t<Header\r\n\t\t\t\tisAuthorizationRequired={isAuthRequired}\r\n\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t/>\r\n\r\n\t\t\t{favoriteList.length\r\n\t\t\t\t? <main className=\"page__main page__main--favorites\">\r\n\t\t\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t\t\t<section className=\"favorites\">\r\n\t\t\t\t\t\t\t<h1 className=\"favorites__title\">Saved listing</h1>\r\n\r\n\t\t\t\t\t\t\t<FavoritesList\r\n\t\t\t\t\t\t\t\tfavoriteList={formatFavoriteList(favoriteList)}\r\n\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t\t: <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n\t\t\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t\t\t<section className=\"favorites favorites--empty\">\r\n\t\t\t\t\t\t\t<h1 className=\"visually-hidden\">Favorites (empty)</h1>\r\n\t\t\t\t\t\t\t<div className=\"favorites__status-wrapper\">\r\n\t\t\t\t\t\t\t\t<b className=\"favorites__status\">Nothing yet saved.</b>\r\n\t\t\t\t\t\t\t\t<p className=\"favorites__status-description\">Save properties to narrow down search or plan yor future\r\n\t\t\t\t\t\t\t\t\ttrips.</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t}\r\n\t\t\t<footer className=\"footer\">\r\n\t\t\t\t<Link to={BASE_URL} className=\"footer__logo-link\" href=\"main.html\">\r\n\t\t\t\t\t<img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"64\" height=\"33\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</footer>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nFavorites.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tisAuthRequired: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\treturn Object.assign({}, ownProps, {});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\tcityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {Favorites}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites);","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\r\n\treturn (\r\n\t\t<div id=\"preloader\">\r\n\t\t\t<div id=\"loader\"/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nconst PrivateRoute = ({component: Component, isAuthRequired, ...rest}) => (\r\n\t<Route {...rest} render={(props) => (\r\n\t\tisAuthRequired === false\r\n\t\t\t? <Component {...rest} {...props}/>\r\n\t\t\t: <Redirect to='/'/>\r\n\t)}/>\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {Switch, Route} from 'react-router-dom';\r\n\r\nimport {ActionCreator, Operation} from '../../reducer';\r\nimport {getIndex, getLS, setLS} from '../../helpers/helpers';\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nimport Main from '../main/main';\r\nimport OfferProperty from '../offer-property/offer-property';\r\nimport SignIn from '../sign-in/sign-in';\r\nimport Favorites from '../favorites/favorites';\r\nimport Loader from '../loader/loader';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport PrivateRoute from '../private-route/private-route';\r\n\r\nclass App extends React.PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n\t\t\tactiveOfferId: {},\r\n\t\t\tisHotelsLoaded: false,\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n\r\n  \tconst {hotels, currentUser, favoriteList} = this.props;\r\n\r\n\t\tif (prevProps.hotels !== hotels) {\r\n\t\t\tthis.setState({isHotelsLoaded: true});\r\n\t\t}\r\n\r\n\t\tif (currentUser && prevProps.favoriteList !== favoriteList) {\r\n\r\n\t\t\tlet userList = [];\r\n\t\t\tlet filtered;\r\n\t\t\tconst data = {currentUser, favoriteList};\r\n\r\n\t\t\tlet favoritesLocal = getLS('favorites');\r\n\r\n\t\t\tif (favoritesLocal) {\r\n\r\n\t\t\t\tfiltered = favoritesLocal.filter((it) => it.currentUser.email !== currentUser.email);\r\n\r\n\t\t\t\tfiltered.push(data);\r\n\t\t\t\tsetLS('favorites', filtered);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuserList.push(data);\r\n\t\t\t\tsetLS('favorites', userList);\r\n\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n\r\n\thandleReload = () => {\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisHotelsLoaded: !prevState.isHotelsLoaded,\r\n\t\t}), () => window.location.reload());\r\n\t};\r\n\r\n\thandleOfferClick = (item) => {\r\n\r\n\t\treturn this.setState({activeOfferId: item.id});\r\n\t};\r\n\r\n  render() {\r\n\r\n\t\tconst {hotels, city, currentUser, isAuthorizationRequired, favoriteList, cityClick, login} = this.props;\r\n\r\n\t\tlet cityOffers;\r\n\r\n\t\tif (this.state.isHotelsLoaded && city) {\r\n\r\n\t\t\tcityOffers = hotels[getIndex(hotels, city)].offers;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\tthis.state.isHotelsLoaded && city\r\n\t\t\t\t? <Switch>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.ROOT}>\r\n\t\t\t\t\t\t\t\t<Main\r\n\t\t\t\t\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t\t\t\t\tcityOffers={cityOffers}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleOfferClick}\r\n\t\t\t\t\t\t\t\t\tonCityClick={cityClick}\r\n\t\t\t\t\t\t\t\t\treload={this.handleReload}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.LOGIN}>\r\n\t\t\t\t\t\t\t\t<SignIn\r\n\t\t\t\t\t\t\t\t\thotels={hotels}\r\n\t\t\t\t\t\t\t\t\tonSubmit={login}\r\n\t\t\t\t\t\t\t\t\tonCityClick={cityClick}\r\n\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\t\tisAuthRequired={isAuthorizationRequired}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<PrivateRoute exact path={APP_ROUTE.FAVORITES}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={Favorites}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisAuthRequired={isAuthorizationRequired}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}/>\r\n\t\t\t\t\t\t\t<Route path={APP_ROUTE.OFFER}\r\n\t\t\t\t\t\t\t\t\t\t render={(props) => <OfferProperty {...props}/>}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={APP_ROUTE.ERROR} component={ErrorPage}/>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t: <Loader/>\r\n\t\t);\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  city: PropTypes.string.isRequired,\r\n  cityClick: PropTypes.func.isRequired,\r\n\tisAuthorizationRequires: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object,\r\n\tlogin: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => Object.assign({}, ownProps, {\r\n  city: state.city,\r\n  hotels: state.hotels,\r\n\tcurrentOffer: state.currentOffer,\r\n\tfavoriteList: state.favoriteList,\r\n\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\tcurrentUser: state.currentUser,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\tcityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\tlogin: (authData) => dispatch(Operation.login(authData)),\r\n\tsetFavorites: (favoritesList) => dispatch(ActionCreator.setFavorites(favoritesList)),\r\n\tsetCurrentUser: (currentUser) => dispatch(ActionCreator.setCurrentUser(currentUser)),\r\n});\r\n\r\nexport {App};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import axios from 'axios';\r\n\r\nconst createAPI = (onUnauthorized) => {\r\n\r\n\tconst api = axios.create({\r\n\t\tbaseURL: `https://es31-server.appspot.com/six-cities`,\r\n\t\ttimeout: 1000 * 5,\r\n\t\twithCredentials: true,\r\n\t});\r\n\r\n\tconst onSuccess = (response) => response;\r\n\r\n\tconst onFail = (error) => {\r\n\r\n\t\t// if (error.response.status === 403) {\r\n\r\n\t\t\t// onUnauthorized();\r\n\t\t// }\r\n\r\n\t\treturn error;\r\n\t};\r\n\r\n\tapi.interceptors.response.use(onSuccess, onFail);\r\n\r\n\treturn api;\r\n};\r\n\r\nexport default createAPI;\r\n","import {createStore, applyMiddleware} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport thunk from 'redux-thunk';\r\nimport {compose} from 'recompose';\r\nimport {Router} from 'react-router-dom';\r\nimport history from './history';\r\n\r\nimport App from './components/app/app';\r\nimport {reducer, Operation, ActionCreator} from './reducer';\r\nimport createAPI from './api';\r\n\r\n\r\nconst init = () => {\r\n\r\n\tconst onUnauthorized = () => {\r\n\t\tstore.dispatch(ActionCreator.requireAuthorization(true));\r\n\t};\r\n\r\n\tconst api = createAPI(onUnauthorized);\r\n\r\n  const store = createStore(\r\n    reducer,\r\n    compose(\r\n      applyMiddleware(thunk.withExtraArgument(api)),\r\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ ?\r\n\t\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__():(f)=>f\r\n    )\r\n\t);\r\n\r\n  store.dispatch(Operation.loadHotels())\r\n\t\t.then(() => {\r\n\r\n\t\t\tconst city = store.getState().hotels[0].city;\r\n\r\n\t\t\tif (city) store.dispatch(ActionCreator.setCity(city));\r\n\t\t});\r\n//   store.dispatch(Operation.checkAuth());\r\n\r\n  ReactDom.render(\r\n    <Provider store={store}>\r\n\t\t\t<Router history={history}>\r\n\t\t\t\t<App/>\r\n\t\t\t</Router>\r\n    </Provider>,\r\n    document.getElementById(`root`)\r\n  );\r\n};\r\n\r\ninit();\r\n"],"sourceRoot":""}