{"version":3,"sources":["history.js","reducer.js","const.js","helpers/helpers.js","components/sorting-type/sorting-type.jsx","components/bookmark-button/bookmark-button.jsx","components/mark/mark.jsx","components/rating/rating.jsx","components/price/price.jsx","components/card/card.jsx","components/card-list/card-list.jsx","components/cities-list/cities-list.jsx","components/cities-no-places/cities-no-places.jsx","components/map/map.jsx","components/header/header.jsx","components/main/main.jsx","components/review/review.jsx","components/review-list/review-list.jsx","components/neighbourhood-list/neughbourhood-list.jsx","components/form-comments/form-comments.jsx","components/error-page/error-page.jsx","components/property-gallery/property-gallery.jsx","components/property-features/property-features.jsx","components/property-inside/property-inside.jsx","components/property-host/property-host.jsx","components/offer-property/offer-property.jsx","components/location-button/location-button.jsx","components/sign-in/sign-in.jsx","components/favorite-card/favorite-card.jsx","components/favorites-list/favorites-list.jsx","components/favorites/favorites.jsx","components/loader/loader.jsx","components/private-route/private-route.jsx","components/app/app.jsx","api.js","index.js"],"names":["history","createBrowserHistory","initialState","city","hotels","currentOffer","favoriteList","isAuthorizationRequired","currentUser","reviews","getFilteredLocalList","key","responseEmail","filtered","favoritesLocal","JSON","parse","localStorage","getItem","filter","it","email","ActionType","ActionCreator","type","payload","status","dataUser","offer","offerInd","length","findIndex","item","hotelId","getFavoriteIndexFromList","reducer","state","action","Object","assign","list","splice","Operation","dispatch","getState","api","get","then","response","data","catch","authData","post","window","back","id","BASE_URL","process","APP_ROUTE","LOGIN","ROOT","OFFER","FAVORITES","ERROR","LOCATION_BUTTON_CLASS","INPUT_LOGIN_CLASS","getIndex","items","i","toLowerCase","getActiveIconParams","width","height","iconUrl","iconSize","getIconParams","getAllOffers","arr","forEach","offers","push","getCityOffer","getCityOffers","setLS","name","setItem","stringify","getInputClassName","inputValue","inputValid","SortingType","props","handleClickToggle","setState","prevState","isOpen","handleClick","e","onChangeOption","document","querySelector","classList","remove","option","target","innerHTML","add","className","method","tabIndex","onClick","this","xlinkHref","React","PureComponent","propType","PropTypes","func","isRequired","size","prefix","BookmarkButton","onBookmarkClick","isActive","small","buttonClassActive","style","fill","stroke","Mark","isPremium","Rating","rating","currentRatingPersent","Price","price","Card","isFavorite","onMouseOver","onMouseLeave","is_premium","to","src","preview_image","alt","handleBookmarkClick","title","CardList","handleMouseOver","handleMouseLeave","map","Component","CitiesList","Fragment","color","backgroundColor","CitiesNoPlaces","Map","_initMap","cityCoord","icon","leaflet","zoom","center","zoomControl","marker","setView","tileLayer","attribution","addTo","mark","markers","coords","_changeIconsOnHover","_latlng","lat","lng","setIcon","prevProps","offerHover","off","visibility","defaultValue","Header","onLogoClick","location","pathname","Main","hoverItem","handleCityClick","onCityClick","handleSortOffers","sort","a","b","toggleBookmark","reload","index","cityOffer","cityOffers","connect","ownProps","Review","review","reviewDate","Date","date","toLocaleDateString","month","year","user","avatar_url","comment","dateTime","ReviewList","NeighbourhoodList","FormComments","validateForm","disabled","isRatingValid","isReviewValid","validateField","value","handleChange","clearForm","reset","handleSubmit","preventDefault","onSubmit","htmlFor","onChange","placeholder","textarea","ErrorPage","textDecoration","PropertyGallery","images","img","PropertyFeatures","bedrooms","max_adults","PropertyInside","goods","good","PropertyHost","host","is_pro","description","OfferProperty","getReviews","scrollTo","neighbourhoods","number","from","latLng","distanceTo","prev","next","slice","getNhoods","getCityCoord","submitReviewForm","marginBottom","match","params","LocationButton","onFavoriteCityClick","toUpperCase","SignIn","password","emailValid","passwordValid","formValid","max","Math","floor","random","isAuthRequired","required","FavoriteCard","FavoritesList","handleFavoriteCityClick","cityObj","ind","favorites","hotel","formatFavoriteList","arrayOfObject","cities","Set","obj","favorite","cityClick","href","Loader","PrivateRoute","component","rest","render","App","handleReload","isHotelsLoaded","handleOfferClick","activeOfferId","userList","login","exact","path","Favorites","setFavorites","favoritesList","setCurrentUser","createAPI","onUnauthorized","axios","create","baseURL","timeout","withCredentials","interceptors","use","error","store","createStore","compose","applyMiddleware","thunk","withExtraArgument","__REDUX_DEVTOOLS_EXTENSION__","f","ReactDom","getElementById","init"],"mappings":"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","file":"static/js/main.cca636bc.chunk.js","sourcesContent":["import {createBrowserHistory} from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","const initialState = {\r\n  city: ``,\r\n\thotels: [],\r\n\tcurrentOffer: {},\r\n\tfavoriteList: [],\r\n\tisAuthorizationRequired: true,\r\n\tcurrentUser: {},\r\n\treviews: [],\r\n};\r\n\r\nconst getFavoriteIndexFromList = (offer, favoriteList) => {\r\n\r\n\tif (!favoriteList.length) return -1;\r\n\r\n\treturn favoriteList.findIndex((item) => item.hotelId === offer.hotelId);\r\n};\r\n\r\nconst getFilteredLocalList = (key, responseEmail) => {\r\n\tlet filtered;\r\n\tlet favoritesLocal = JSON.parse(localStorage.getItem(key));\r\n\r\n\tif (favoritesLocal) {\r\n\t\tfiltered = favoritesLocal.filter((it) => it.currentUser.email === responseEmail);\r\n\t}\r\n\r\n\treturn filtered;\r\n};\r\n\r\nconst ActionType = {\r\n\tSET_CITY: `SET_CITY`,\r\n\tLOAD_HOTELS: `LOAD_HOTELS`,\r\n\tSET_CURRENT_OFFER: `SET_CURRENT_OFFER`,\r\n\tREQUIRE_AUTHORIZATION: `REQUIRE_AUTHORIZATION`,\r\n\tSET_CURRENT_USER: `SET_CURRENT_USER`,\r\n\tRELOAD_ALL: `RELOAD_ALL`,\r\n\tTOGGLE_FAVORITE: `TOGGLE_FAVORITE`,\r\n\tADD_FAVORITE: `ADD_FAVORITE`,\r\n\tREMOVE_FAVORITE: `REMOVE_FAVORITE`,\r\n\tSET_FAVORITES: `SET_FAVORITES`,\r\n\tSET_REVIEWS: `SET_REVIEWS`,\r\n};\r\n\r\nconst ActionCreator = {\r\n\r\n\tsetCity: (city) => ({\r\n\t\ttype: ActionType.SET_CITY,\r\n\t\tpayload: city,\r\n\t}),\r\n\r\n\tloadHotels: (hotels) => ({\r\n\t\ttype: ActionType.LOAD_HOTELS,\r\n\t\tpayload: hotels,\r\n\t}),\r\n\r\n\tsetCurrentOffer: (currentOffer) => ({\r\n\t\ttype: ActionType.SET_CURRENT_OFFER,\r\n\t\tpayload: currentOffer,\r\n\t}),\r\n\r\n\trequireAuthorization: (status) => ({\r\n\t\ttype: ActionType.REQUIRE_AUTHORIZATION,\r\n\t\tpayload: status,\r\n\t}),\r\n\r\n\tsetCurrentUser: (dataUser) => ({\r\n\t\ttype: ActionType.SET_CURRENT_USER,\r\n\t\tpayload: dataUser,\r\n\t}),\r\n\r\n\t// reloadAll: () => ({\r\n\t// \ttype: ActionType.RELOAD_ALL,\r\n\t// \tpayload: null,\r\n\t// }),\r\n\r\n\ttoggleFavorite: (offer, favoriteList) => {\r\n\r\n\t\tconst offerInd = getFavoriteIndexFromList(offer, favoriteList);\r\n\r\n\t\tif (offerInd < 0) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: `ADD_FAVORITE`,\r\n\t\t\t\tpayload: offer,\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttype: `REMOVE_FAVORITE`,\r\n\t\t\tpayload: offerInd,\r\n\t\t}\r\n\t},\r\n\r\n\tsetFavorites: (favoriteList) => ({\r\n\t\ttype: `SET_FAVORITES`,\r\n\t\tpayload: favoriteList,\r\n\t}),\r\n\r\n\tsetReviews: (reviews) => ({\r\n\t\ttype: `SET_REVIEWS`,\r\n\t\tpayload: reviews,\r\n\t}),\r\n};\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\r\n\tswitch (action.type) {\r\n\r\n\t\tcase ActionType.SET_CITY:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcity: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.LOAD_HOTELS:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\thotels: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_CURRENT_OFFER:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcurrentOffer: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.REQUIRE_AUTHORIZATION:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tisAuthorizationRequired: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_CURRENT_USER:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcurrentUser: action.payload,\r\n\t\t\t});\r\n\r\n\t\t// case ActionType.RELOAD_ALL:\r\n\t\t// \treturn Object.assign({}, state);\r\n\r\n\t\tcase ActionType.ADD_FAVORITE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: [...state.favoriteList, action.payload],\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.REMOVE_FAVORITE:\r\n\r\n\t\t\tlet list = [...state.favoriteList];\r\n\t\t\tlist.splice(action.payload, 1);\r\n\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: list,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_FAVORITES:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_REVIEWS:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\treviews: action.payload,\r\n\t\t\t});\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n};\r\n\r\nconst Operation = {\r\n\r\n\tloadHotels: () => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.get(`https://run.mocky.io/v3/c3ca7b37-068d-481a-a3f9-b4da256a5f3d`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tdispatch(ActionCreator.loadHotels(response.data));\r\n\t\t\t});\r\n\t},\r\n\r\n\t// reloadAll: () => (dispatch) => {\r\n\t//\r\n\t// \tdispatch(Operation.loadHotels())\r\n\t// \t\t.then(() => {\r\n\t// \t\t\tdispatch(ActionCreator.setCity('Paris'));\r\n\t// \t\t});\r\n\t//\r\n\t// \treturn null;\r\n\t// },\r\n\r\n\tcheckAuth: () => (dispatch, getState, api) => {\r\n\r\n\t\treturn api\r\n\t\t\t.get(`/login`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tdispatch(ActionCreator.setCurrentUser(response.data));\r\n\t\t\t\t\tdispatch(ActionCreator.requireAuthorization(false));\r\n\r\n\t\t\t\t\tconst filtered = getFilteredLocalList('favorites', response.data.email);\r\n\r\n\t\t\t\t\tif (filtered) dispatch(ActionCreator.setFavorites(filtered[0].favoriteList));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {});\r\n\t},\r\n\r\n\tlogin: (authData) => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.post(`/login`, authData)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tdispatch(ActionCreator.setCurrentUser(response.data));\r\n\t\t\t\t\tdispatch(ActionCreator.requireAuthorization(false));\r\n\r\n\t\t\t\t\tconst filtered = getFilteredLocalList('favorites', response.data.email);\r\n\r\n\t\t\t\t\tif (filtered) dispatch(ActionCreator.setFavorites(filtered[0].favoriteList));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => window.history.back())\r\n\t\t\t.catch(() => {});\r\n\t},\r\n\r\n\tgetReviews: (id) => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.get(`/comments/${id}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif(response.data) dispatch(ActionCreator.setReviews(response.data));\r\n\t\t\t})\r\n\t},\r\n\r\n};\r\nexport {\r\n\tActionCreator,\r\n\treducer,\r\n\tOperation,\r\n}\r\n","export const BASE_URL = process.env.PUBLIC_URL;\r\n\r\nexport const APP_ROUTE = {\r\n\tLOGIN: BASE_URL + `/login`,\r\n\tROOT: BASE_URL + `/`,\r\n\tOFFER: BASE_URL + `/offer/:id`,\r\n\tFAVORITES: BASE_URL +`/favorites`,\r\n\tERROR: BASE_URL + `*`,\r\n};\r\n\r\nexport const ICON_SIZE = 30;\r\n\r\nexport const NUMBER_NEIBOURHOODS = 3;\r\n\r\nexport const LOCATION_BUTTON_CLASS = {\r\n\tFAVORITES: `favorites__locations locations locations--current`,\r\n\tLOGIN: `locations locations--login locations--current`,\r\n};\r\n\r\nexport const INPUT_LOGIN_CLASS = {\r\n\tERROR: `input_error`,\r\n\tVALID: `input_valid`,\r\n};\r\n","import {ICON_SIZE, BASE_URL, INPUT_LOGIN_CLASS} from '../const';\r\nimport leaflet from 'leaflet';\r\n\r\nexport const getIndex = (items, city) => {\r\n\r\n\tfor (let i = 0; i < items.length; i++) {\r\n\r\n\t\tif (items[i].city.toLowerCase() === city.toLowerCase()) return i;\r\n\t}\r\n};\r\n\r\nexport const getCityCoord = (hotels, city) => {\r\n\r\n\tconst index = getIndex(hotels, city);\r\n\r\n\treturn hotels[index].coords;\r\n};\r\n\r\nexport const getActiveIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n\ticonUrl: BASE_URL +`/img/pin-active.svg`,\r\n\ticonSize: [width, height]\r\n});\r\n\r\nexport const getIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n\ticonUrl: BASE_URL + `/img/pin.svg`,\r\n\ticonSize: [width, height]\r\n});\r\n\r\nexport const getAllOffers = (state) => {\r\n\tlet arr = [];\r\n\r\n\tstate.hotels.forEach((item) => {\r\n\t\tif (item.offers.length) {\r\n\r\n\t\t\tfor(const offer of item.offers) arr.push(offer);\r\n\t\t}\r\n\t});\r\n\r\n\treturn arr;\r\n};\r\n\r\nexport const getCityOffer = (state, id) => {\r\n\r\n\treturn getAllOffers(state).filter((it) => it.hotelId === +id)[0];\r\n};\r\n\r\nexport const getCityOffers = (state, id) => {\r\n\tconst city = getCityOffer(state, id).city;\r\n\r\n\treturn getAllOffers(state).filter((it) => it.city === city);\r\n};\r\n\r\nexport const getNhoods = (offer, items, number) => {\r\n\r\n\tlet arr = [];\r\n\tconst from = leaflet.latLng(offer.coords);\r\n\r\n\tarr.push({\r\n\t\toffer: offer,\r\n\t\tlength: 0\r\n\t});\r\n\r\n\tfor (const it of items) {\r\n\r\n\t\tif (it.id !== offer.id) {\r\n\r\n\t\t\tlet to = leaflet.latLng(it.coords);\r\n\r\n\t\t\tarr.push({\r\n\t\t\t\toffer: it,\r\n\t\t\t\tlength: from.distanceTo(to)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tarr = arr.sort((prev, next) => prev.length - next.length);\r\n\r\n\tfor (let i = 0; i < arr.length; i++) {\r\n\t\tarr[i] = arr[i].offer;\r\n\t}\r\n\r\n\treturn arr.slice(1, number + 1);\r\n};\r\n\r\nexport const getLS = (name) => {\r\n\treturn JSON.parse(localStorage.getItem(name));\r\n};\r\n\r\nexport const setLS = (name, arr) => {\r\n\treturn localStorage.setItem(name, JSON.stringify(arr));\r\n};\r\n\r\nexport const getRandomInt = (max) => {\r\n\r\n\treturn Math.floor(Math.random() * Math.floor(max));\r\n};\r\n\r\nexport const \tgetInputClassName = (inputValue, inputValid) => {\r\n\r\n\tif (inputValid) return INPUT_LOGIN_CLASS.VALID;\r\n\r\n\tif (inputValue.length > 0) return INPUT_LOGIN_CLASS.ERROR;\r\n\r\n\treturn '';\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SortingType extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisOpen: false,\r\n\t\t\toption: `Popular`,\r\n\t\t}\r\n\t}\r\n\r\n\thandleClickToggle = () => {\r\n\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisOpen: !prevState.isOpen,\r\n\t\t}));\r\n\t};\r\n\r\n\thandleClick = (e) => {\r\n\r\n\t\tconst {onChangeOption} = this.props;\r\n\r\n\t\tdocument.querySelector('.places__option--active').classList.remove('places__option--active');\r\n\r\n\t\tthis.handleClickToggle();\r\n\t\tthis.setState({option: e.target.innerHTML});\r\n\r\n\t\te.target.classList.add('places__option--active');\r\n\r\n\t\tonChangeOption(e.target.innerHTML);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"places__sorting\" action=\"#\" method=\"get\">\r\n\t\t\t\t<span className=\"places__sorting-caption\">Sort by</span>\r\n\t\t\t\t<span className=\"places__sorting-type\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClickToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.state.option}\r\n\t\t\t\t\t<svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\r\n\t\t\t\t\t\t<use xlinkHref=\"#icon-arrow-select\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t\t<ul className={this.state.isOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t? `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t \t\t\t\t\t\t\t\t\tplaces__options--opened`\r\n\t\t\t\t\t\t\t\t\t\t\t\t: `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--closed`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<li className=\"places__option places__option--active\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPopular\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: low to high\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: high to low\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTop rated first\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSortingType.propType = {\r\n\tonChangeOption: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SortingType;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst size = {\r\n\tdefault: {\r\n\t\tprefix: `property`,\r\n\t\twidth: 31,\r\n\t\theight: 33,\r\n\t},\r\n\tsmall: {\r\n\t\tprefix: `place-card`,\r\n\t\twidth: 18,\r\n\t\theight: 19,\r\n\t}\r\n};\r\n\r\nconst BookmarkButton = (props) => {\r\n\r\n\tconst {onBookmarkClick, isActive, small} = props;\r\n\r\n\tconst prefix = small ? size.small.prefix : size.default.prefix;\r\n\tconst buttonClassActive = isActive ? `${prefix}__bookmark-button--active` : ``;\r\n\r\n\treturn (\r\n\t\t<button className={`${prefix}__bookmark-button ${buttonClassActive} button`}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={() => onBookmarkClick(small)}\r\n\t\t>\r\n\t\t\t<svg className={`${prefix}__bookmark-icon`}\r\n\r\n\t\t\t\t\t width={small ? size.small.width : size.default.width}\r\n\t\t\t\t\t height={small ? size.small.height : size.default.height}\r\n\t\t\t\t\t style={isActive ? {fill: `#4481c3`, stroke: `#4481c3`} : {fill: `none`,\r\n\t\t\t\t\t\t\t stroke: `#b8b8b8`}}\r\n\t\t\t>\r\n\t\t\t\t<use xlinkHref=\"#icon-bookmark\"/>\r\n\t\t\t</svg>\r\n\t\t\t<span className=\"visually-hidden\">To bookmarks</span>\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nBookmarkButton.propTypes = {\r\n\tisActive: PropTypes.bool,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default BookmarkButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Mark = (props) => {\r\n\r\n\tconst {isPremium, prefix} = props;\r\n\r\n\treturn isPremium ?\r\n\t\t<div className={`${prefix}__mark`}>\r\n\t\t\t<span>Premium</span>\r\n\t\t</div>\r\n\t\t: '';\r\n};\r\n\r\nMark.propTypes = {\r\n\tisPremium: PropTypes.bool.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Mark;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Rating = (props) => {\r\n\r\n\tconst {rating, prefix} = props;\r\n\r\n\tconst maxRatingPersent = 100;\r\n\tconst maxStars = 5;\r\n\tconst currentRatingPersent = rating * maxRatingPersent / maxStars;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__rating rating`}>\r\n\t\t\t<div className={`${prefix}__stars rating__stars`}>\r\n\t\t\t\t<span style={{width: currentRatingPersent + '%'}}/>\r\n\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t</div>\r\n\t\t\t{prefix === `property`\r\n\t\t\t\t? <span className={`${prefix}__rating-value rating__value`}>{rating}</span>\r\n\t\t\t\t: ``\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nRating.propTypes = {\r\n\trating: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Rating;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Price = (props) => {\r\n\r\n\tconst {price, prefix} = props;\r\n\r\n\treturn (\r\n\t\t<div className={`${prefix}__price`}>\r\n\t\t\t<b className={`${prefix}__price-value`}>&euro;{price}</b>\r\n\t\t\t<span className={`${prefix}__price-text`}>\r\n\t\t\t\t{prefix === `place-card` ? `/` : ``}&nbsp;night\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPrice.propTypes = {\r\n\tprice: PropTypes.number.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Price;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Mark from '../mark/mark';\r\nimport {BASE_URL} from '../../const';\r\nimport Rating from '../rating/rating';\r\nimport Price from '../price/price';\r\n\r\nconst Card = (props) => {\r\n\r\n  const {item, isFavorite} = props;\r\n\r\n\tconst handleClick = (e) => props.onClick(e);\r\n\tconst handleMouseOver = (e) => props.onMouseOver(e);\r\n\tconst handleMouseLeave = () => props.onMouseLeave();\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n  return (\r\n    <article className=\"cities__place-card place-card\"\r\n             id={item.id}\r\n             onMouseOver={() => handleMouseOver(item)}\r\n             onMouseLeave={handleMouseLeave}\r\n    >\r\n\r\n      <Mark\r\n        isPremium={item.is_premium}\r\n        prefix=\"place-card\"\r\n      />\r\n\r\n      <div className=\"cities__image-wrapper place-card__image-wrapper\">\r\n        <Link to={BASE_URL + `/offer/` + item.hotelId}\r\n              className=\"buttonLink\"\r\n              onClick={() => handleClick(item)}\r\n        >\r\n          <img className=\"place-card__image\" src={item.preview_image} width=\"260\" height=\"200\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n\r\n          <Price\r\n            price={item.price}\r\n            prefix=\"place-card\"\r\n          />\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={(small) => handleBookmarkClick(item, small)}\r\n            isActive={isFavorite}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n\r\n        <Rating\r\n          rating={item.rating}\r\n          prefix=\"place-card\"\r\n        />\r\n\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={BASE_URL + `/offer/${item.hotelId}`}\r\n                className=\"card__title buttonLink\"\r\n                onClick={() => handleClick(item)}\r\n          >{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onClick: PropTypes.func,\r\n  onMouseOver: PropTypes.func,\r\n  onMouseLeave: PropTypes.func,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Card from '../card/card';\r\n\r\nclass CardList extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst {items} = this.props.items;\r\n\r\n\t\tthis.state = {\r\n\t\t\titems: items,\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\thandleMouseOver = (item) => this.props.onMouseOver(item);\r\n\thandleMouseLeave = (e) => this.props.onMouseLeave(e);\r\n\thandleBookmarkClick = (offer, small) => this.props.onBookmarkClick(offer, small);\r\n\r\n\tisFavorite = (favoriteList, item) => {\r\n\r\n\t\tif (favoriteList) {\r\n\t\t\tlet isFavorite = favoriteList.filter((it) => it.hotelId === item.hotelId);\r\n\r\n\t\t\treturn !!isFavorite.length;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {items, favoriteList} = this.props;\r\n\r\n\t\treturn (\r\n\r\n\t\t\titems.map((item) => {\r\n\r\n\t\t\t\treturn <Card\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tkey={item.hotelId}\r\n\t\t\t\t\tisFavorite={this.isFavorite(favoriteList, item)}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t/>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCardList.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n};\r\n\r\nexport default CardList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst CitiesList = (props) => {\r\n\r\n\tconst {items, city, onClick} = props;\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<h1 className=\"visually-hidden\">Cities</h1>\r\n\t\t\t<div className=\"tabs\">\r\n\t\t\t\t<section className=\"locations container\">\r\n\t\t\t\t\t<ul className=\"locations__list tabs__list\">\r\n\r\n\t\t\t\t\t\t{items.map((it, i) => {\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li className=\"locations__item\"\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Link to={BASE_URL} className={ (it.city === city) ? `locations__item-link tabs__item buttonLink tabs__item--active`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `locations__item-link tabs__item buttonLink`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{color: '#000', backgroundColor: '#f5f5f5'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onClick(it.city)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span>{it.city}</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nCitiesList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n};\r\n\r\nexport default CitiesList;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst CitiesNoPlaces = (props) => {\r\n\r\n\tconst {city} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"cities__places-container cities__places-container--empty container\">\r\n\t\t\t<section className=\"cities__no-places\">\r\n\t\t\t\t<div className=\"cities__status-wrapper tabs__content\">\r\n\t\t\t\t\t<b className=\"cities__status\">No places to stay available</b>\r\n\t\t\t\t\t<p className=\"cities__status-description\">We could not find any property availbale at the moment in {city}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<div className=\"cities__right-section\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCitiesNoPlaces.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesNoPlaces;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport leaflet from 'leaflet';\r\n\r\nimport {getIconParams, getActiveIconParams} from '../../helpers/helpers';\r\n\r\nclass Map extends React.PureComponent {\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmap: null,\r\n\t\t\tmarkers: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\r\n\t\tconst {coords, items, offer} = this.props;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\telse {\r\n\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\r\n\t\tconst {coords, offerHover, items, offer} = this.props;\r\n\t\tconst {markers} = this.state;\r\n\r\n\t\tif (prevProps.offer !== offer) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\r\n\r\n\t\tif (prevProps.coords !== coords) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\r\n\t\tthis._changeIconsOnHover(offerHover, markers);\r\n\t}\r\n\r\n\t_initMap = (cityCoord, items, offer = null) => {\r\n\r\n\t\tconst city = cityCoord;\r\n\t\tlet icon = leaflet.icon(getIconParams());\r\n\t\tconst zoom = 12;\r\n\t\tconst map = leaflet.map('map', {\r\n\t\t\tcenter: city,\r\n\t\t\tzoom: zoom,\r\n\t\t\tzoomControl: false,\r\n\t\t\tmarker: true\r\n\t\t});\r\n\r\n\t\tmap.setView(city, zoom);\r\n\r\n\t\tleaflet.tileLayer(`https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png`, {\r\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n\t\t})\r\n\t\t\t.addTo(map);\r\n\r\n\t\tlet markers = [];\r\n\t\tlet mark;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\ticon = leaflet.icon(getActiveIconParams());\r\n\t\t\tmark = leaflet.marker(offer.coords, {icon});\r\n\t\t\tmark.addTo(map);\r\n\t\t}\r\n\r\n\t\tfor (const item of items) {\r\n\r\n\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\tmark = leaflet.marker(item.coords, {icon});\r\n\t\t\tmarkers.push(mark);\r\n\t\t}\r\n\r\n\t\tfor (const it of markers) {\r\n\t\t\tit.addTo(map);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmarkers: markers,\r\n\t\t\tmap: map\r\n\t\t});\r\n\t};\r\n\r\n\t_changeIconsOnHover = (offer, markers) => {\r\n\r\n\t\tfor (const it of markers) {\r\n\r\n\t\t\tlet icon;\r\n\r\n\t\t\tif (offer) {\r\n\t\t\t\tif (it._latlng.lat === offer.coords[0] &&\r\n\t\t\t\t\tit._latlng.lng === offer.coords[1]) {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams(35, 35));\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t}\r\n\t\t\tit.setIcon(icon);\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {items} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div id=\"map\"></div>\r\n\t\t\t\t<span style={{visibility: 'hidden'}} defaultValue={items}/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMap.propTypes = {\r\n\tcoords: PropTypes.array.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\toffer: PropTypes.object,\r\n\tofferHover: PropTypes.object,\r\n};\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst Header = (props) => {\r\n\r\n\tconst {isAuthorizationRequired, currentUser, onLogoClick} = props;\r\n\r\n\treturn (\r\n\t\t<header className=\"header\">\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"header__wrapper\">\r\n\t\t\t\t\t<div className=\"header__left\">\r\n\t\t\t\t\t\t<Link to={BASE_URL + `/`}\r\n\t\t\t\t\t\t\t\t\tclassName=\"header__logo-link buttonLink\"\r\n\t\t\t\t\t\t\t\t\tonClick={onLogoClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img className=\"header__logo\" src={BASE_URL + `/img/logo.svg`} alt=\"6 cities logo\" width=\"81\" height=\"41\"/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<nav className=\"header__nav\">\r\n\t\t\t\t\t\t<ul className=\"header__nav-list\">\r\n\t\t\t\t\t\t\t<li className=\"header__nav-item user\">\r\n\t\t\t\t\t\t\t\t<button className=\"header__nav-link header__nav-link--profile buttonLink\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"header__avatar-wrapper user__avatar-wrapper\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{!isAuthorizationRequired\r\n\t\t\t\t\t\t\t\t\t\t? <span className=\"header__user-name user__name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(window.location.pathname !== '/favorites') ? <Link to={BASE_URL + `/favorites`}>{currentUser.name}</Link> : currentUser.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t: <span className=\"header__login\">\r\n\t\t\t\t\t\t\t\t\t\t\t{(window.location.pathname !== '/login') ?\t<Link to={BASE_URL + `/login`}>Sign in</Link> : `Sign In`}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nHeader.propTypes = {\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object.isRequired,\r\n\tonLogoClick: PropTypes.func,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport SortingType from '../sorting-type/sorting-type';\r\nimport CardList from '../card-list/card-list';\r\nimport CitiesList from '../cities-list/cities-list';\r\nimport CitiesNoPlaces from '../cities-no-places/cities-no-places';\r\nimport Map from '../map/map';\r\nimport Header from '../header/header';\r\n\r\nimport {getIndex} from '../../helpers/helpers';\r\n\r\nclass Main extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffers: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst {city} = this.props;\r\n\r\n\t\tdocument.title = `6 cities - ${city}`;\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif (prevProps.city !== this.props.city) {\r\n\r\n\t\t\tthis.handleSortOffers('Popular');\r\n\t\t\tdocument.title = `6 cities - ${this.props.city}`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\r\n\t\tif(props.cityOffer !== state.offers) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffers: props.cityOffers\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\thandleSortOffers = (option) => {\r\n\r\n\t\tlet {offers} = this.state;\r\n\r\n\t\tswitch (option) {\r\n\r\n\t\t\tcase `Popular`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.id > b.id) return 1;\r\n\t\t\t\t\tif (a.id < b.id) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: low to high`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price > b.price) return 1;\r\n\t\t\t\t\tif (a.price < b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: high to low`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price < b.price) return 1;\r\n\t\t\t\t\tif (a.price > b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Top rated first`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.rating < b.rating) return 1;\r\n\t\t\t\t\tif (a.rating > b.rating) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t\tthis.setState({offers});\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\r\n\t\tconst {isAuthorizationRequired, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\r\n\t\t\twindow.location.assign('/login');\r\n\r\n\t\t} else{\r\n\r\n\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, city, currentUser, isAuthorizationRequired, reload, favoriteList} = this.props;\r\n\t\tconst index = getIndex(hotels, city);\r\n\t\tconst offers = hotels[index].offers;\r\n\t\tconst cityCoord = hotels[index].coords;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--main\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={reload}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className={offers.length ? 'page__main page__main--index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t : 'page__main page__main--index page__main--index-empty'}>\r\n\r\n\t\t\t\t\t<CitiesList items={hotels}\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCityClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"cities\">\r\n\r\n\t\t\t\t\t\t{offers.length ?\r\n\t\t\t\t\t\t\t<div className=\"cities__places-container container\">\r\n\t\t\t\t\t\t\t\t<section className=\"cities__places places\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"visually-hidden\">Places</h2>\r\n\t\t\t\t\t\t\t\t\t<b className=\"places__found\">{offers.length} places to stay in {city}</b>\r\n\r\n\t\t\t\t\t\t\t\t\t<SortingType\r\n\t\t\t\t\t\t\t\t\t\tkey={city}\r\n\t\t\t\t\t\t\t\t\t\tonChangeOption={this.handleSortOffers}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"cities__places-list places__list tabs__content\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<CardList\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\titems={offers}\r\n\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<div className=\"cities__right-section\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"cities_map map\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\t\t\t\titems={offers}\r\n\t\t\t\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t: <CitiesNoPlaces city={city}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMain.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tonOfferClick: PropTypes.func,\r\n\tonCityClick: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\t// const {id} = ownProps.match.params;\r\n\t//\r\n\treturn Object.assign({}, ownProps, {\r\n\t// \tid,\r\n\t// \tcity: getCityOffer(state, id).city,\r\n\t// \thotels: state.hotels,\r\n\t// \tcityOffer: getCityOffer(state, id),\r\n\t// \tcityOffers: getCityOffers(state, id),\r\n\t// \tfavoriteList: state.favoriteList,\r\n\t\t// isAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\t// currentUser: state.currentUser,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {Main}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Review = (props) => {\r\n\r\n\tconst {review} = props;\r\n\r\n\tconst rating = review.rating * 20;\r\n\tconst reviewDate = new Date(review.date).toLocaleDateString('en-US', {\r\n\t\tmonth: 'long',\r\n\t\tyear: 'numeric',\r\n\t});\r\n\r\n\treturn (\r\n\t\t<li className=\"reviews__item\">\r\n\t\t\t<div className=\"reviews__user user\">\r\n\t\t\t\t<div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\r\n\t\t\t\t\t<img className=\"reviews__avatar user__avatar\" src={review.user.avatar_url} width=\"54\" height=\"54\" alt=\"Reviews avatar\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className=\"reviews__user-name\">{review.user.name}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"reviews__info\">\r\n\t\t\t\t<div className=\"reviews__rating rating\">\r\n\t\t\t\t\t<div className=\"reviews__stars rating__stars\">\r\n\t\t\t\t\t\t<span style={{width: rating + '%'}}/>\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"reviews__text\">\r\n\t\t\t\t\t{review.comment}\r\n\t\t\t\t</p>\r\n\t\t\t\t<time className=\"reviews__time\" dateTime={review.date}>{reviewDate}</time>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\nReview.propTypes = {\r\n\treview: PropTypes.object.isRequired\r\n};\r\n\r\nexport default Review;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Review from '../review/review';\r\n\r\nconst ReviewList = (props) => {\r\n\r\n\tconst {reviews} = props;\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t<h2 className=\"reviews__title\">\r\n\t\t\tReviews &middot; <span className=\"reviews__amount\">{reviews.length}</span>\r\n\t\t</h2>\r\n\t\t<ul className=\"reviews__list\">\r\n\r\n\t\t\t{reviews.map((it) => {\r\n\t\t\t\treturn <Review\r\n\t\t\t\t\treview={it}\r\n\t\t\t\t\tkey={it.id}\r\n\t\t\t\t\t/>\r\n\t\t\t})}\r\n\r\n\t\t</ul>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nReviewList.propTypes = {\r\n\treviews: PropTypes.array.isRequired\r\n};\r\n\r\nexport default ReviewList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CardList from '../card-list/card-list';\r\n\r\nconst NeighbourhoodList = (props) => {\r\n\r\n\tconst {items, city, favoriteList} = props;\r\n\r\n\tconst handleClick = (item) => props.onClick(item);\r\n\tconst handleMouseOver = (item) => props.onMouseOver(item);\r\n\tconst handleMouseLeave = (e) => props.onMouseLeave(e);\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n\treturn <CardList\r\n\t\tcity={city}\r\n\t\titems={items}\r\n\t\tfavoriteList={favoriteList}\r\n\t\tonClick={handleClick}\r\n\t\tonMouseOver={handleMouseOver}\r\n\t\tonMouseLeave={handleMouseLeave}\r\n\t\tonBookmarkClick={handleBookmarkClick}\r\n\t/>\r\n};\r\n\r\nNeighbourhoodList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func.isRequired,\r\n\tonMouseLeave: PropTypes.func.isRequired\r\n};\r\n\r\nexport default NeighbourhoodList;\r\n","import React from 'react';\r\n\r\nclass FormComments extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\trating: '',\r\n\t\t\treview: '',\r\n\t\t\tisRatingValid: false,\r\n\t\t\tisReviewValid: false,\r\n\t\t\tdisabled: true,\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateForm = () => {\r\n\r\n\t\tthis.setState({\r\n\t\t\tdisabled: !(this.state.isRatingValid && this.state.isReviewValid),\r\n\t\t});\r\n\t};\r\n\r\n\tvalidateField = (name, value) => {\r\n\r\n\t\tlet {isRatingValid, isReviewValid} = this.state;\r\n\t\tconst minValue = 50;\r\n\t\tconst maxValue = 200;\r\n\r\n\t\tswitch (name) {\r\n\r\n\t\t\tcase `rating`: isRatingValid = value.length > 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase `review`: isReviewValid\t= value.length >= minValue && value.length <= maxValue;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tisRatingValid,\r\n\t\t\tisReviewValid\r\n\t\t}, () => this.validateForm());\r\n\t};\r\n\r\n\thandleChange = (e) => {\r\n\r\n\t\tconst {name, value} = e.target;\r\n\r\n\t\tthis.setState({[name]: value}, () => this.validateField(name, value));\r\n\t};\r\n\r\n\tclearForm = (e) => {\r\n\r\n\t\te.target.reset();\r\n\r\n\t\tthis.setState({\r\n\t\t\trating: '',\r\n\t\t\treview: '',\r\n\t\t\tisRatingValid: false,\r\n\t\t\tisReviewValid: false,\r\n\t\t\tdisabled: true,\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = (e) => {\r\n\r\n\t\te.preventDefault();\r\n\t\tthis.clearForm(e);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"reviews__form form\"\r\n\t\t\t\t\t\taction=\"#\"\r\n\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t>\r\n\t\t\t\t<label className=\"reviews__label form__label\" htmlFor=\"review\">Your review</label>\r\n\t\t\t\t<div className=\"reviews__rating-form form__rating\">\r\n\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t value=\"5\"\r\n\t\t\t\t\t\t\t\t id=\"5-stars\"\r\n\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"5-stars\" className=\"reviews__rating-label form__rating-label\" title=\"perfect\">\r\n\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t value=\"4\"\r\n\t\t\t\t\t\t\t\t\t id=\"4-stars\"\r\n\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"4-stars\" className=\"reviews__rating-label form__rating-label\" title=\"good\">\r\n\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t value=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t id=\"3-stars\"\r\n\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"3-stars\" className=\"reviews__rating-label form__rating-label\" title=\"not bad\">\r\n\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t\t value=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\t id=\"2-stars\"\r\n\t\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"2-stars\" className=\"reviews__rating-label form__rating-label\" title=\"badly\">\r\n\t\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t id=\"1-star\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"1-star\" className=\"reviews__rating-label form__rating-label\" title=\"terribly\">\r\n\t\t\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<textarea className=\"reviews__textarea form__textarea\" id=\"review\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Tell how was your stay, what you like and what can be improved\"\r\n\t\t\t\t\t\t\t\t\tname=\"review\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.textarea}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"reviews__button-wrapper\">\r\n\t\t\t\t\t<p className=\"reviews__help\">\r\n\t\t\t\t\t\tTo submit review please make sure to set <span className=\"reviews__star\">rating</span> and describe your stay with at least <b className=\"reviews__text-amount\">50 characters</b>.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<button className=\"reviews__submit form__submit button\" type=\"submit\"\r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nFormComments.propTypes = {\r\n};\r\n\r\nexport default FormComments;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst ErrorPage = () => {\r\n\r\n\treturn (\r\n\t\t<main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t<section className=\"favorites favorites--empty\">\r\n\t\t\t\t\t<h1 className=\"visually-hidden\">404 error</h1>\r\n\t\t\t\t\t<div className=\"favorites__status-wrapper\">\r\n\t\t\t\t\t\t<b className=\"favorites__status\">404 error</b>\r\n\t\t\t\t\t\t<p className=\"favorites__status-description\">\r\n\t\t\t\t\t\t\tPage not found. Go to the <Link to={BASE_URL + `/`}><span style={{textDecoration: 'underline'}}>main</span></Link> page\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n\r\nexport default ErrorPage;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './property-gallery.css';\r\n\r\nconst PropertyGallery = (props) => {\r\n\r\n\tconst {images} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__gallery-container container\">\r\n\t\t\t<div className=\"property__gallery\">\r\n\r\n\t\t\t\t{images.map((img, i) =>\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t<div className=\"property__image-wrapper\" key={img}>\r\n\t\t\t\t\t\t\t<img className=\"property__image\" src={img} alt={`studio${i}`}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyGallery.propTypes = {\r\n\timages: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default PropertyGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyFeatures = (props) => {\r\n\r\n\tconst {offer} = props;\r\n\r\n\treturn (\r\n\t\t<ul className=\"property__features\">\r\n\t\t\t<li className=\"property__feature property__feature--entire\">\r\n\t\t\t\tEntire place\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--bedrooms\">\r\n\t\t\t\t{offer.bedrooms} Bedrooms\r\n\t\t\t</li>\r\n\t\t\t<li className=\"property__feature property__feature--adults\">\r\n\t\t\t\tMax {offer.max_adults} adults\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nPropertyFeatures.propTypes = {\r\n\toffer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyFeatures;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PropertyInside = (props) => {\r\n\r\n\tconst {goods} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__inside\">\r\n\t\t\t<h2 className=\"property__inside-title\">What&apos;s inside</h2>\r\n\t\t\t<ul className=\"property__inside-list\">\r\n\r\n\t\t\t\t{ goods.map((good) =>\r\n\t\t\t\t\t<li className=\"property__inside-item\" key={good}>\r\n\t\t\t\t\t\t{good}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyInside.propTypes = {\r\n\tgoods: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default PropertyInside;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst PropertyHost = (props) => {\r\n\r\n\tconst {offer} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"property__host\">\r\n\t\t\t<h2 className=\"property__host-title\">Meet the host</h2>\r\n\t\t\t<div className=\"property__host-user user\">\r\n\t\t\t\t<div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\r\n\t\t\t\t\t<img className=\"property__avatar user__avatar\" src={BASE_URL + `/` + offer.host.avatar_url} width=\"74\"\r\n\t\t\t\t\t\t\t height=\"74\" alt=\"Host avatar\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className=\"property__user-name\">{offer.host.name}</span>\r\n\t\t\t\t<span className=\"property__user-status\">{offer.host.is_pro ? `Pro` : ``}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"property__description\">\r\n\t\t\t\t<p className=\"property__text\">{offer.description}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nPropertyHost.propTypes = {\r\n\toffer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PropertyHost;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator, Operation} from '../../reducer';\r\n\r\nimport ReviewList from '../review-list/review-list';\r\nimport Map from '../map/map';\r\nimport NeghbourhoodList from '../neighbourhood-list/neughbourhood-list';\r\nimport FormComments from '../form-comments/form-comments';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Header from '../header/header';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport Mark from '../mark/mark';\r\nimport PropertyGallery from '../property-gallery/property-gallery';\r\nimport Rating from '../rating/rating';\r\nimport PropertyFeatures from '../property-features/property-features';\r\nimport PropertyInside from '../property-inside/property-inside';\r\nimport Price from '../price/price';\r\nimport PropertyHost from '../property-host/property-host';\r\n\r\nimport {getCityCoord, getCityOffer, getCityOffers, getNhoods} from '../../helpers/helpers';\r\nimport {BASE_URL, NUMBER_NEIBOURHOODS} from '../../const';\r\n\r\nclass OfferProperty extends React.PureComponent{\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffer: this.props.cityOffer\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst {cityOffer, getReviews} = this.props;\r\n\r\n\t\tdocument.title = `${cityOffer.city} - ${cityOffer.title}`;\r\n\r\n\t\tgetReviews();\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif(prevProps.cityOffer !== this.props.cityOffer) {\r\n\r\n\t\t\twindow.scrollTo(0,0);\r\n\t\t\tdocument.title = `${this.props.cityOffer.city} - ${this.props.cityOffer.title}`;\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick = (item) => this.setState({offer: item}, () => this.props.onClick(item));\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\tisFavorite = () => {\r\n\r\n\t\tconst {cityOffer, favoriteList} = this.props;\r\n\r\n\t\tif (!favoriteList.length) return false;\r\n\r\n\t\treturn favoriteList.findIndex((item) => item.hotelId === cityOffer.hotelId) >= 0;\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\t\tconst {isAuthorizationRequired, cityOffer, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\r\n\t\t\twindow.location.assign(`${BASE_URL}/login`);\r\n\r\n\t\t} else{\r\n\r\n\t\t\tif (small) {\r\n\t\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t\t} else {\r\n\t\t\t\ttoggleBookmark(cityOffer, favoriteList);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {hotels, cityOffers, city, currentUser, isAuthorizationRequired, favoriteList, reviews} = this.props;\r\n\t\tconst {offer} = this.state;\r\n\r\n\t\tif (!offer) return <ErrorPage/>;\r\n\r\n\t\tconst neighbourhoods = getNhoods(offer, cityOffers, NUMBER_NEIBOURHOODS);\r\n\t\tconst cityCoord = getCityCoord(hotels, city);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--property\">\r\n\t\t\t\t\t<section className=\"property\">\r\n\r\n\t\t\t\t\t\t<PropertyGallery\r\n\t\t\t\t\t\t\timages={offer.images}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"property__container container\">\r\n\t\t\t\t\t\t\t<div className=\"property__wrapper\">\r\n\r\n\t\t\t\t\t\t\t\t<Mark\r\n\t\t\t\t\t\t\t\t\tisPremium={offer.is_premium}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"property__name-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"property__name\">\r\n\t\t\t\t\t\t\t\t\t\t{offer.title}\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\t\t\t\t\tisActive={this.isFavorite()}\r\n\t\t\t\t\t\t\t\t\t\tonBookmarkClick={(small) => this.handleBookmarkClick(offer, small)}\r\n\t\t\t\t\t\t\t\t\t\tsmall={false}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\trating={offer.rating}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyFeatures\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Price\r\n\t\t\t\t\t\t\t\t\tprice={offer.price}\r\n\t\t\t\t\t\t\t\t\tprefix=\"property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyInside\r\n\t\t\t\t\t\t\t\t\tgoods={offer.goods}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<PropertyHost\r\n\t\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<section className=\"property__reviews reviews\">\r\n\r\n\t\t\t\t\t\t\t\t\t<ReviewList reviews={reviews}/>\r\n\r\n\t\t\t\t\t\t\t\t\t{!isAuthorizationRequired\r\n\t\t\t\t\t\t\t\t\t\t? <FormComments\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={this.submitReviewForm}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section className=\"property_map map\" style={{height: 579 + 'px', marginBottom: 50 + 'px'}}>\r\n\r\n\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<section className=\"near-places places\">\r\n\t\t\t\t\t\t\t<h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\r\n\t\t\t\t\t\t\t<div className=\"near-places__list places__list\">\r\n\r\n\t\t\t\t\t\t\t\t<NeghbourhoodList\r\n\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOfferProperty.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffer: PropTypes.object.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\tconst {id} = ownProps.match.params;\r\n\r\n\treturn Object.assign({}, ownProps, {\r\n\t\tid,\r\n\t\tcity: getCityOffer(state, id).city,\r\n\t\thotels: state.hotels,\r\n\t\tcityOffer: getCityOffer(state, id),\r\n\t\tcityOffers: getCityOffers(state, id),\r\n\t\tfavoriteList: state.favoriteList,\r\n\t\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\tcurrentUser: state.currentUser,\r\n\t\treviews: state.reviews,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n\r\n\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n\tgetReviews: () => dispatch(Operation.getReviews(ownProps.match.params.id)),\r\n});\r\n\r\nexport {OfferProperty}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferProperty);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL, LOCATION_BUTTON_CLASS} from '../../const';\r\n\r\nconst LocationButton = (props) => {\r\n\r\n\tconst {city, onFavoriteCityClick, prefix} = props;\r\n\r\n\tconst handleFavotiteCityClick = () => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<div className={LOCATION_BUTTON_CLASS[prefix.toUpperCase()]}>\r\n\t\t\t<div className=\"locations__item\">\r\n\t\t\t\t<Link to={BASE_URL} className=\"locations__item-link buttonLink\"\r\n\t\t\t\t\t\t\tonClick={handleFavotiteCityClick}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{city}</span>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nLocationButton.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\tonFavoriteCityClick: PropTypes.func.isRequired,\r\n\tprefix: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LocationButton;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Header from '../header/header';\r\nimport LocationButton from '../location-button/location-button';\r\nimport {getRandomInt, getInputClassName} from '../../helpers/helpers';\r\nimport './sign-in.css';\r\n\r\n\r\nclass SignIn extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcity: '',\r\n\t\t\temail: '',\r\n\t\t\tpassword: '',\r\n\t\t\temailValid: false,\r\n\t\t\tpasswordValid: false,\r\n\t\t\tformValid: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst {hotels} = this.props;\r\n\r\n\t\tdocument.title = `6 cities - sign in`;\r\n\r\n\t\tthis.setState(() => ({\r\n\t\t\tcity: hotels[getRandomInt(hotels.length)].city,\r\n\t\t}));\r\n\t}\r\n\r\n\thandleSubmit = (e) => {\r\n\r\n\t\tconst {onSubmit} = this.props;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tonSubmit({\r\n\t\t\temail: this.state.email,\r\n\t\t\tpassword: this.state.password,\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tvalidateField = (name, value) => {\r\n\r\n\t\tlet emailValid = this.state.emailValid;\r\n\t\tlet passwordValid = this.state.passwordValid;\r\n\t\tconst minPassLength = 6;\r\n\t\tconst maxPassLength = 12;\r\n\r\n\t\tswitch (name) {\r\n\r\n\t\t\tcase `email`: emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `password`: passwordValid = value.length >= minPassLength && value.length <= maxPassLength;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\temailValid,\r\n\t\t\tpasswordValid\r\n\t\t}, this.validateForm);\r\n\t};\r\n\r\n\tvalidateForm = () => {\r\n\t\tthis.setState({\r\n\t\t\tformValid: this.state.emailValid && this.state.passwordValid,\r\n\t\t});\r\n\t};\r\n\r\n\thandleChange = (e) => {\r\n\r\n\t\tconst value = e.target.value;\r\n\t\tconst name = e.target.name;\r\n\r\n\t\tthis.setState( {[name]: value}, () => {this.validateField(name, value)} );\r\n\t};\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, isAuthRequired, currentUser} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--login\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={() => this.handleCityClick(hotels[0].city)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--login\">\r\n\t\t\t\t\t<div className=\"page__login-container container\">\r\n\t\t\t\t\t\t<section className=\"login\">\r\n\t\t\t\t\t\t\t<h1 className=\"login__title\">Sign in</h1>\r\n\t\t\t\t\t\t\t<form className=\"login__form form\"\r\n\t\t\t\t\t\t\t\t\t\taction=\"#\"\r\n\t\t\t\t\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"login__input-wrapper form__input-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"visually-hidden\">E-mail</label>\r\n\t\t\t\t\t\t\t\t\t<input className={`login__input form__input ${getInputClassName(this.state.email, this.state.emailValid)}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t required=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value={this.state.email}\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"login__input-wrapper form__input-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"visually-hidden\">Password</label>\r\n\t\t\t\t\t\t\t\t\t<input className={`login__input form__input ${getInputClassName(this.state.password, this.state.passwordValid)}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t required=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value={this.state.password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"login__submit form__submit button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.formValid}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSign in\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={this.state.city}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={this.handleCityClick}\r\n\t\t\t\t\t\t\tprefix=\"login\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSignIn.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tonSubmit: PropTypes.func.isRequired,\r\n\tonCityClick: PropTypes.func.isRequired,\r\n\tcurrentUser: PropTypes.object.isRequired,\r\n\tisAuthRequired: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default SignIn;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {BASE_URL} from '../../const';\r\nimport Rating from '../rating/rating';\r\nimport Mark from '../mark/mark';\r\nimport Price from '../price/price';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\n\r\nconst FavoriteCard = (props) => {\r\n\r\n\tconst {item} = props;\r\n\r\n\tconst handleBookmarkClick = () => props.onBookmarkClick(props.item);\r\n\r\n\treturn (\r\n\t\t<article className=\"favorites__card place-card\">\r\n\r\n\t\t\t<Mark\r\n\t\t\t\tisPremium={item.is_premium}\r\n\t\t\t\tprefix=\"place-card\"\r\n\t\t\t/>\r\n\r\n\t\t\t<div className=\"favorites__image-wrapper place-card__image-wrapper\">\r\n\t\t\t\t<Link to={BASE_URL + `/offer/` + item.hotelId} className=\"buttonLink\">\r\n\t\t\t\t\t<img className=\"place-card__image\" src={item.preview_image} width=\"150\" height=\"110\" alt=\"Place\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"favorites__card-info place-card__info\">\r\n\t\t\t\t<div className=\"place-card__price-wrapper\">\r\n\r\n\t\t\t\t\t<Price\r\n\t\t\t\t\t\tprice={item.price}\r\n\t\t\t\t\t\tprefix=\"place-card\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\tisActive={true}\r\n\t\t\t\t\t\tsmall={true}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Rating\r\n\t\t\t\t\trating={item.rating}\r\n\t\t\t\t\tprefix=\"place-card\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<h2 className=\"place-card__name\">\r\n\t\t\t\t\t<Link to={BASE_URL + `/offer/` + item.hotelId} className=\"card__title buttonLink\">{item.title}</Link>\r\n\t\t\t\t</h2>\r\n\t\t\t\t<p className=\"place-card__type\">{item.type}</p>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nFavoriteCard.propTypes = {\r\n\titem: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default FavoriteCard;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LocationButton from '../location-button/location-button';\r\nimport FavoriteCard from '../favorite-card/favorite-card';\r\n\r\nconst FavoritesList = (props) => {\r\n\r\n\tconst {favoriteList, onBookmarkClick, onFavoriteCityClick} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => onBookmarkClick(item);\r\n\r\n\tconst handleFavoriteCityClick = (city) => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<ul className=\"favorites__list\">\r\n\r\n\t\t\t{favoriteList.map((cityObj, ind) => {\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li className=\"favorites__locations-items\" key={cityObj.city + ind}>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={cityObj.city}\r\n\t\t\t\t\t\t\tkey={cityObj.city + ind}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\tprefix=\"favorites\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"favorites__places\">\r\n\r\n\t\t\t\t\t\t\t{cityObj.favorites.map((hotel) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<FavoriteCard\r\n\t\t\t\t\t\t\t\t\t\t\titem={hotel}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={hotel.hotelId}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nFavoritesList.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tonBookmarkClick: PropTypes.func.isRequired,\r\n\tonFavoriteCityClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FavoritesList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport FavoritesList from '../favorites-list/favorites-list';\r\nimport Header from '../header/header';\r\nimport {BASE_URL} from '../../const';\r\n\r\nconst formatFavoriteList = (arrayOfObject) => {\r\n\r\n\tlet cities = new Set();\r\n\tlet arr = [];\r\n\tlet obj = {\r\n\t\tcity: '',\r\n\t\tfavorites: [],\r\n\t};\r\n\r\n\tarrayOfObject.forEach((it) => cities.add(it.city));\r\n\r\n\tfor(const city of cities) {\r\n\r\n\t\tfor(const favorite of arrayOfObject) {\r\n\r\n\t\t\tif (city === favorite.city) {\r\n\r\n\t\t\t\tobj.city = city;\r\n\t\t\t\tobj.favorites.push(favorite);\r\n\t\t\t}\r\n\t\t}\r\n\t\tarr.push(obj);\r\n\t\tobj = {\r\n\t\t\tcity: '',\r\n\t\t\tfavorites: [],\r\n\t\t};\r\n\t}\r\n\treturn arr;\r\n};\r\n\r\nconst Favorites = (props) => {\r\n\r\n\tconst {favoriteList, toggleBookmark, cityClick, isAuthRequired, currentUser} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => toggleBookmark(item, favoriteList);\r\n\r\n\tconst handleFavoriteCityClick = (city) => cityClick(city);\r\n\r\n\tdocument.title = `6 cities - favorites`;\r\n\r\n\treturn (\r\n\t\t<div className={`page ${!favoriteList.length ? `page--favorites-empty` : ``}`}>\r\n\r\n\t\t\t<Header\r\n\t\t\t\tisAuthorizationRequired={isAuthRequired}\r\n\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t/>\r\n\r\n\t\t\t{favoriteList.length\r\n\t\t\t\t? <main className=\"page__main page__main--favorites\">\r\n\t\t\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t\t\t<section className=\"favorites\">\r\n\t\t\t\t\t\t\t<h1 className=\"favorites__title\">Saved listing</h1>\r\n\r\n\t\t\t\t\t\t\t<FavoritesList\r\n\t\t\t\t\t\t\t\tfavoriteList={formatFavoriteList(favoriteList)}\r\n\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t\t: <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n\t\t\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t\t\t<section className=\"favorites favorites--empty\">\r\n\t\t\t\t\t\t\t<h1 className=\"visually-hidden\">Favorites (empty)</h1>\r\n\t\t\t\t\t\t\t<div className=\"favorites__status-wrapper\">\r\n\t\t\t\t\t\t\t\t<b className=\"favorites__status\">Nothing yet saved.</b>\r\n\t\t\t\t\t\t\t\t<p className=\"favorites__status-description\">Save properties to narrow down search or plan yor future\r\n\t\t\t\t\t\t\t\t\ttrips.</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t}\r\n\t\t\t<footer className=\"footer\">\r\n\t\t\t\t<Link to={BASE_URL} className=\"footer__logo-link\" href=\"main.html\">\r\n\t\t\t\t\t<img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"64\" height=\"33\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</footer>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nFavorites.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tisAuthRequired: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\treturn Object.assign({}, ownProps, {});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\tcityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {Favorites}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites);","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\r\n\treturn (\r\n\t\t<div id=\"preloader\">\r\n\t\t\t<div id=\"loader\"/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nconst PrivateRoute = ({component: Component, isAuthRequired, ...rest}) => (\r\n\t<Route {...rest} render={(props) => (\r\n\t\tisAuthRequired === false\r\n\t\t\t? <Component {...rest} {...props}/>\r\n\t\t\t: <Redirect to='/'/>\r\n\t)}/>\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {Switch, Route} from 'react-router-dom';\r\n\r\nimport {ActionCreator, Operation} from '../../reducer';\r\nimport {getIndex, getLS, setLS} from '../../helpers/helpers';\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nimport Main from '../main/main';\r\nimport OfferProperty from '../offer-property/offer-property';\r\nimport SignIn from '../sign-in/sign-in';\r\nimport Favorites from '../favorites/favorites';\r\nimport Loader from '../loader/loader';\r\nimport ErrorPage from '../error-page/error-page';\r\nimport PrivateRoute from '../private-route/private-route';\r\n\r\nclass App extends React.PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n\t\t\tactiveOfferId: {},\r\n\t\t\tisHotelsLoaded: false,\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n\r\n  \tconst {hotels, currentUser, favoriteList} = this.props;\r\n\r\n\t\tif (prevProps.hotels !== hotels) {\r\n\t\t\tthis.setState({isHotelsLoaded: true});\r\n\t\t}\r\n\r\n\t\tif (currentUser && prevProps.favoriteList !== favoriteList) {\r\n\r\n\t\t\tlet userList = [];\r\n\t\t\tlet filtered;\r\n\t\t\tconst data = {currentUser, favoriteList};\r\n\r\n\t\t\tlet favoritesLocal = getLS('favorites');\r\n\r\n\t\t\tif (favoritesLocal) {\r\n\r\n\t\t\t\tfiltered = favoritesLocal.filter((it) => it.currentUser.email !== currentUser.email);\r\n\r\n\t\t\t\tfiltered.push(data);\r\n\t\t\t\tsetLS('favorites', filtered);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuserList.push(data);\r\n\t\t\t\tsetLS('favorites', userList);\r\n\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n\r\n\thandleReload = () => {\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisHotelsLoaded: !prevState.isHotelsLoaded,\r\n\t\t}), () => window.location.reload());\r\n\t};\r\n\r\n\thandleOfferClick = (item) => {\r\n\r\n\t\treturn this.setState({activeOfferId: item.id});\r\n\t};\r\n\r\n  render() {\r\n\r\n\t\tconst {hotels, city, currentUser, isAuthorizationRequired, favoriteList, cityClick, login} = this.props;\r\n\r\n\t\tlet cityOffers;\r\n\r\n\t\tif (this.state.isHotelsLoaded && city) {\r\n\r\n\t\t\tcityOffers = hotels[getIndex(hotels, city)].offers;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\tthis.state.isHotelsLoaded && city\r\n\t\t\t\t? <Switch>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.ROOT}>\r\n\t\t\t\t\t\t\t\t<Main\r\n\t\t\t\t\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t\t\t\t\tcityOffers={cityOffers}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleOfferClick}\r\n\t\t\t\t\t\t\t\t\tonCityClick={cityClick}\r\n\t\t\t\t\t\t\t\t\treload={this.handleReload}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.LOGIN}>\r\n\t\t\t\t\t\t\t\t<SignIn\r\n\t\t\t\t\t\t\t\t\thotels={hotels}\r\n\t\t\t\t\t\t\t\t\tonSubmit={login}\r\n\t\t\t\t\t\t\t\t\tonCityClick={cityClick}\r\n\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\t\tisAuthRequired={isAuthorizationRequired}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<PrivateRoute exact path={APP_ROUTE.FAVORITES}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={Favorites}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisAuthRequired={isAuthorizationRequired}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}/>\r\n\t\t\t\t\t\t\t<Route path={APP_ROUTE.OFFER}\r\n\t\t\t\t\t\t\t\t\t\t render={(props) => <OfferProperty {...props}/>}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={APP_ROUTE.ERROR} component={ErrorPage}/>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t: <Loader/>\r\n\t\t);\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  city: PropTypes.string.isRequired,\r\n  cityClick: PropTypes.func.isRequired,\r\n\tisAuthorizationRequires: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object,\r\n\tlogin: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => Object.assign({}, ownProps, {\r\n  city: state.city,\r\n  hotels: state.hotels,\r\n\tcurrentOffer: state.currentOffer,\r\n\tfavoriteList: state.favoriteList,\r\n\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\tcurrentUser: state.currentUser,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\tcityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\tlogin: (authData) => dispatch(Operation.login(authData)),\r\n\tsetFavorites: (favoritesList) => dispatch(ActionCreator.setFavorites(favoritesList)),\r\n\tsetCurrentUser: (currentUser) => dispatch(ActionCreator.setCurrentUser(currentUser)),\r\n});\r\n\r\nexport {App};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import axios from 'axios';\r\n\r\nconst createAPI = (onUnauthorized) => {\r\n\r\n\tconst api = axios.create({\r\n\t\tbaseURL: `https://es31-server.appspot.com/six-cities`,\r\n\t\ttimeout: 1000 * 5,\r\n\t\twithCredentials: true,\r\n\t});\r\n\r\n\tconst onSuccess = (response) => response;\r\n\r\n\tconst onFail = (error) => {\r\n\r\n\t\tif (error.response.status === 403) {\r\n\r\n\t\t\tonUnauthorized();\r\n\t\t}\r\n\r\n\t\treturn error;\r\n\t};\r\n\r\n\tapi.interceptors.response.use(onSuccess, onFail);\r\n\r\n\treturn api;\r\n};\r\n\r\nexport default createAPI;\r\n","import {createStore, applyMiddleware} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport thunk from 'redux-thunk';\r\nimport {compose} from 'recompose';\r\nimport {Router} from 'react-router-dom';\r\nimport history from './history';\r\n\r\nimport App from './components/app/app';\r\nimport {reducer, Operation, ActionCreator} from './reducer';\r\nimport createAPI from './api';\r\n\r\n\r\nconst init = () => {\r\n\r\n\tconst onUnauthorized = () => {\r\n\t\tstore.dispatch(ActionCreator.requireAuthorization(true));\r\n\t};\r\n\r\n\tconst api = createAPI(onUnauthorized);\r\n\r\n  const store = createStore(\r\n    reducer,\r\n    compose(\r\n      applyMiddleware(thunk.withExtraArgument(api)),\r\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ ?\r\n\t\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__():(f)=>f\r\n    )\r\n\t);\r\n\r\n  store.dispatch(Operation.loadHotels())\r\n\t\t.then(() => {\r\n\r\n\t\t\tconst city = store.getState().hotels[0].city;\r\n\r\n\t\t\tif (city) store.dispatch(ActionCreator.setCity(city));\r\n\t\t});\r\n  store.dispatch(Operation.checkAuth());\r\n\r\n  ReactDom.render(\r\n    <Provider store={store}>\r\n\t\t\t<Router history={history}>\r\n\t\t\t\t<App/>\r\n\t\t\t</Router>\r\n    </Provider>,\r\n    document.getElementById(`root`)\r\n  );\r\n};\r\n\r\ninit();\r\n"],"sourceRoot":""}