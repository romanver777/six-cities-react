{"version":3,"sources":["history.js","reducer.js","const.js","helpers/helpers.js","components/sorting-type/sorting-type.jsx","components/bookmark-button/bookmark-button.jsx","components/card/card.jsx","components/card-list/card-list.jsx","components/cities-list/cities-list.jsx","components/cities-no-places/cities-no-places.jsx","components/map/map.jsx","components/header/header.jsx","components/main/main.jsx","components/review/review.jsx","components/review-list/review-list.jsx","components/neighbourhood-list/neughbourhood-list.jsx","components/form-comments/form-comments.jsx","components/offer-property/offer-property.jsx","components/sign-in/sign-in.jsx","components/location-button/location-button.jsx","components/favorite-card/favorite-card.jsx","components/favorites-list/favorites-list.jsx","components/favorites/favorites.jsx","components/loader/loader.jsx","components/app/app.jsx","api.js","index.js"],"names":["history","createBrowserHistory","initialState","city","hotels","currentOffer","favoriteList","isAuthorizationRequired","currentUser","getFilteredLocalList","key","responseEmail","filtered","favoritesLocal","JSON","parse","localStorage","getItem","filter","it","email","ActionType","ActionCreator","type","payload","status","dataUser","offer","offerInd","length","findIndex","item","hotelId","getFavoriteIndexFromList","reducer","state","action","Object","assign","list","splice","Operation","loadHotels","dispatch","getState","api","get","then","response","data","reloadAll","checkAuth","catch","login","authData","post","window","back","APP_ROUTE","getIndex","items","i","toLowerCase","getActiveIconParams","width","height","iconUrl","iconSize","getIconParams","getAllOffers","arr","forEach","offers","push","getCityOffer","id","getCityOffers","setLS","name","setItem","stringify","SortingType","props","handleClickToggle","setState","prevState","isOpen","handleClick","e","onChangeOption","document","querySelector","classList","remove","option","target","innerHTML","add","className","method","tabIndex","onClick","this","xlinkHref","React","PureComponent","propType","PropTypes","func","isRequired","size","prefix","BookmarkButton","onBookmarkClick","isActive","small","buttonClassActive","style","fill","stroke","Card","isFavorite","onMouseOver","onMouseLeave","mark","to","src","img","alt","price","priceText","handleBookmarkClick","title","CardList","handleMouseOver","handleMouseLeave","map","Component","CitiesList","Fragment","color","backgroundColor","CitiesNoPlaces","Map","_initMap","cityCoord","icon","leaflet","zoom","center","zoomControl","marker","setView","tileLayer","attribution","addTo","markers","coords","_changeIconsOnHover","_latlng","lat","lng","setIcon","prevProps","offerHover","off","visibility","defaultValue","Header","onLogoClick","Main","hoverItem","handleCityClick","onCityClick","handleSortOffers","sort","a","b","rating","toggleBookmark","location","reload","index","cityOffer","cityOffers","connect","ownProps","Review","review","ava","text","dateTime","date","ReviewList","reviews","NeighbourhoodList","FormComments","validateForm","disabled","isRatingValid","isReviewValid","validateField","value","handleChange","clearForm","reset","handleSubmit","onSubmit","preventDefault","htmlFor","onChange","placeholder","textarea","OfferProperty","scrollTo","neighbourhoods","number","from","latLng","distanceTo","prev","next","slice","getNhoods","getCityCoord","submitReviewForm","marginBottom","match","params","SignIn","password","emailValid","passwordValid","formValid","isAuthRequired","required","LocationButton","onFavoriteCityClick","FavoriteCard","FavoritesList","handleFavoriteCityClick","cityObj","ind","favorites","hotel","formatFavoriteList","arrayOfObject","cities","Set","obj","favorite","cityClick","href","Loader","App","handleReload","isHotelsLoaded","handleOfferClick","activeOfferId","userList","exact","path","render","setFavorites","favoritesList","setCurrentUser","createAPI","onUnauthorized","axios","create","baseURL","timeout","withCredentials","interceptors","use","error","store","createStore","compose","applyMiddleware","thunk","withExtraArgument","__REDUX_DEVTOOLS_EXTENSION__","f","ReactDom","getElementById","init"],"mappings":"6RAIeA,EAFCC,c,QCFVC,EAAe,CACpBC,KAAK,GACLC,OAAQ,GACRC,aAAc,GACdC,aAAc,GACdC,yBAAyB,EACzBC,YAAa,IAURC,EAAuB,SAACC,EAAKC,GAClC,IAAIC,EACAC,EAAiBC,KAAKC,MAAMC,aAAaC,QAAQP,IAMrD,OAJIG,IACHD,EAAWC,EAAeK,QAAO,SAACC,GAAD,OAAQA,EAAGX,YAAYY,QAAUT,MAG5DC,GAGFS,EACI,WADJA,EAEO,cAFPA,EAGa,oBAHbA,EAIiB,wBAJjBA,EAKY,mBALZA,EAMM,aANNA,EAQQ,eARRA,EASW,kBATXA,EAUS,gBAGTC,EAEI,SAACnB,GAAD,MAAW,CACnBoB,KAAMF,EACNG,QAASrB,IAJLmB,EAOO,SAAClB,GAAD,MAAa,CACxBmB,KAAMF,EACNG,QAASpB,IATLkB,EAYY,SAACjB,GAAD,MAAmB,CACnCkB,KAAMF,EACNG,QAASnB,IAdLiB,EAiBiB,SAACG,GAAD,MAAa,CAClCF,KAAMF,EACNG,QAASC,IAnBLH,EAsBW,SAACI,GAAD,MAAe,CAC9BH,KAAMF,EACNG,QAASE,IAxBLJ,EAgCW,SAACK,EAAOrB,GAEvB,IAAMsB,EAjEyB,SAACD,EAAOrB,GAExC,OAAKA,EAAauB,OAEXvB,EAAawB,WAAU,SAACC,GAAD,OAAUA,EAAKC,UAAYL,EAAMK,YAF7B,EA+DhBC,CAAyBN,EAAOrB,GAEjD,OAAIsB,EAAW,EACP,CACNL,KAAK,eACLC,QAASG,GAGJ,CACNJ,KAAK,kBACLC,QAASI,IA5CNN,EAgDS,SAAChB,GAAD,MAAmB,CAChCiB,KAAK,gBACLC,QAASlB,IAKL4B,EAAU,WAAmC,IAAlCC,EAAiC,uDAAzBjC,EAAckC,EAAW,uCAEjD,OAAQA,EAAOb,MAEd,KAAKF,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/BhC,KAAMiC,EAAOZ,UAGf,KAAKH,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/B/B,OAAQgC,EAAOZ,UAGjB,KAAKH,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/B9B,aAAc+B,EAAOZ,UAGvB,KAAKH,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/B5B,wBAAyB6B,EAAOZ,UAGlC,KAAKH,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/B3B,YAAa4B,EAAOZ,UAGtB,KAAKH,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,GAE1B,KAAKd,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/B7B,aAAa,GAAD,mBAAM6B,EAAM7B,cAAZ,CAA0B8B,EAAOZ,YAG/C,KAAKH,EAEJ,IAAIkB,EAAI,YAAOJ,EAAM7B,cAGrB,OAFAiC,EAAKC,OAAOJ,EAAOZ,QAAS,GAErBa,OAAOC,OAAO,GAAIH,EAAO,CAC/B7B,aAAciC,IAGhB,KAAKlB,EACJ,OAAOgB,OAAOC,OAAO,GAAIH,EAAO,CAC/B7B,aAAc8B,EAAOZ,UAGvB,QAAS,OAAOW,IAIZM,EAAY,CAEjBC,WAAY,kBAAM,SAACC,EAAUC,EAAUC,GAEtC,OAAOA,EAAIC,IAAJ,mDACLC,MAAK,SAACC,GACNL,EAASrB,EAAyB0B,EAASC,YAI9CC,UAAW,kBAAM,SAACP,GAOjB,OALAA,EAASF,EAAUC,cACjBK,MAAK,WACLJ,EAASrB,EAAsB,aAG1B,OAGR6B,UAAW,kBAAM,SAACR,EAAUC,EAAUC,GAErC,OAAOA,EACLC,IADK,UAELC,MAAK,SAACC,GACN,GAAIA,EAASC,KAAM,CAClBN,EAASrB,EAA6B0B,EAASC,OAC/CN,EAASrB,GAAmC,IAE5C,IAAMV,EAAWH,EAAqB,YAAauC,EAASC,KAAK7B,OAE7DR,GAAU+B,EAASrB,EAA2BV,EAAS,GAAGN,mBAG/D8C,OAAM,iBAGTC,MAAO,SAACC,GAAD,OAAc,SAACX,EAAUC,EAAUC,GAEzC,OAAOA,EAAIU,KAAJ,SAAmBD,GACxBP,MAAK,SAACC,GACN,GAAIA,EAASC,KAAM,CAClBN,EAASrB,EAA6B0B,EAASC,OAC/CN,EAASrB,GAAmC,IAE5C,IAAMV,EAAWH,EAAqB,YAAauC,EAASC,KAAK7B,OAE7DR,GAAU+B,EAASrB,EAA2BV,EAAS,GAAGN,mBAG/DyC,MAAK,kBAAMS,OAAOxD,QAAQyD,UAC1BL,OAAM,kB,QCzMGM,EACN,SADMA,EAEP,IAFOA,EAGN,aAHMA,EAIF,a,iBCDEC,EAAW,SAACC,EAAOzD,GAE/B,IAAK,IAAI0D,EAAI,EAAGA,EAAID,EAAM/B,OAAQgC,IAEjC,GAAID,EAAMC,GAAG1D,KAAK2D,gBAAkB3D,EAAK2D,cAAe,OAAOD,GAWpDE,EAAsB,eAACC,EAAD,uDDXV,GCW8BC,EAApB,uDDXV,GCWU,MAA4C,CAC9EC,QAAQ,sBACRC,SAAU,CAACH,EAAOC,KAGNG,EAAgB,eAACJ,EAAD,uDDhBJ,GCgBwBC,EAApB,uDDhBJ,GCgBI,MAA4C,CACxEC,QAAQ,eACRC,SAAU,CAACH,EAAOC,KAGbI,EAAe,SAAClC,GACrB,IAAImC,EAAM,GASV,OAPAnC,EAAM/B,OAAOmE,SAAQ,SAACxC,GACrB,GAAIA,EAAKyC,OAAO3C,OAAQ,CAAC,IAAD,gBAEJE,EAAKyC,QAFD,IAEvB,IAAI,EAAJ,0BAAU7C,EAAV,QAAgC2C,EAAIG,KAAK9C,IAFlB,mCAMlB2C,GAGKI,EAAe,SAACvC,EAAOwC,GAEnC,OAAON,EAAalC,GAAOjB,QAAO,SAACC,GAAD,OAAQA,EAAGa,WAAa2C,KAAI,IAGlDC,EAAgB,SAACzC,EAAOwC,GACpC,IAAMxE,EAAOuE,EAAavC,EAAOwC,GAAIxE,KAErC,OAAOkE,EAAalC,GAAOjB,QAAO,SAACC,GAAD,OAAQA,EAAGhB,OAASA,MAsC1C0E,EAAQ,SAACC,EAAMR,GAC3B,OAAOtD,aAAa+D,QAAQD,EAAMhE,KAAKkE,UAAUV,K,6BCrF5CW,G,kDAEL,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IAQPC,kBAAoB,WAEnB,EAAKC,UAAS,SAACC,GAAD,MAAgB,CAC7BC,QAASD,EAAUC,YAZF,EAgBnBC,YAAc,SAACC,GAAO,IAEdC,EAAkB,EAAKP,MAAvBO,eAEPC,SAASC,cAAc,2BAA2BC,UAAUC,OAAO,0BAEnE,EAAKV,oBACL,EAAKC,SAAS,CAACU,OAAQN,EAAEO,OAAOC,YAEhCR,EAAEO,OAAOH,UAAUK,IAAI,0BAEvBR,EAAeD,EAAEO,OAAOC,YAxBxB,EAAK7D,MAAQ,CACZmD,QAAQ,EACRQ,OAAO,WALU,E,qDAgClB,OACC,0BAAMI,UAAU,kBAAkB9D,OAAO,IAAI+D,OAAO,OACnD,0BAAMD,UAAU,2BAAhB,WACA,0BAAMA,UAAU,uBAAuBE,SAAS,IAC7CC,QAASC,KAAKnB,mBAEfmB,KAAKnE,MAAM2D,OACZ,yBAAKI,UAAU,wBAAwBlC,MAAM,IAAIC,OAAO,KACvD,yBAAKsC,UAAU,yBAGjB,wBAAIL,UAAWI,KAAKnE,MAAMmD,OAAX,kPAQd,wBAAIY,UAAU,wCAAwCE,SAAS,IAC7DC,QAASC,KAAKf,aADhB,WAKA,wBAAIW,UAAU,iBAAiBE,SAAS,IACtCC,QAASC,KAAKf,aADhB,sBAKA,wBAAIW,UAAU,iBAAiBE,SAAS,IACtCC,QAASC,KAAKf,aADhB,sBAKA,wBAAIW,UAAU,iBAAiBE,SAAS,IACtCC,QAASC,KAAKf,aADhB,yB,GApEqBiB,IAAMC,eA+EhCxB,GAAYyB,SAAW,CACtBjB,eAAgBkB,KAAUC,KAAKC,YAGjB5B,UCnFT6B,GACI,CACRC,OAAO,WACP/C,MAAO,GACPC,OAAQ,IAJJ6C,GAME,CACNC,OAAO,aACP/C,MAAO,GACPC,OAAQ,IAmCK+C,GA/BQ,SAAC9B,GAAW,IAE3B+B,EAAoC/B,EAApC+B,gBAAiBC,EAAmBhC,EAAnBgC,SAAUC,EAASjC,EAATiC,MAE5BJ,EAASI,EAAQL,GAAWC,OAASD,GAAaC,OAClDK,EAAoBF,EAAQ,UAAMH,EAAN,gCAElC,OACC,4BAAQb,UAAS,UAAKa,EAAL,6BAAgCK,EAAhC,WACb7F,KAAK,SACL8E,QAAS,kBAAMY,EAAgBE,KAElC,yBAAKjB,UAAS,UAAKa,EAAL,mBAEX/C,MAAOmD,EAAQL,GAAW9C,MAAQ8C,GAAa9C,MAC/CC,OAAQkD,EAAQL,GAAW7C,OAAS6C,GAAa7C,OACjDoD,MAAOH,EAAW,CAACI,KAAK,UAAYC,OAAO,WAAc,CAACD,KAAK,OAC7DC,OAAO,YAEX,yBAAKhB,UAAU,oBAEhB,0BAAML,UAAU,mBAAhB,kBCuCYsB,GAtEF,SAACtC,GAAW,IAEhBnD,EAAoBmD,EAApBnD,KAAM0F,EAAcvC,EAAduC,WAERlC,EAAc,SAACC,GAAD,OAAON,EAAMmB,QAAQb,IAKxC,OACE,6BAASU,UAAU,gCACVvB,GAAI5C,EAAK4C,GACT+C,YAAa,kBAPAlC,EAOsBzD,EAPhBmD,EAAMwC,YAAYlC,GAAzB,IAACA,GAQbmC,aAPa,kBAAMzC,EAAMyC,iBAS9B5F,EAAK6F,KAEH,yBAAK1B,UAAU,oBACb,8BAAOnE,EAAK6F,OAEd,KAEJ,yBAAK1B,UAAU,mDACb,kBAAC,IAAD,CAAM2B,GAAE,iBAAY9F,EAAKC,SACnBkE,UAAU,aACVG,QAAS,kBAAMd,EAAYxD,KAE/B,yBAAKmE,UAAU,oBAAoB4B,IAAK,IAAM/F,EAAKgG,IAAK/D,MAAM,MAAMC,OAAO,MAAM+D,IAAI,YAGzF,yBAAK9B,UAAU,oBACb,yBAAKA,UAAU,6BACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,2BAAb,SAA8CnE,EAAKkG,OACnD,0BAAM/B,UAAU,0BAAhB,QAAqDnE,EAAKmG,YAG5D,kBAAC,GAAD,CACEjB,gBAAiB,SAACE,GAAD,OA/BA,SAACxF,EAAOwF,GAAR,OAAkBjC,EAAM+B,gBAAgBtF,EAAOwF,GA+BpCgB,CAAoBpG,EAAMoF,IACtDD,SAAUO,EACVN,OAAO,KAIX,yBAAKjB,UAAU,6BACb,yBAAKA,UAAU,mCACb,0BAAMmB,MAAO,CAACrD,MAAO,SACrB,0BAAMkC,UAAU,mBAAhB,YAGJ,wBAAIA,UAAU,oBACZ,kBAAC,IAAD,CAAM2B,GAAE,iBAAY9F,EAAKC,SACnBkE,UAAU,yBACVG,QAAS,kBAAMd,EAAYxD,KAC/BA,EAAKqG,QAET,uBAAGlC,UAAU,oBAAoBnE,EAAKR,SCH/B8G,G,kDArDd,WAAYnD,GAAQ,IAAD,uBAClB,cAAMA,IASPK,YAAc,SAACxD,GAAD,OAAU,EAAKmD,MAAMmB,QAAQtE,IAVxB,EAWnBuG,gBAAkB,SAACvG,GAAD,OAAU,EAAKmD,MAAMwC,YAAY3F,IAXhC,EAYnBwG,iBAAmB,SAAC/C,GAAD,OAAO,EAAKN,MAAMyC,aAAanC,IAZ/B,EAanB2C,oBAAsB,SAACxG,EAAOwF,GAAR,OAAkB,EAAKjC,MAAM+B,gBAAgBtF,EAAOwF,IAbvD,EAenBM,WAAa,SAACnH,EAAcyB,GAE3B,GAAIzB,EAGH,QAFiBA,EAAaY,QAAO,SAACC,GAAD,OAAQA,EAAGa,UAAYD,EAAKC,WAE7CH,QApBH,IAEX+B,EAAS,EAAKsB,MAAMtB,MAApBA,MAFW,OAIlB,EAAKzB,MAAQ,CACZyB,MAAOA,GALU,E,qDAwBT,IAAD,SACsB0C,KAAKpB,MAA5BtB,EADC,EACDA,MAAOtD,EADN,EACMA,aAEd,OAECsD,EAAM4E,KAAI,SAACzG,GAEV,OAAO,kBAAC,GAAD,CACNA,KAAMA,EACNrB,IAAKqB,EAAKC,QACVyF,WAAY,EAAKA,WAAWnH,EAAcyB,GAC1CsE,QAAS,EAAKd,YACdmC,YAAa,EAAKY,gBAClBX,aAAc,EAAKY,iBACnBtB,gBAAiB,EAAKkB,6B,GAxCJ3B,IAAMiC,WCyCdC,GAzCI,SAACxD,GAAW,IAEvBtB,EAAwBsB,EAAxBtB,MAAOzD,EAAiB+E,EAAjB/E,KAAMkG,EAAWnB,EAAXmB,QAEpB,OACC,kBAAC,IAAMsC,SAAP,KACC,wBAAIzC,UAAU,mBAAd,UACA,yBAAKA,UAAU,QACd,6BAASA,UAAU,uBAClB,wBAAIA,UAAU,8BAEZtC,EAAM4E,KAAI,SAACrH,EAAI0C,GAEf,OACC,wBAAIqC,UAAU,kBACZxF,IAAKmD,GAEN,kBAAC,IAAD,CAAMgE,GAAG,IAAI3B,UAAa/E,EAAGhB,OAASA,EAAb,6GAEpBkH,MAAO,CAACuB,MAAO,OAAQC,gBAAiB,WACxCxC,QAAS,kBAAMA,EAAQlF,EAAGhB,OAC1BO,IAAKmD,GAET,8BAAO1C,EAAGhB,gBCHL2I,GArBQ,SAAC5D,GAAW,IAE3B/E,EAAQ+E,EAAR/E,KAEP,OACC,yBAAK+F,UAAU,sEACd,6BAASA,UAAU,qBAClB,yBAAKA,UAAU,wCACd,uBAAGA,UAAU,kBAAb,+BACA,uBAAGA,UAAU,8BAAb,6DAAqG/F,KAGvG,yBAAK+F,UAAU,4BCgIH6C,G,kDAtId,WAAa7D,GAAQ,IAAD,8BACnB,cAAOA,IA2CR8D,SAAW,SAACC,EAAWrF,GAAyB,IAAlBjC,EAAiB,uDAAT,KAE/BxB,EAAO8I,EACTC,EAAOC,IAAQD,KAAK9E,KAClBgF,EAAO,GACPZ,EAAMW,IAAQX,IAAI,MAAO,CAC9Ba,OAAQlJ,EACRiJ,KAAMA,EACNE,aAAa,EACbC,QAAQ,IAGTf,EAAIgB,QAAQrJ,EAAMiJ,GAElBD,IAAQM,UAAR,2EAA8F,CAC7FC,YAAa,sJAEZC,MAAMnB,GAER,IACIZ,EADAgC,EAAU,GAGVjI,IAEHuH,EAAOC,IAAQD,KAAKnF,MACpB6D,EAAOuB,IAAQI,OAAO5H,EAAMkI,OAAQ,CAACX,UAChCS,MAAMnB,IA1BkC,oBA6B3B5E,GA7B2B,IA6B9C,2BAA0B,CAAC,IAAhB7B,EAAe,QAEzBmH,EAAOC,IAAQD,KAAK9E,KACpBwD,EAAOuB,IAAQI,OAAOxH,EAAK8H,OAAQ,CAACX,SACpCU,EAAQnF,KAAKmD,IAjCgC,8BAoC9C,cAAiBgC,EAAjB,eAA0B,CAArB,IAAMzI,EAAE,KACZA,EAAGwI,MAAMnB,GAGV,EAAKpD,SAAS,CACbwE,QAASA,EACTpB,IAAKA,KAtFa,EA0FpBsB,oBAAsB,SAACnI,EAAOiI,GAAa,IAAD,gBAExBA,GAFwB,IAEzC,2BAA0B,CAAC,IAAhBzI,EAAe,QAErB+H,OAAI,EAMNA,EAJEvH,GACCR,EAAG4I,QAAQC,MAAQrI,EAAMkI,OAAO,IACnC1I,EAAG4I,QAAQE,MAAQtI,EAAMkI,OAAO,GAEzBV,IAAQD,KAAK9E,EAAc,GAAI,KAQhC+E,IAAQD,KAAK9E,KAErBjD,EAAG+I,QAAQhB,IApB6B,gCAvFzC,EAAK/G,MAAQ,CACZqG,IAAK,KACLoB,QAAS,IALS,E,gEASE,IAAD,EAEWtD,KAAKpB,MAA7B2E,EAFa,EAEbA,OAAQjG,EAFK,EAELA,MAAOjC,EAFF,EAEEA,MAElBA,EAEH2E,KAAK0C,SAASa,EAAQjG,EAAOjC,GAG7B2E,KAAK0C,SAASa,EAAQjG,K,yCAIJuG,GAAY,IAAD,EAEa7D,KAAKpB,MAAzC2E,EAFuB,EAEvBA,OAAQO,EAFe,EAEfA,WAAYxG,EAFG,EAEHA,MAAOjC,EAFJ,EAEIA,MAC3BiI,EAAWtD,KAAKnE,MAAhByH,QAEHO,EAAUxI,QAAUA,IAEvB2E,KAAKnE,MAAMqG,IAAI6B,MACf/D,KAAKnE,MAAMqG,IAAI3C,SACfS,KAAK0C,SAASa,EAAQjG,EAAOjC,IAG1BwI,EAAUN,SAAWA,IAExBvD,KAAKnE,MAAMqG,IAAI6B,MACf/D,KAAKnE,MAAMqG,IAAI3C,SACfS,KAAK0C,SAASa,EAAQjG,IAGvB0C,KAAKwD,oBAAoBM,EAAYR,K,+BAyE3B,IAEHhG,EAAS0C,KAAKpB,MAAdtB,MAEP,OACC,kBAAC,IAAM+E,SAAP,KACC,yBAAKhE,GAAG,QACR,0BAAM0C,MAAO,CAACiD,WAAY,UAAWC,aAAc3G,S,GA3HrC4C,IAAMC,eC6CT+D,GAhDA,SAACtF,GAAW,IAEnB3E,EAAqD2E,EAArD3E,wBAAyBC,EAA4B0E,EAA5B1E,YAAaiK,EAAevF,EAAfuF,YAE7C,OACC,4BAAQvE,UAAU,UACjB,yBAAKA,UAAU,aACd,yBAAKA,UAAU,mBACd,yBAAKA,UAAU,gBACd,kBAAC,IAAD,CAAM2B,GAAG,IACN3B,UAAU,+BACVG,QAASoE,GAEX,yBAAKvE,UAAU,eAAe4B,IAAI,gBAAgBE,IAAI,gBAAgBhE,MAAM,KAAKC,OAAO,SAG1F,yBAAKiC,UAAU,eACd,wBAAIA,UAAU,oBACb,wBAAIA,UAAU,yBACb,4BAAQA,UAAU,yDACjB,yBAAKA,UAAU,gDAGb3F,EAIC,0BAAM2F,UAAU,iBACd,kBAAC,IAAD,CAAM2B,GAAG,UAAT,YAJF,0BAAM3B,UAAU,gCACd,kBAAC,IAAD,CAAM2B,GAAG,cAAcrH,EAAYsE,eCf3C4F,G,kDAEL,WAAYxF,GAAQ,IAAD,8BAClB,cAAMA,IA6BPK,YAAc,SAACxD,GAAD,OAAU,EAAKmD,MAAMmB,QAAQtE,IA9BxB,EAgCnBuG,gBAAkB,SAACvG,GAAD,OAAU,EAAKqD,UAAS,SAACC,GAE1C,OAAQA,EAAUsF,YAAc5I,EAAQ,CAAC4I,UAAW5I,GAAQ,SAlC1C,EAqCnBwG,iBAAmB,kBAAM,EAAKnD,SAAS,CAACuF,UAAW,QArChC,EAuCnBC,gBAAkB,SAACzK,GAAD,OAAU,EAAK+E,MAAM2F,YAAY1K,IAvChC,EAyCnB2K,iBAAmB,SAAChF,GAAY,IAE1BtB,EAAU,EAAKrC,MAAfqC,OAEL,OAAQsB,GAEP,IAAI,UACHtB,EAAOuG,MAAK,SAACC,EAAGC,GAEf,OAAID,EAAErG,GAAKsG,EAAEtG,GAAW,EACpBqG,EAAErG,GAAKsG,EAAEtG,IAAY,EAClB,KAER,MAED,IAAI,qBACHH,EAAOuG,MAAK,SAACC,EAAGC,GAEf,OAAID,EAAE/C,MAAQgD,EAAEhD,MAAc,EAC1B+C,EAAE/C,MAAQgD,EAAEhD,OAAe,EACxB,KAER,MAED,IAAI,qBACHzD,EAAOuG,MAAK,SAACC,EAAGC,GAEf,OAAID,EAAE/C,MAAQgD,EAAEhD,MAAc,EAC1B+C,EAAE/C,MAAQgD,EAAEhD,OAAe,EACxB,KAER,MAED,IAAI,kBACHzD,EAAOuG,MAAK,SAACC,EAAGC,GAEf,OAAID,EAAEE,OAASD,EAAEC,OAAe,EAC5BF,EAAEE,OAASD,EAAEC,QAAgB,EAC1B,KAER,MAED,QAAS,OAAO,KAGjB,EAAK9F,SAAS,CAACZ,YAtFG,EAyFnB2D,oBAAsB,SAACxG,EAAOwF,GAAW,IAAD,EAEyB,EAAKjC,MAA9D3E,EAFgC,EAEhCA,wBAAyB4K,EAFO,EAEPA,eAAgB7K,EAFT,EAESA,aAE5CC,EAEHiD,OAAO4H,SAAS9I,OAAO,UAIvB6I,EAAexJ,EAAOrB,IAhGvB,EAAK6B,MAAQ,CACZwI,UAAW,KACXnG,OAAQ,IALS,E,+DASA2F,GAEdA,EAAUhK,OAASmG,KAAKpB,MAAM/E,MAEjCmG,KAAKwE,iBAAiB,a,+BA0Fd,IAAD,EAE2ExE,KAAKpB,MAAjF9E,EAFC,EAEDA,OAAQD,EAFP,EAEOA,KAAMK,EAFb,EAEaA,YAAaD,EAF1B,EAE0BA,wBAAyB8K,EAFnD,EAEmDA,OAAQ/K,EAF3D,EAE2DA,aAC7DgL,EAAQ3H,EAASvD,EAAQD,GACzBqE,EAASpE,EAAOkL,GAAO9G,OACvByE,EAAY7I,EAAOkL,GAAOzB,OAEhC,OACC,yBAAK3D,UAAU,8BAEd,kBAAC,GAAD,CACC3F,wBAAyBA,EACzBC,YAAaA,EACbiK,YAAaY,IAGd,0BAAMnF,UAAW1B,EAAO3C,OAAS,+BACf,wDAEjB,kBAAC,GAAD,CAAY+B,MAAOxD,EACbD,KAAMA,EACNkG,QAASC,KAAKsE,kBAGpB,yBAAK1E,UAAU,UAEb1B,EAAO3C,OACP,yBAAKqE,UAAU,sCACd,6BAASA,UAAU,yBAClB,wBAAIA,UAAU,mBAAd,UACA,uBAAGA,UAAU,iBAAiB1B,EAAO3C,OAArC,sBAAgE1B,GAEhE,kBAAC,GAAD,CACCO,IAAKP,EACLsF,eAAgBa,KAAKwE,mBAGtB,yBAAK5E,UAAU,kDAEd,kBAAC,GAAD,CACC/F,KAAMA,EACNyD,MAAOY,EACPlE,aAAcA,EACd+F,QAASC,KAAKf,YACdmC,YAAapB,KAAKgC,gBAClBX,aAAcrB,KAAKiC,iBACnBtB,gBAAiBX,KAAK6B,wBAKzB,yBAAKjC,UAAU,yBACd,6BAASA,UAAU,kBAElB,kBAAC,GAAD,CACC2D,OAAQZ,EACRrF,MAAOY,EACP4F,WAAY9D,KAAKnE,MAAMwI,eAOzB,kBAAC,GAAD,CAAgBxK,KAAMA,U,gDAtJE+E,EAAO/C,GAEtC,OAAG+C,EAAMqG,YAAcpJ,EAAMqC,OAErB,gBACHrC,EADJ,CAECqC,OAAQU,EAAMsG,aAIT,S,GA7BUhF,IAAMiC,WAmNVgD,gBAvBS,SAACtJ,EAAOuJ,GAI/B,OAAOrJ,OAAOC,OAAO,GAAIoJ,EAAU,OAYT,SAAC/I,GAAD,MAAe,CAEzCwI,eAAgB,SAACI,EAAWjL,GAAZ,OAA6BqC,EAASrB,EAA6BiK,EAAWjL,QAKhFmL,CAA6Cf,IC5L7CiB,GAlCA,SAACzG,GAAW,IAEnB0G,EAAU1G,EAAV0G,OAEDV,EAAyB,GAAhBU,EAAOV,OAEtB,OACC,wBAAIhF,UAAU,iBACb,yBAAKA,UAAU,sBACd,yBAAKA,UAAU,gDACd,yBAAKA,UAAU,+BAA+B4B,IAAK,IAAM8D,EAAOC,IAAK7H,MAAM,KAAKC,OAAO,KAAK+D,IAAI,oBAEjG,0BAAM9B,UAAU,sBAAsB0F,EAAO9G,OAE9C,yBAAKoB,UAAU,iBACd,yBAAKA,UAAU,0BACd,yBAAKA,UAAU,gCACd,0BAAMmB,MAAO,CAACrD,MAAOkH,EAAS,OAC9B,0BAAMhF,UAAU,mBAAhB,YAGF,uBAAGA,UAAU,iBACX0F,EAAOE,MAET,0BAAM5F,UAAU,gBAAgB6F,SAAUH,EAAOG,UAAWH,EAAOI,SCAxDC,GAvBI,SAAC/G,GAAW,IAEvBgH,EAAWhH,EAAXgH,QAEP,OACC,wBAAIhG,UAAU,iBAEZgG,EAAQ1D,KAAI,SAACrH,GAEb,OAAO,kBAAC,GAAD,CACNyK,OAAQzK,EACRT,IAAKS,EAAGwD,UCgBEwH,GA3BW,SAACjH,GAAW,IAE9BtB,EAA6BsB,EAA7BtB,MAAOzD,EAAsB+E,EAAtB/E,KAAMG,EAAgB4E,EAAhB5E,aAOpB,OAAO,kBAAC,GAAD,CACNH,KAAMA,EACNyD,MAAOA,EACPtD,aAAcA,EACd+F,QATmB,SAACtE,GAAD,OAAUmD,EAAMmB,QAAQtE,IAU3C2F,YATuB,SAAC3F,GAAD,OAAUmD,EAAMwC,YAAY3F,IAUnD4F,aATwB,SAACnC,GAAD,OAAON,EAAMyC,aAAanC,IAUlDyB,gBAT2B,SAACtF,EAAOwF,GAAR,OAAkBjC,EAAM+B,gBAAgBtF,EAAOwF,O,SCwK7DiF,G,kDA9Kd,WAAYlH,GAAQ,IAAD,8BAClB,cAAMA,IAWPmH,aAAe,WAEd,EAAKjH,SAAS,CACbkH,WAAY,EAAKnK,MAAMoK,eAAiB,EAAKpK,MAAMqK,kBAflC,EAmBnBC,cAAgB,SAAC3H,EAAM4H,GAAW,IAAD,EAEK,EAAKvK,MAArCoK,EAF2B,EAE3BA,cAAeC,EAFY,EAEZA,cAIpB,OAAQ1H,GAEP,IAAI,SAAWyH,EAAgBG,EAAM7K,OAAS,EAC7C,MACD,IAAI,SAAW2K,EAAgBE,EAAM7K,QAPrB,IAO2C6K,EAAM7K,QANjD,IAYjB,EAAKuD,SAAS,CACbmH,gBACAC,kBACE,kBAAM,EAAKH,mBAtCI,EAyCnBM,aAAe,SAACnH,GAAO,IAAD,EAECA,EAAEO,OAAjBjB,EAFc,EAEdA,KAAM4H,EAFQ,EAERA,MAEb,EAAKtH,SAAL,gBAAgBN,EAAO4H,IAAQ,kBAAM,EAAKD,cAAc3H,EAAM4H,OA7C5C,EAgDnBE,UAAY,SAACpH,GAEZA,EAAEO,OAAO8G,QAET,EAAKzH,SAAS,CACb8F,OAAQ,GACRU,OAAQ,GACRW,eAAe,EACfC,eAAe,EACfF,UAAU,KAzDO,EA6DnBQ,aAAe,SAACtH,GAAO,IAEfuH,EAAY,EAAK7H,MAAjB6H,SACPvH,EAAEwH,iBAEFD,EAAS,CACR7B,OAAQ,EAAK/I,MAAM+I,OACnBU,OAAQ,EAAKzJ,MAAMyJ,SAGpB,EAAKgB,UAAUpH,IApEf,EAAKrD,MAAQ,CACZ+I,OAAQ,GACRU,OAAQ,GACRW,eAAe,EACfC,eAAe,EACfF,UAAU,GARO,E,qDA4ElB,OACC,0BAAMpG,UAAU,qBACb9D,OAAO,IACP+D,OAAO,OACP4G,SAAUzG,KAAKwG,cAEjB,2BAAO5G,UAAU,6BAA6B+G,QAAQ,UAAtD,eACA,yBAAK/G,UAAU,qCACd,2BAAOA,UAAU,qCACbpB,KAAK,SACL4H,MAAM,IACN/H,GAAG,UACHpD,KAAK,QACL2L,SAAU5G,KAAKqG,eAElB,2BAAOM,QAAQ,UAAU/G,UAAU,2CAA2CkC,MAAM,WACnF,yBAAKlC,UAAU,mBAAmBlC,MAAM,KAAKC,OAAO,MACnD,yBAAKsC,UAAU,iBAIjB,2BAAOL,UAAU,qCACbpB,KAAK,SACL4H,MAAM,IACN/H,GAAG,UACHpD,KAAK,QACL2L,SAAU5G,KAAKqG,eAElB,2BAAOM,QAAQ,UAAU/G,UAAU,2CAA2CkC,MAAM,QACnF,yBAAKlC,UAAU,mBAAmBlC,MAAM,KAAKC,OAAO,MACnD,yBAAKsC,UAAU,iBAIjB,2BAAOL,UAAU,qCACbpB,KAAK,SACL4H,MAAM,IACN/H,GAAG,UACHpD,KAAK,QACL2L,SAAU5G,KAAKqG,eAElB,2BAAOM,QAAQ,UAAU/G,UAAU,2CAA2CkC,MAAM,WACnF,yBAAKlC,UAAU,mBAAmBlC,MAAM,KAAKC,OAAO,MACnD,yBAAKsC,UAAU,iBAIjB,2BAAOL,UAAU,qCACbpB,KAAK,SACL4H,MAAM,IACN/H,GAAG,UACHpD,KAAK,QACL2L,SAAU5G,KAAKqG,eAElB,2BAAOM,QAAQ,UAAU/G,UAAU,2CAA2CkC,MAAM,SACnF,yBAAKlC,UAAU,mBAAmBlC,MAAM,KAAKC,OAAO,MACnD,yBAAKsC,UAAU,iBAIjB,2BAAOL,UAAU,qCACbpB,KAAK,SACL4H,MAAM,IACN/H,GAAG,SACHpD,KAAK,QACL2L,SAAU5G,KAAKqG,eAElB,2BAAOM,QAAQ,SAAS/G,UAAU,2CAA2CkC,MAAM,YAClF,yBAAKlC,UAAU,mBAAmBlC,MAAM,KAAKC,OAAO,MACnD,yBAAKsC,UAAU,kBAIvB,8BAAUL,UAAU,mCAAmCvB,GAAG,SACrDwI,YAAY,iEACZrI,KAAK,SACL4H,MAAOpG,KAAKnE,MAAMiL,SAClBF,SAAU5G,KAAKqG,eAEpB,yBAAKzG,UAAU,2BACd,uBAAGA,UAAU,iBAAb,4CAC0C,0BAAMA,UAAU,iBAAhB,UAD1C,yCAC6H,uBAAGA,UAAU,wBAAb,iBAD7H,KAGA,4BAAQA,UAAU,sCAAsC3E,KAAK,SACzD+K,SAAUhG,KAAKnE,MAAMmK,UADzB,gB,GAjKsB9F,IAAMC,eCY3B4G,G,kDAEL,WAAanI,GAAQ,IAAD,8BACnB,cAAOA,IAgBRK,YAAc,SAACxD,GAAD,OAAU,EAAKqD,SAAS,CAACzD,MAAOI,IAAO,kBAAM,EAAKmD,MAAMmB,QAAQtE,OAjB1D,EAmBpBuG,gBAAkB,SAACvG,GAAD,OAAU,EAAKqD,UAAS,SAACC,GAE1C,OAAQA,EAAUsF,YAAc5I,EAAQ,CAAC4I,UAAW5I,GAAQ,SArBzC,EAwBpBwG,iBAAmB,kBAAM,EAAKnD,SAAS,CAACuF,UAAW,QAxB/B,EA0BpBlD,WAAa,WAAO,IAAD,EAEgB,EAAKvC,MAAhCqG,EAFW,EAEXA,UAAWjL,EAFA,EAEAA,aAElB,QAAKA,EAAauB,QAEXvB,EAAawB,WAAU,SAACC,GAAD,OAAUA,EAAKC,UAAYuJ,EAAUvJ,YAAY,GAhC5D,EAmCpBmG,oBAAsB,SAACxG,EAAOwF,GAAW,IAAD,EACoC,EAAKjC,MAAzE3E,EADgC,EAChCA,wBAAyBgL,EADO,EACPA,UAAWJ,EADJ,EACIA,eAAgB7K,EADpB,EACoBA,aAEvDC,EAEHiD,OAAO4H,SAAS9I,OAAO,UAKtB6I,EADGhE,EACYxF,EAEA4J,EAFOjL,IA1CxB,EAAK6B,MAAQ,CACZwI,UAAW,KACXhJ,MAAO,EAAKuD,MAAMqG,WALA,E,+DASDpB,GAEfA,EAAUoB,YAAcjF,KAAKpB,MAAMqG,WAErC/H,OAAO8J,SAAS,EAAE,K,+BAuCT,IAAD,SAE8EhH,KAAKpB,MAArF9E,EAFE,EAEFA,OAAQoL,EAFN,EAEMA,WAAYrL,EAFlB,EAEkBA,KAAMK,EAFxB,EAEwBA,YAAaD,EAFrC,EAEqCA,wBAAyBD,EAF9D,EAE8DA,aAChEqB,EAAS2E,KAAKnE,MAAdR,MAEP,IAAKA,EAAO,OAAO,KAEnB,IAAM4L,EdxBiB,SAAC5L,EAAOiC,EAAO4J,GAEvC,IAAIlJ,EAAM,GACJmJ,EAAOtE,IAAQuE,OAAO/L,EAAMkI,QAElCvF,EAAIG,KAAK,CACR9C,MAAOA,EACPE,OAAQ,IAPyC,oBAUjC+B,GAViC,IAUlD,2BAAwB,CAAC,IAAdzC,EAAa,QAEvB,GAAIA,EAAGwD,KAAOhD,EAAMgD,GAAI,CAEvB,IAAIkD,EAAKsB,IAAQuE,OAAOvM,EAAG0I,QAE3BvF,EAAIG,KAAK,CACR9C,MAAOR,EACPU,OAAQ4L,EAAKE,WAAW9F,OAlBuB,8BAsBlDvD,EAAMA,EAAIyG,MAAK,SAAC6C,EAAMC,GAAP,OAAgBD,EAAK/L,OAASgM,EAAKhM,UAElD,IAAK,IAAIgC,EAAI,EAAGA,EAAIS,EAAIzC,OAAQgC,IAC/BS,EAAIT,GAAKS,EAAIT,GAAGlC,MAGjB,OAAO2C,EAAIwJ,MAAM,EAAGN,EAAS,GcJLO,CAAUpM,EAAO6J,EfnEP,GeoE3BvC,EdlEoB,SAAC7I,EAAQD,GAIpC,OAAOC,EAFOuD,EAASvD,EAAQD,IAEV0J,Oc8DFmE,CAAa5N,EAAQD,GAEvC,OACC,yBAAK+F,UAAU,QAEd,kBAAC,GAAD,CACC3F,wBAAyBA,EACzBC,YAAaA,IAGd,0BAAM0F,UAAU,mCACf,6BAASA,UAAU,YAClB,yBAAKA,UAAU,yCACd,yBAAKA,UAAU,qBACd,yBAAKA,UAAU,2BACd,yBAAKA,UAAU,kBAAkB4B,IAAI,gBAAgBE,IAAI,YAE1D,yBAAK9B,UAAU,2BACd,yBAAKA,UAAU,kBAAkB4B,IAAI,wBAAwBE,IAAI,cAElE,yBAAK9B,UAAU,2BACd,yBAAKA,UAAU,kBAAkB4B,IAAI,wBAAwBE,IAAI,cAElE,yBAAK9B,UAAU,2BACd,yBAAKA,UAAU,kBAAkB4B,IAAI,wBAAwBE,IAAI,cAElE,yBAAK9B,UAAU,2BACd,yBAAKA,UAAU,kBAAkB4B,IAAI,qBAAqBE,IAAI,cAE/D,yBAAK9B,UAAU,2BACd,yBAAKA,UAAU,kBAAkB4B,IAAI,wBAAwBE,IAAI,gBAIpE,yBAAK9B,UAAU,iCACd,yBAAKA,UAAU,qBACd,yBAAKA,UAAU,kBACd,0CAED,yBAAKA,UAAU,0BACd,wBAAIA,UAAU,kBACZvE,EAAMyG,OAGR,kBAAC,GAAD,CACClB,SAAUZ,KAAKmB,aACfR,gBAAiB,SAACE,GAAD,OAAW,EAAKgB,oBAAoBxG,EAAOwF,IAC5DA,OAAO,KAIT,yBAAKjB,UAAU,2BACd,yBAAKA,UAAU,iCACd,0BAAMmB,MAAO,CAACrD,MAAO,SACrB,0BAAMkC,UAAU,mBAAhB,WAED,0BAAMA,UAAU,wCAAhB,QAED,wBAAIA,UAAU,sBACb,wBAAIA,UAAU,+CAAd,gBAGA,wBAAIA,UAAU,iDAAd,cAGA,wBAAIA,UAAU,+CAAd,iBAID,yBAAKA,UAAU,mBACd,uBAAGA,UAAU,yBAAb,aACA,0BAAMA,UAAU,wBAAhB,cAED,yBAAKA,UAAU,oBACd,wBAAIA,UAAU,0BAAd,iBACA,wBAAIA,UAAU,yBACb,wBAAIA,UAAU,yBAAd,SAGA,wBAAIA,UAAU,yBAAd,mBAGA,wBAAIA,UAAU,yBAAd,UAGA,wBAAIA,UAAU,yBAAd,WAGA,wBAAIA,UAAU,yBAAd,kBAGA,wBAAIA,UAAU,yBAAd,aAGA,wBAAIA,UAAU,yBAAd,WAGA,wBAAIA,UAAU,yBAAd,cAGA,wBAAIA,UAAU,yBAAd,YAGA,wBAAIA,UAAU,yBAAd,YAKF,yBAAKA,UAAU,kBACd,wBAAIA,UAAU,wBAAd,iBACA,yBAAKA,UAAU,4BACd,yBAAKA,UAAU,+EACd,yBAAKA,UAAU,gCAAgC4B,IAAI,2BAA2B9D,MAAM,KACjFC,OAAO,KAAK+D,IAAI,iBAEpB,0BAAM9B,UAAU,uBAAhB,YAGA,0BAAMA,UAAU,yBAAhB,QAID,yBAAKA,UAAU,yBACd,uBAAGA,UAAU,kBAAb,+IAIA,uBAAGA,UAAU,kBAAb,gLAMF,6BAASA,UAAU,6BAClB,wBAAIA,UAAU,kBAAd,gBAAgD,0BAC/CA,UAAU,mBAAmBvE,EAAMuK,QAAQrK,SAE5C,kBAAC,GAAD,CAAYqK,QAASvK,EAAMuK,UAEzB3L,EAIC,KAHA,kBAAC,GAAD,CACAwM,SAAUzG,KAAK2H,sBAOrB,6BAAS/H,UAAU,mBAAmBmB,MAAO,CAACpD,OAAQ,QAAYiK,aAAc,SAE/E,kBAAC,GAAD,CACCrE,OAAQZ,EACRrF,MAAO2J,EACPnD,WAAY9D,KAAKnE,MAAMwI,UACvBhJ,MAAOA,MAKV,yBAAKuE,UAAU,aACd,6BAASA,UAAU,sBAClB,wBAAIA,UAAU,sBAAd,qCACA,yBAAKA,UAAU,kCAEd,kBAAC,GAAD,CACC/F,KAAMA,EACNyD,MAAO2J,EACPjN,aAAcA,EACd+F,QAASC,KAAKf,YACdmC,YAAapB,KAAKgC,gBAClBX,aAAcrB,KAAKiC,iBACnBtB,gBAAiBX,KAAK6B,+B,GAzOH3B,IAAMC,eAuRnBgF,gBAzBS,SAACtJ,EAAOuJ,GAAc,IAEtC/G,EAAM+G,EAASyC,MAAMC,OAArBzJ,GAEP,OAAOtC,OAAOC,OAAO,GAAIoJ,EAAU,CAClC/G,KACAxE,KAAMuE,EAAavC,EAAOwC,GAAIxE,KAC9BC,OAAQ+B,EAAM/B,OACdmL,UAAW7G,EAAavC,EAAOwC,GAC/B6G,WAAY5G,EAAczC,EAAOwC,GACjCrE,aAAc6B,EAAM7B,aACpBC,wBAAyB4B,EAAM5B,wBAC/BC,YAAa2B,EAAM3B,iBAIM,SAACmC,GAAD,MAAe,CAGzC0D,QAAS,SAAC1E,GAAD,OAAWgB,EAASrB,EAA8BK,KAC3DwJ,eAAgB,SAACI,EAAWjL,GAAZ,OAA6BqC,EAASrB,EAA6BiK,EAAWjL,QAKhFmL,CAA6C4B,ICvJ7CgB,G,kDAxId,WAAYnJ,GAAQ,IAAD,8BAClB,cAAMA,IAWP4H,aAAe,SAACtH,GAAO,IAEfuH,EAAY,EAAK7H,MAAjB6H,SAEPvH,EAAEwH,iBAEFD,EAAS,CACR3L,MAAO,EAAKe,MAAMf,MAClBkN,SAAU,EAAKnM,MAAMmM,YApBJ,EAyBnB7B,cAAgB,SAAC3H,EAAM4H,GAEtB,IAAI6B,EAAa,EAAKpM,MAAMoM,WACxBC,EAAgB,EAAKrM,MAAMqM,cAI/B,OAAQ1J,GAEP,IAAI,QAAUyJ,EAAa7B,EAAMyB,MAAM,wCACtC,MAED,IAAI,WAAaK,EAAgB9B,EAAM7K,QARlB,GAQ6C6K,EAAM7K,QAPnD,GActB,EAAKuD,SAAS,CACbmJ,aACAC,iBACE,EAAKnC,eA/CU,EAkDnBA,aAAe,WACd,EAAKjH,SAAS,CACbqJ,UAAW,EAAKtM,MAAMoM,YAAc,EAAKpM,MAAMqM,iBApD9B,EAwDnB7B,aAAe,SAACnH,GAEf,IAAMkH,EAAQlH,EAAEO,OAAO2G,MACjB5H,EAAOU,EAAEO,OAAOjB,KAEtB,EAAKM,SAAL,gBAAiBN,EAAO4H,IAAQ,WAAO,EAAKD,cAAc3H,EAAM4H,OA7D9C,EAgEnB9B,gBAAkB,SAACzK,GAAD,OAAU,EAAK+E,MAAM2F,YAAY1K,IA7DlD,EAAKgC,MAAQ,CACZf,MAAO,GACPkN,SAAU,GACVC,YAAY,EACZC,eAAe,EACfC,WAAW,GARM,E,qDAkET,IAAD,SAE8BnI,KAAKpB,MAApCwJ,EAFC,EAEDA,eAAgBlO,EAFf,EAEeA,YAEvB,OACC,yBAAK0F,UAAU,+BAEd,kBAAC,GAAD,CACC3F,wBAAyBmO,EACzBlO,YAAaA,EACbiK,YAAa,kBAAM,EAAKG,gBAAgB,YAGzC,0BAAM1E,UAAU,gCACf,yBAAKA,UAAU,mCACd,6BAASA,UAAU,SAClB,wBAAIA,UAAU,gBAAd,WACA,0BAAMA,UAAU,mBACb9D,OAAO,IACP+D,OAAO,OACP4G,SAAUzG,KAAKwG,cAEjB,yBAAK5G,UAAU,4CACd,2BAAOA,UAAU,mBAAjB,UACA,2BAAOA,UAAU,2BACb3E,KAAK,QACLuD,KAAK,QACLqI,YAAY,QACZwB,SAAS,GACTjC,MAAOpG,KAAKnE,MAAMf,MAClB8L,SAAU5G,KAAKqG,gBAGpB,yBAAKzG,UAAU,4CACd,2BAAOA,UAAU,mBAAjB,YACA,2BAAOA,UAAU,2BACb3E,KAAK,WACLuD,KAAK,WACLqI,YAAY,WACZwB,SAAS,GACTjC,MAAOpG,KAAKnE,MAAMmM,SAClBpB,SAAU5G,KAAKqG,gBAGpB,4BAAQzG,UAAU,oCACd3E,KAAK,SACL+K,UAAWhG,KAAKnE,MAAMsM,WAF1B,aAQF,6BAASvI,UAAU,iDAClB,yBAAKA,UAAU,mBACd,4BAAQA,UAAU,mCACjB,qD,GA3HYM,IAAMC,eCsBZmI,GAvBQ,SAAC1J,GAAW,IAE3B/E,EAA6B+E,EAA7B/E,KAAM0O,EAAuB3J,EAAvB2J,oBAIb,OACC,yBAAK3I,UAAU,qDACd,yBAAKA,UAAU,mBACd,kBAAC,IAAD,CAAM2B,GAAG,IAAI3B,UAAU,kCACpBG,QAN0B,kBAAMwI,EAAoB1O,KAQtD,8BAAOA,OCoCG2O,GA9CM,SAAC5J,GAAW,IAEzBnD,EAAQmD,EAARnD,KAIP,OACC,6BAASmE,UAAU,8BAClB,yBAAKA,UAAU,sDACd,kBAAC,IAAD,CAAM2B,GAAE,iBAAY9F,EAAKC,SAAWkE,UAAU,cAC7C,yBAAKA,UAAU,oBAAoB4B,IAAK,IAAM/F,EAAKgG,IAAK/D,MAAM,MAAMC,OAAO,MAAM+D,IAAI,YAGvF,yBAAK9B,UAAU,yCACd,yBAAKA,UAAU,6BACd,yBAAKA,UAAU,qBACd,uBAAGA,UAAU,2BAAb,SAA8CnE,EAAKkG,OACnD,0BAAM/B,UAAU,0BAAhB,QAAqDnE,EAAKmG,YAG3D,kBAAC,GAAD,CACCjB,gBAjBuB,kBAAM/B,EAAM+B,gBAAgB/B,EAAMnD,OAkBzDmF,UAAU,EACVC,OAAO,KAIT,yBAAKjB,UAAU,6BACd,yBAAKA,UAAU,mCACd,0BAAMmB,MAAO,CAACrD,MAAO,UACrB,0BAAMkC,UAAU,mBAAhB,YAGF,wBAAIA,UAAU,oBACb,kBAAC,IAAD,CAAM2B,GAAE,iBAAY9F,EAAKC,SAAWkE,UAAU,0BAA0BnE,EAAKqG,QAE9E,uBAAGlC,UAAU,oBAAoBnE,EAAKR,SCY3BwN,GAhDO,SAAC7J,GAAW,IAE1B5E,EAAsD4E,EAAtD5E,aAAc2G,EAAwC/B,EAAxC+B,gBAAiB4H,EAAuB3J,EAAvB2J,oBAEhC1G,EAAsB,SAACpG,GAAD,OAAUkF,EAAgBlF,IAEhDiN,EAA0B,SAAC7O,GAAD,OAAU0O,EAAoB1O,IAE9D,OACC,wBAAI+F,UAAU,mBAEZ5F,EAAakI,KAAI,SAACyG,EAASC,GAE3B,OACC,wBAAIhJ,UAAU,6BAA6BxF,IAAKuO,EAAQ9O,KAAO+O,GAE9D,kBAAC,GAAD,CACC/O,KAAM8O,EAAQ9O,KACdO,IAAKuO,EAAQ9O,KAAO+O,EACpBL,oBAAqBG,EACrBjI,OAAO,cAGR,yBAAKb,UAAU,qBAEb+I,EAAQE,UAAU3G,KAAI,SAAC4G,GAEvB,OACE,kBAAC,GAAD,CACCrN,KAAMqN,EACN1O,IAAK0O,EAAMpN,QACXiF,gBAAiBkB,cC5BtBkH,GAAqB,SAACC,GAE3B,IAAIC,EAAS,IAAIC,IACblL,EAAM,GACNmL,EAAM,CACTtP,KAAM,GACNgP,UAAW,IAGZG,EAAc/K,SAAQ,SAACpD,GAAD,OAAQoO,EAAOtJ,IAAI9E,EAAGhB,SATC,oBAW3BoP,GAX2B,IAW7C,IAAI,EAAJ,qBAA0B,CAAC,IAAD,EAAhBpP,EAAgB,sBAEHmP,GAFG,IAEzB,IAAI,EAAJ,qBAAqC,CAAC,IAA5BI,EAA2B,QAEhCvP,IAASuP,EAASvP,OAErBsP,EAAItP,KAAOA,EACXsP,EAAIN,UAAU1K,KAAKiL,KAPI,8BAUzBpL,EAAIG,KAAKgL,GACTA,EAAM,CACLtP,KAAM,GACNgP,UAAW,KAxBgC,8BA2B7C,OAAO7K,GA2EOmH,gBAbS,SAACtJ,EAAOuJ,GAE/B,OAAOrJ,OAAOC,OAAO,GAAIoJ,EAAU,OAGT,SAAC/I,GAAD,MAAe,CAEzCgN,UAAW,SAACxP,GAAD,OAAUwC,EAASrB,EAAsBnB,KACpDgL,eAAgB,SAACI,EAAWjL,GAAZ,OAA6BqC,EAASrB,EAA6BiK,EAAWjL,QAKhFmL,EAxEG,SAACvG,GAAW,IAEtB5E,EAAwE4E,EAAxE5E,aAAc6K,EAA0DjG,EAA1DiG,eAAgBwE,EAA0CzK,EAA1CyK,UAAWjB,EAA+BxJ,EAA/BwJ,eAAgBlO,EAAe0E,EAAf1E,YAMhE,OACC,yBAAK0F,UAAS,eAAW5F,EAAauB,OAAd,6BAEvB,kBAAC,GAAD,CACCtB,wBAAyBmO,EACzBlO,YAAaA,IAGbF,EAAauB,OACX,0BAAMqE,UAAU,oCACjB,yBAAKA,UAAU,uCACd,6BAASA,UAAU,aAClB,wBAAIA,UAAU,oBAAd,iBAEA,kBAAC,GAAD,CACC5F,aAAc+O,GAAmB/O,GACjC2G,gBApBqB,SAAClF,GAAD,OAAUoJ,EAAepJ,EAAMzB,IAqBpDuO,oBAnByB,SAAC1O,GAAD,OAAUwP,EAAUxP,SAyB/C,0BAAM+F,UAAU,gEACjB,yBAAKA,UAAU,uCACd,6BAASA,UAAU,8BAClB,wBAAIA,UAAU,mBAAd,qBACA,yBAAKA,UAAU,6BACd,uBAAGA,UAAU,qBAAb,sBACA,uBAAGA,UAAU,iCAAb,uEAOL,4BAAQA,UAAU,UACjB,kBAAC,IAAD,CAAM2B,GAAG,IAAI3B,UAAU,oBAAoB0J,KAAK,aAC/C,yBAAK1J,UAAU,eAAe4B,IAAI,eAAeE,IAAI,gBAAgBhE,MAAM,KAAKC,OAAO,aC1E7E4L,GATA,WAEd,OACC,yBAAKlL,GAAG,aACP,yBAAKA,GAAG,aCULmL,G,kDAEJ,WAAY5K,GAAQ,IAAD,8BACjB,cAAMA,IAwCT6K,aAAe,WAEd,EAAK3K,UAAS,SAACC,GAAD,MAAgB,CAC7B2K,gBAAiB3K,EAAU2K,mBACxB,kBAAMxM,OAAO4H,SAASC,aA7CP,EAgDpB4E,iBAAmB,SAAClO,GAEnB,OAAO,EAAKqD,SAAS,CAAC8K,cAAenO,EAAK4C,MA/CxC,EAAKxC,MAAQ,CACd+N,cAAe,GACfF,gBAAgB,GALE,E,+DASA7F,GAAY,IrBwDXrF,EqBxDU,EAEewB,KAAKpB,MAA1C9E,EAFsB,EAEtBA,OAAQI,EAFc,EAEdA,YAAaF,EAFC,EAEDA,aAM7B,GAJI6J,EAAU/J,SAAWA,GACxBkG,KAAKlB,SAAS,CAAC4K,gBAAgB,IAG5BxP,GAAe2J,EAAU7J,eAAiBA,EAAc,CAE3D,IACIM,EADAuP,EAAW,GAETlN,EAAO,CAACzC,cAAaF,gBAEvBO,GrB0CeiE,EqB1CQ,YrB2CtBhE,KAAKC,MAAMC,aAAaC,QAAQ6D,KqBzCjCjE,IAEHD,EAAWC,EAAeK,QAAO,SAACC,GAAD,OAAQA,EAAGX,YAAYY,QAAUZ,EAAYY,UAErEqD,KAAKxB,GACd4B,EAAM,YAAajE,KAInBuP,EAAS1L,KAAKxB,GACd4B,EAAM,YAAasL,O,+BAkBX,IAIN3E,EAJK,EAEoFlF,KAAKpB,MAA3F9E,EAFE,EAEFA,OAAQD,EAFN,EAEMA,KAAMK,EAFZ,EAEYA,YAAaD,EAFzB,EAEyBA,wBAAyBD,EAFlD,EAEkDA,aAAcqP,EAFhE,EAEgEA,UAAWtM,EAF3E,EAE2EA,MASpF,OALIiD,KAAKnE,MAAM6N,gBAAkB7P,IAEhCqL,EAAapL,EAAOuD,EAASvD,EAAQD,IAAOqE,QAI5C8B,KAAKnE,MAAM6N,gBAAkB7P,EAC1B,kBAAC,IAAD,CAAQH,QAASA,GACjB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOoQ,OAAK,EAACC,KAAM3M,GAClB,kBAAC,GAAD,iBACK4C,KAAKpB,MADV,CAECsG,WAAYA,EACZnF,QAASC,KAAK2J,iBACdpF,YAAa8E,EACbtE,OAAQ/E,KAAKyJ,iBAGf,kBAAC,IAAD,CAAOK,OAAK,EAACC,KAAM3M,GAClB,kBAAC,GAAD,CACCqJ,SAAU1J,EACVwH,YAAa8E,EACbnP,YAAaA,EACbkO,eAAgBnO,KAGlB,kBAAC,IAAD,CAAO6P,OAAK,EAACC,KAAM3M,GAClB,kBAAC,GAAD,CACCpD,aAAcA,EACdoO,eAAgBnO,EAChBC,YAAaA,KAGf,kBAAC,IAAD,CAAO6P,KAAM3M,EACT4M,OAAQ,SAACpL,GAAD,OAAW,kBAAC,GAAkBA,QAK3C,kBAAC,GAAD,U,GApGYsB,IAAMC,eAuITgF,gBArBS,SAACtJ,EAAOuJ,GAAR,OAAqBrJ,OAAOC,OAAO,GAAIoJ,EAAU,CACvEvL,KAAMgC,EAAMhC,KACZC,OAAQ+B,EAAM/B,OACfC,aAAc8B,EAAM9B,aACpBC,aAAc6B,EAAM7B,aACpBC,wBAAyB4B,EAAM5B,wBAC/BC,YAAa2B,EAAM3B,iBAGO,SAACmC,GAAD,MAAe,CAEzCO,UAAW,kBAAMP,EAASF,EAAUS,cACpCyM,UAAW,SAACxP,GAAD,OAAUwC,EAASrB,EAAsBnB,KACpDkG,QAAS,SAAC1E,GAAD,OAAWgB,EAASrB,EAA8BK,KAC3D0B,MAAO,SAACC,GAAD,OAAcX,EAASF,EAAUY,MAAMC,KAC9CiN,aAAc,SAACC,GAAD,OAAmB7N,EAASrB,EAA2BkP,KACrEC,eAAgB,SAACjQ,GAAD,OAAiBmC,EAASrB,EAA6Bd,QAKzDiL,CAA6CqE,I,oBC5H7CY,GAzBG,SAACC,GAElB,IAAM9N,EAAM+N,KAAMC,OAAO,CACxBC,QAAQ,6CACRC,QAAS,IACTC,iBAAiB,IAiBlB,OAFAnO,EAAIoO,aAAajO,SAASkO,KAZR,SAAClO,GAAD,OAAcA,KAEjB,SAACmO,GAOf,OAL8B,MAA1BA,EAAMnO,SAASvB,QAElBkP,IAGMQ,KAKDtO,ICXK,WAEZ,IAIMA,EAAM6N,IAJW,WACtBU,EAAMzO,SAASrB,GAAmC,OAK5C8P,EAAQC,YACZnP,EACAoP,YACEC,YAAgBC,IAAMC,kBAAkB5O,IAC3CW,OAAOkO,6BACNlO,OAAOkO,+BAA+B,SAACC,GAAD,OAAKA,KAI7CP,EAAMzO,SAASF,EAAUC,cACxBK,MAAK,WAEL,IAAM5C,EAAOiR,EAAMxO,WAAWxC,OAAO,GAAGD,KAEpCA,GAAMiR,EAAMzO,SAASrB,EAAsBnB,OAEhDiR,EAAMzO,SAASF,EAAUU,aAEzByO,IAAStB,OACP,kBAAC,IAAD,CAAUc,MAAOA,GAClB,kBAAC,IAAD,KACC,kBAAC,GAAD,QAGA1L,SAASmM,eAAT,SAIJC,K","file":"static/js/main.02cbdcb9.chunk.js","sourcesContent":["import {createBrowserHistory} from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","const initialState = {\r\n\tcity: ``,\r\n\thotels: [],\r\n\tcurrentOffer: {},\r\n\tfavoriteList: [],\r\n\tisAuthorizationRequired: true,\r\n\tcurrentUser: {},\r\n};\r\n\r\nconst getFavoriteIndexFromList = (offer, favoriteList) => {\r\n\r\n\tif (!favoriteList.length) return -1;\r\n\r\n\treturn favoriteList.findIndex((item) => item.hotelId === offer.hotelId);\r\n};\r\n\r\nconst getFilteredLocalList = (key, responseEmail) => {\r\n\tlet filtered;\r\n\tlet favoritesLocal = JSON.parse(localStorage.getItem(key));\r\n\r\n\tif (favoritesLocal) {\r\n\t\tfiltered = favoritesLocal.filter((it) => it.currentUser.email === responseEmail);\r\n\t}\r\n\r\n\treturn filtered;\r\n};\r\n\r\nconst ActionType = {\r\n\tSET_CITY: `SET_CITY`,\r\n\tLOAD_HOTELS: `LOAD_HOTELS`,\r\n\tSET_CURRENT_OFFER: `SET_CURRENT_OFFER`,\r\n\tREQUIRE_AUTHORIZATION: `REQUIRE_AUTHORIZATION`,\r\n\tSET_CURRENT_USER: `SET_CURRENT_USER`,\r\n\tRELOAD_ALL: `RELOAD_ALL`,\r\n\tTOGGLE_FAVORITE: `TOGGLE_FAVORITE`,\r\n\tADD_FAVORITE: `ADD_FAVORITE`,\r\n\tREMOVE_FAVORITE: `REMOVE_FAVORITE`,\r\n\tSET_FAVORITES: `SET_FAVORITES`,\r\n};\r\n\r\nconst ActionCreator = {\r\n\r\n\tsetCity: (city) => ({\r\n\t\ttype: ActionType.SET_CITY,\r\n\t\tpayload: city,\r\n\t}),\r\n\r\n\tloadHotels: (hotels) => ({\r\n\t\ttype: ActionType.LOAD_HOTELS,\r\n\t\tpayload: hotels,\r\n\t}),\r\n\r\n\tsetCurrentOffer: (currentOffer) => ({\r\n\t\ttype: ActionType.SET_CURRENT_OFFER,\r\n\t\tpayload: currentOffer,\r\n\t}),\r\n\r\n\trequireAuthorization: (status) => ({\r\n\t\ttype: ActionType.REQUIRE_AUTHORIZATION,\r\n\t\tpayload: status,\r\n\t}),\r\n\r\n\tsetCurrentUser: (dataUser) => ({\r\n\t\ttype: ActionType.SET_CURRENT_USER,\r\n\t\tpayload: dataUser,\r\n\t}),\r\n\r\n\treloadAll: () => ({\r\n\t\ttype: ActionType.RELOAD_ALL,\r\n\t\tpayload: null,\r\n\t}),\r\n\r\n\ttoggleFavorite: (offer, favoriteList) => {\r\n\r\n\t\tconst offerInd = getFavoriteIndexFromList(offer, favoriteList);\r\n\r\n\t\tif (offerInd < 0) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: `ADD_FAVORITE`,\r\n\t\t\t\tpayload: offer,\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttype: `REMOVE_FAVORITE`,\r\n\t\t\tpayload: offerInd,\r\n\t\t}\r\n\t},\r\n\r\n\tsetFavorites: (favoriteList) => ({\r\n\t\ttype: `SET_FAVORITES`,\r\n\t\tpayload: favoriteList,\r\n\t}),\r\n};\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\r\n\tswitch (action.type) {\r\n\r\n\t\tcase ActionType.SET_CITY:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcity: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.LOAD_HOTELS:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\thotels: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_CURRENT_OFFER:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcurrentOffer: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.REQUIRE_AUTHORIZATION:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tisAuthorizationRequired: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_CURRENT_USER:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tcurrentUser: action.payload,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.RELOAD_ALL:\r\n\t\t\treturn Object.assign({}, state);\r\n\r\n\t\tcase ActionType.ADD_FAVORITE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: [...state.favoriteList, action.payload],\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.REMOVE_FAVORITE:\r\n\r\n\t\t\tlet list = [...state.favoriteList];\r\n\t\t\tlist.splice(action.payload, 1);\r\n\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: list,\r\n\t\t\t});\r\n\r\n\t\tcase ActionType.SET_FAVORITES:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfavoriteList: action.payload,\r\n\t\t\t});\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n};\r\n\r\nconst Operation = {\r\n\r\n\tloadHotels: () => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.get(`http://www.mocky.io/v2/5ed64aad340000108a06d8e0`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tdispatch(ActionCreator.loadHotels(response.data));\r\n\t\t\t});\r\n\t},\r\n\r\n\treloadAll: () => (dispatch) => {\r\n\r\n\t\tdispatch(Operation.loadHotels())\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch(ActionCreator.setCity('Paris'));\r\n\t\t\t});\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\tcheckAuth: () => (dispatch, getState, api) => {\r\n\r\n\t\treturn api\r\n\t\t\t.get(`/login`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tdispatch(ActionCreator.setCurrentUser(response.data));\r\n\t\t\t\t\tdispatch(ActionCreator.requireAuthorization(false));\r\n\r\n\t\t\t\t\tconst filtered = getFilteredLocalList('favorites', response.data.email);\r\n\r\n\t\t\t\t\tif (filtered) dispatch(ActionCreator.setFavorites(filtered[0].favoriteList));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {});\r\n\t},\r\n\r\n\tlogin: (authData) => (dispatch, getState, api) => {\r\n\r\n\t\treturn api.post(`/login`, authData)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tdispatch(ActionCreator.setCurrentUser(response.data));\r\n\t\t\t\t\tdispatch(ActionCreator.requireAuthorization(false));\r\n\r\n\t\t\t\t\tconst filtered = getFilteredLocalList('favorites', response.data.email);\r\n\r\n\t\t\t\t\tif (filtered) dispatch(ActionCreator.setFavorites(filtered[0].favoriteList));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => window.history.back())\r\n\t\t\t.catch(() => {});\r\n\t},\r\n\r\n\r\n\t\t// sendFormReview: (formData, city, hotel, user) => (dispatch, getState, api) => {\r\n\t//\r\n\t// \treturn api.post(`http://www.mocky.io/v2/5ec6d8392f00003500426e1f`, {\r\n\t// \t\tcity,\r\n\t// \t\thotel,\r\n\t// \t\tuser,\r\n\t// \t\trating: formData.rating,\r\n\t// \t\treview: formData.review,\r\n\t// \t});\r\n\t// },\r\n};\r\nexport {\r\n\tActionCreator,\r\n\treducer,\r\n\tOperation,\r\n}\r\n","export const APP_ROUTE = {\r\n\tLOGIN: `/login`,\r\n\tROOT: `/`,\r\n\tOFFER: `/offer/:id`,\r\n\tFAVORITES: `/favorites`,\r\n};\r\n\r\nexport const ICON_SIZE = 30;\r\n\r\nexport const NUMBER_NEIBOURHOODS = 3;","import {ICON_SIZE} from '../const';\r\nimport leaflet from 'leaflet';\r\n\r\nexport const getIndex = (items, city) => {\r\n\r\n\tfor (let i = 0; i < items.length; i++) {\r\n\r\n\t\tif (items[i].city.toLowerCase() === city.toLowerCase()) return i;\r\n\t}\r\n};\r\n\r\nexport const getCityCoord = (hotels, city) => {\r\n\r\n\tconst index = getIndex(hotels, city);\r\n\r\n\treturn hotels[index].coords;\r\n};\r\n\r\nexport const getActiveIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n\ticonUrl: `/img/pin-active.svg`,\r\n\ticonSize: [width, height]\r\n});\r\n\r\nexport const getIconParams = (width = ICON_SIZE, height = ICON_SIZE) => ({\r\n\ticonUrl: `/img/pin.svg`,\r\n\ticonSize: [width, height]\r\n});\r\n\r\nconst getAllOffers = (state) => {\r\n\tlet arr = [];\r\n\r\n\tstate.hotels.forEach((item) => {\r\n\t\tif (item.offers.length) {\r\n\r\n\t\t\tfor(const offer of item.offers) arr.push(offer);\r\n\t\t}\r\n\t});\r\n\r\n\treturn arr;\r\n};\r\n\r\nexport const getCityOffer = (state, id) => {\r\n\r\n\treturn getAllOffers(state).filter((it) => it.hotelId === +id)[0];\r\n};\r\n\r\nexport const getCityOffers = (state, id) => {\r\n\tconst city = getCityOffer(state, id).city;\r\n\r\n\treturn getAllOffers(state).filter((it) => it.city === city);\r\n};\r\n\r\nexport const getNhoods = (offer, items, number) => {\r\n\r\n\tlet arr = [];\r\n\tconst from = leaflet.latLng(offer.coords);\r\n\r\n\tarr.push({\r\n\t\toffer: offer,\r\n\t\tlength: 0\r\n\t});\r\n\r\n\tfor (const it of items) {\r\n\r\n\t\tif (it.id !== offer.id) {\r\n\r\n\t\t\tlet to = leaflet.latLng(it.coords);\r\n\r\n\t\t\tarr.push({\r\n\t\t\t\toffer: it,\r\n\t\t\t\tlength: from.distanceTo(to)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tarr = arr.sort((prev, next) => prev.length - next.length);\r\n\r\n\tfor (let i = 0; i < arr.length; i++) {\r\n\t\tarr[i] = arr[i].offer;\r\n\t}\r\n\r\n\treturn arr.slice(1, number + 1);\r\n};\r\n\r\nexport const getLS = (name) => {\r\n\treturn JSON.parse(localStorage.getItem(name));\r\n};\r\n\r\nexport const setLS = (name, arr) => {\r\n\treturn localStorage.setItem(name, JSON.stringify(arr));\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SortingType extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisOpen: false,\r\n\t\t\toption: `Popular`,\r\n\t\t}\r\n\t}\r\n\r\n\thandleClickToggle = () => {\r\n\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisOpen: !prevState.isOpen,\r\n\t\t}));\r\n\t};\r\n\r\n\thandleClick = (e) => {\r\n\r\n\t\tconst {onChangeOption} = this.props;\r\n\r\n\t\tdocument.querySelector('.places__option--active').classList.remove('places__option--active');\r\n\r\n\t\tthis.handleClickToggle();\r\n\t\tthis.setState({option: e.target.innerHTML});\r\n\r\n\t\te.target.classList.add('places__option--active');\r\n\r\n\t\tonChangeOption(e.target.innerHTML);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"places__sorting\" action=\"#\" method=\"get\">\r\n\t\t\t\t<span className=\"places__sorting-caption\">Sort by</span>\r\n\t\t\t\t<span className=\"places__sorting-type\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClickToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.state.option}\r\n\t\t\t\t\t<svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\r\n\t\t\t\t\t\t<use xlinkHref=\"#icon-arrow-select\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t\t<ul className={this.state.isOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t? `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t \t\t\t\t\t\t\t\t\tplaces__options--opened`\r\n\t\t\t\t\t\t\t\t\t\t\t\t: `places__options\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--custom\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaces__options--closed`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<li className=\"places__option places__option--active\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPopular\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: low to high\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice: high to low\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"places__option\" tabIndex=\"0\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTop rated first\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSortingType.propType = {\r\n\tonChangeOption: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SortingType;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst size = {\r\n\tdefault: {\r\n\t\tprefix: `property`,\r\n\t\twidth: 31,\r\n\t\theight: 33,\r\n\t},\r\n\tsmall: {\r\n\t\tprefix: `place-card`,\r\n\t\twidth: 18,\r\n\t\theight: 19,\r\n\t}\r\n};\r\n\r\nconst BookmarkButton = (props) => {\r\n\r\n\tconst {onBookmarkClick, isActive, small} = props;\r\n\r\n\tconst prefix = small ? size.small.prefix : size.default.prefix;\r\n\tconst buttonClassActive = isActive ? `${prefix}__bookmark-button--active` : ``;\r\n\r\n\treturn (\r\n\t\t<button className={`${prefix}__bookmark-button ${buttonClassActive} button`}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={() => onBookmarkClick(small)}\r\n\t\t>\r\n\t\t\t<svg className={`${prefix}__bookmark-icon`}\r\n\r\n\t\t\t\t\t width={small ? size.small.width : size.default.width}\r\n\t\t\t\t\t height={small ? size.small.height : size.default.height}\r\n\t\t\t\t\t style={isActive ? {fill: `#4481c3`, stroke: `#4481c3`} : {fill: `none`,\r\n\t\t\t\t\t\t\t stroke: `#b8b8b8`}}\r\n\t\t\t>\r\n\t\t\t\t<use xlinkHref=\"#icon-bookmark\"/>\r\n\t\t\t</svg>\r\n\t\t\t<span className=\"visually-hidden\">To bookmarks</span>\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nBookmarkButton.propTypes = {\r\n\tisActive: PropTypes.bool,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default BookmarkButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\n\r\nconst Card = (props) => {\r\n\r\n  const {item, isFavorite} = props;\r\n\r\n\tconst handleClick = (e) => props.onClick(e);\r\n\tconst handleMouseOver = (e) => props.onMouseOver(e);\r\n\tconst handleMouseLeave = () => props.onMouseLeave();\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n  return (\r\n    <article className=\"cities__place-card place-card\"\r\n             id={item.id}\r\n             onMouseOver={() => handleMouseOver(item)}\r\n             onMouseLeave={handleMouseLeave}\r\n    >\r\n      { item.mark\r\n        ? (\r\n          <div className=\"place-card__mark\">\r\n            <span>{item.mark}</span>\r\n          </div>)\r\n        : null\r\n      }\r\n      <div className=\"cities__image-wrapper place-card__image-wrapper\">\r\n        <Link to={`/offer/${item.hotelId}`}\r\n              className=\"buttonLink\"\r\n              onClick={() => handleClick(item)}\r\n        >\r\n          <img className=\"place-card__image\" src={`/` + item.img} width=\"260\" height=\"200\" alt=\"Place\"/>\r\n        </Link>\r\n      </div>\r\n      <div className=\"place-card__info\">\r\n        <div className=\"place-card__price-wrapper\">\r\n          <div className=\"place-card__price\">\r\n            <b className=\"place-card__price-value\">&euro;{item.price}</b>\r\n            <span className=\"place-card__price-text\">&#47;&nbsp;{item.priceText}</span>\r\n          </div>\r\n\r\n          <BookmarkButton\r\n            onBookmarkClick={(small) => handleBookmarkClick(item, small)}\r\n            isActive={isFavorite}\r\n            small={true}\r\n          />\r\n\r\n        </div>\r\n        <div className=\"place-card__rating rating\">\r\n          <div className=\"place-card__stars rating__stars\">\r\n            <span style={{width: 93 + '%'}}/>\r\n            <span className=\"visually-hidden\">Rating</span>\r\n          </div>\r\n        </div>\r\n        <h2 className=\"place-card__name\">\r\n          <Link to={`/offer/${item.hotelId}`}\r\n                className=\"card__title buttonLink\"\r\n                onClick={() => handleClick(item)}\r\n          >{item.title}</Link>\r\n        </h2>\r\n        <p className=\"place-card__type\">{item.type}</p>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nCard.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  onClick: PropTypes.func,\r\n  onMouseOver: PropTypes.func,\r\n  onMouseLeave: PropTypes.func,\r\n\tonBookmarkClick: PropTypes.func,\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Card from '../card/card';\r\n\r\nclass CardList extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst {items} = this.props.items;\r\n\r\n\t\tthis.state = {\r\n\t\t\titems: items,\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\thandleMouseOver = (item) => this.props.onMouseOver(item);\r\n\thandleMouseLeave = (e) => this.props.onMouseLeave(e);\r\n\thandleBookmarkClick = (offer, small) => this.props.onBookmarkClick(offer, small);\r\n\r\n\tisFavorite = (favoriteList, item) => {\r\n\r\n\t\tif (favoriteList) {\r\n\t\t\tlet isFavorite = favoriteList.filter((it) => it.hotelId === item.hotelId);\r\n\r\n\t\t\treturn !!isFavorite.length;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {items, favoriteList} = this.props;\r\n\r\n\t\treturn (\r\n\r\n\t\t\titems.map((item) => {\r\n\r\n\t\t\t\treturn <Card\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tkey={item.hotelId}\r\n\t\t\t\t\tisFavorite={this.isFavorite(favoriteList, item)}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t/>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCardList.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n};\r\n\r\nexport default CardList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst CitiesList = (props) => {\r\n\r\n\tconst {items, city, onClick} = props;\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<h1 className=\"visually-hidden\">Cities</h1>\r\n\t\t\t<div className=\"tabs\">\r\n\t\t\t\t<section className=\"locations container\">\r\n\t\t\t\t\t<ul className=\"locations__list tabs__list\">\r\n\r\n\t\t\t\t\t\t{items.map((it, i) => {\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li className=\"locations__item\"\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\" className={ (it.city === city) ? `locations__item-link tabs__item buttonLink tabs__item--active`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `locations__item-link tabs__item buttonLink`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{color: '#000', backgroundColor: '#f5f5f5'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onClick(it.city)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span>{it.city}</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nCitiesList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n};\r\n\r\nexport default CitiesList;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst CitiesNoPlaces = (props) => {\r\n\r\n\tconst {city} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"cities__places-container cities__places-container--empty container\">\r\n\t\t\t<section className=\"cities__no-places\">\r\n\t\t\t\t<div className=\"cities__status-wrapper tabs__content\">\r\n\t\t\t\t\t<b className=\"cities__status\">No places to stay available</b>\r\n\t\t\t\t\t<p className=\"cities__status-description\">We could not find any property availbale at the moment in {city}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<div className=\"cities__right-section\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCitiesNoPlaces.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CitiesNoPlaces;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport leaflet from 'leaflet';\r\n\r\nimport {getIconParams, getActiveIconParams} from '../../helpers/helpers';\r\n\r\n\r\nclass Map extends React.PureComponent {\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmap: null,\r\n\t\t\tmarkers: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\r\n\t\tconst {coords, items, offer} = this.props;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\telse {\r\n\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\r\n\t\tconst {coords, offerHover, items, offer} = this.props;\r\n\t\tconst {markers} = this.state;\r\n\r\n\t\tif (prevProps.offer !== offer) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items, offer);\r\n\t\t}\r\n\r\n\t\tif (prevProps.coords !== coords) {\r\n\r\n\t\t\tthis.state.map.off();\r\n\t\t\tthis.state.map.remove();\r\n\t\t\tthis._initMap(coords, items);\r\n\t\t}\r\n\r\n\t\tthis._changeIconsOnHover(offerHover, markers);\r\n\t}\r\n\r\n\t_initMap = (cityCoord, items, offer = null) => {\r\n\r\n\t\tconst city = cityCoord;\r\n\t\tlet icon = leaflet.icon(getIconParams());\r\n\t\tconst zoom = 12;\r\n\t\tconst map = leaflet.map('map', {\r\n\t\t\tcenter: city,\r\n\t\t\tzoom: zoom,\r\n\t\t\tzoomControl: false,\r\n\t\t\tmarker: true\r\n\t\t});\r\n\r\n\t\tmap.setView(city, zoom);\r\n\r\n\t\tleaflet.tileLayer(`https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png`, {\r\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n\t\t})\r\n\t\t\t.addTo(map);\r\n\r\n\t\tlet markers = [];\r\n\t\tlet mark;\r\n\r\n\t\tif (offer) {\r\n\r\n\t\t\ticon = leaflet.icon(getActiveIconParams());\r\n\t\t\tmark = leaflet.marker(offer.coords, {icon});\r\n\t\t\tmark.addTo(map);\r\n\t\t}\r\n\r\n\t\tfor (const item of items) {\r\n\r\n\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\tmark = leaflet.marker(item.coords, {icon});\r\n\t\t\tmarkers.push(mark);\r\n\t\t}\r\n\r\n\t\tfor (const it of markers) {\r\n\t\t\tit.addTo(map);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmarkers: markers,\r\n\t\t\tmap: map\r\n\t\t});\r\n\t};\r\n\r\n\t_changeIconsOnHover = (offer, markers) => {\r\n\r\n\t\tfor (const it of markers) {\r\n\r\n\t\t\tlet icon;\r\n\r\n\t\t\tif (offer) {\r\n\t\t\t\tif (it._latlng.lat === offer.coords[0] &&\r\n\t\t\t\t\tit._latlng.lng === offer.coords[1]) {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams(35, 35));\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\ticon = leaflet.icon(getIconParams());\r\n\t\t\t}\r\n\t\t\tit.setIcon(icon);\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {items} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div id=\"map\"></div>\r\n\t\t\t\t<span style={{visibility: 'hidden'}} defaultValue={items}/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMap.propTypes = {\r\n\tcoords: PropTypes.array.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\toffer: PropTypes.object,\r\n\tofferHover: PropTypes.object,\r\n};\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst Header = (props) => {\r\n\r\n\tconst {isAuthorizationRequired, currentUser, onLogoClick} = props;\r\n\r\n\treturn (\r\n\t\t<header className=\"header\">\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"header__wrapper\">\r\n\t\t\t\t\t<div className=\"header__left\">\r\n\t\t\t\t\t\t<Link to=\"/\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"header__logo-link buttonLink\"\r\n\t\t\t\t\t\t\t\t\tonClick={onLogoClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img className=\"header__logo\" src=\"/img/logo.svg\" alt=\"6 cities logo\" width=\"81\" height=\"41\"/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<nav className=\"header__nav\">\r\n\t\t\t\t\t\t<ul className=\"header__nav-list\">\r\n\t\t\t\t\t\t\t<li className=\"header__nav-item user\">\r\n\t\t\t\t\t\t\t\t<button className=\"header__nav-link header__nav-link--profile buttonLink\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"header__avatar-wrapper user__avatar-wrapper\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{!isAuthorizationRequired\r\n\t\t\t\t\t\t\t\t\t\t? <span className=\"header__user-name user__name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/favorites\">{currentUser.name}</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t: <span className=\"header__login\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/login\">Sign in</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nHeader.propTypes = {\r\n\tisAuthorizationRequired: PropTypes.bool.isRequired,\r\n\tcurrentUser: PropTypes.object.isRequired,\r\n\tonLogoClick: PropTypes.func,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport SortingType from '../sorting-type/sorting-type';\r\nimport CardList from '../card-list/card-list';\r\nimport CitiesList from '../cities-list/cities-list';\r\nimport CitiesNoPlaces from '../cities-no-places/cities-no-places';\r\nimport Map from '../map/map';\r\nimport Header from '../header/header';\r\n\r\nimport {getIndex} from '../../helpers/helpers';\r\n\r\nclass Main extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffers: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif (prevProps.city !== this.props.city) {\r\n\r\n\t\t\tthis.handleSortOffers('Popular');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\r\n\t\tif(props.cityOffer !== state.offers) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffers: props.cityOffers\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleClick = (item) => this.props.onClick(item);\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\thandleSortOffers = (option) => {\r\n\r\n\t\tlet {offers} = this.state;\r\n\r\n\t\tswitch (option) {\r\n\r\n\t\t\tcase `Popular`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.id > b.id) return 1;\r\n\t\t\t\t\tif (a.id < b.id) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: low to high`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price > b.price) return 1;\r\n\t\t\t\t\tif (a.price < b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Price: high to low`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.price < b.price) return 1;\r\n\t\t\t\t\tif (a.price > b.price) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `Top rated first`:\r\n\t\t\t\toffers.sort((a, b) => {\r\n\r\n\t\t\t\t\tif (a.rating < b.rating) return 1;\r\n\t\t\t\t\tif (a.rating > b.rating) return -1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t\tthis.setState({offers});\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\r\n\t\tconst {isAuthorizationRequired, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\r\n\t\t\twindow.location.assign('/login');\r\n\r\n\t\t} else{\r\n\r\n\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst {hotels, city, currentUser, isAuthorizationRequired, reload, favoriteList} = this.props;\r\n\t\tconst index = getIndex(hotels, city);\r\n\t\tconst offers = hotels[index].offers;\r\n\t\tconst cityCoord = hotels[index].coords;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--main\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={reload}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className={offers.length ? 'page__main page__main--index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t : 'page__main page__main--index page__main--index-empty'}>\r\n\r\n\t\t\t\t\t<CitiesList items={hotels}\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCityClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"cities\">\r\n\r\n\t\t\t\t\t\t{offers.length ?\r\n\t\t\t\t\t\t\t<div className=\"cities__places-container container\">\r\n\t\t\t\t\t\t\t\t<section className=\"cities__places places\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"visually-hidden\">Places</h2>\r\n\t\t\t\t\t\t\t\t\t<b className=\"places__found\">{offers.length} places to stay in {city}</b>\r\n\r\n\t\t\t\t\t\t\t\t\t<SortingType\r\n\t\t\t\t\t\t\t\t\t\tkey={city}\r\n\t\t\t\t\t\t\t\t\t\tonChangeOption={this.handleSortOffers}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"cities__places-list places__list tabs__content\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<CardList\r\n\t\t\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\t\t\titems={offers}\r\n\t\t\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<div className=\"cities__right-section\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"cities_map map\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\t\t\t\titems={offers}\r\n\t\t\t\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t: <CitiesNoPlaces city={city}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMain.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n\tonOfferClick: PropTypes.func,\r\n\tonCityClick: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\t// const {id} = ownProps.match.params;\r\n\t//\r\n\treturn Object.assign({}, ownProps, {\r\n\t// \tid,\r\n\t// \tcity: getCityOffer(state, id).city,\r\n\t// \thotels: state.hotels,\r\n\t// \tcityOffer: getCityOffer(state, id),\r\n\t// \tcityOffers: getCityOffers(state, id),\r\n\t// \tfavoriteList: state.favoriteList,\r\n\t\t// isAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\t// currentUser: state.currentUser,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {Main}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Review = (props) => {\r\n\r\n\tconst {review} = props;\r\n\r\n\tconst rating = review.rating * 20;\r\n\r\n\treturn (\r\n\t\t<li className=\"reviews__item\">\r\n\t\t\t<div className=\"reviews__user user\">\r\n\t\t\t\t<div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\r\n\t\t\t\t\t<img className=\"reviews__avatar user__avatar\" src={`/` + review.ava} width=\"54\" height=\"54\" alt=\"Reviews avatar\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className=\"reviews__user-name\">{review.name}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"reviews__info\">\r\n\t\t\t\t<div className=\"reviews__rating rating\">\r\n\t\t\t\t\t<div className=\"reviews__stars rating__stars\">\r\n\t\t\t\t\t\t<span style={{width: rating + '%'}}/>\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"reviews__text\">\r\n\t\t\t\t\t{review.text}\r\n\t\t\t\t</p>\r\n\t\t\t\t<time className=\"reviews__time\" dateTime={review.dateTime}>{review.date}</time>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\nReview.propTypes = {\r\n\treview: PropTypes.object.isRequired\r\n};\r\n\r\nexport default Review;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Review from '../review/review';\r\n\r\nconst ReviewList = (props) => {\r\n\r\n\tconst {reviews} = props;\r\n\r\n\treturn (\r\n\t\t<ul className=\"reviews__list\">\r\n\r\n\t\t\t{reviews.map((it) => {\r\n\r\n\t\t\t\treturn <Review\r\n\t\t\t\t\treview={it}\r\n\t\t\t\t\tkey={it.id}\r\n\t\t\t\t/>\r\n\t\t\t})}\r\n\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nReviewList.propTypes = {\r\n\treviews: PropTypes.array.isRequired\r\n};\r\n\r\nexport default ReviewList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CardList from '../card-list/card-list';\r\n\r\nconst NeighbourhoodList = (props) => {\r\n\r\n\tconst {items, city, favoriteList} = props;\r\n\r\n\tconst handleClick = (item) => props.onClick(item);\r\n\tconst handleMouseOver = (item) => props.onMouseOver(item);\r\n\tconst handleMouseLeave = (e) => props.onMouseLeave(e);\r\n\tconst handleBookmarkClick = (offer, small) => props.onBookmarkClick(offer, small);\r\n\r\n\treturn <CardList\r\n\t\tcity={city}\r\n\t\titems={items}\r\n\t\tfavoriteList={favoriteList}\r\n\t\tonClick={handleClick}\r\n\t\tonMouseOver={handleMouseOver}\r\n\t\tonMouseLeave={handleMouseLeave}\r\n\t\tonBookmarkClick={handleBookmarkClick}\r\n\t/>\r\n};\r\n\r\nNeighbourhoodList.propTypes = {\r\n\titems: PropTypes.array.isRequired,\r\n\tonCLick: PropTypes.func,\r\n\tonMouseOver: PropTypes.func.isRequired,\r\n\tonMouseLeave: PropTypes.func.isRequired\r\n};\r\n\r\nexport default NeighbourhoodList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass FormComments extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\trating: '',\r\n\t\t\treview: '',\r\n\t\t\tisRatingValid: false,\r\n\t\t\tisReviewValid: false,\r\n\t\t\tdisabled: true,\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateForm = () => {\r\n\r\n\t\tthis.setState({\r\n\t\t\tdisabled: !(this.state.isRatingValid && this.state.isReviewValid),\r\n\t\t});\r\n\t};\r\n\r\n\tvalidateField = (name, value) => {\r\n\r\n\t\tlet {isRatingValid, isReviewValid} = this.state;\r\n\t\tconst minValue = 50;\r\n\t\tconst maxValue = 200;\r\n\r\n\t\tswitch (name) {\r\n\r\n\t\t\tcase `rating`: isRatingValid = value.length > 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase `review`: isReviewValid\t= value.length >= minValue && value.length <= maxValue;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tisRatingValid,\r\n\t\t\tisReviewValid\r\n\t\t}, () => this.validateForm());\r\n\t};\r\n\r\n\thandleChange = (e) => {\r\n\r\n\t\tconst {name, value} = e.target;\r\n\r\n\t\tthis.setState({[name]: value}, () => this.validateField(name, value));\r\n\t};\r\n\r\n\tclearForm = (e) => {\r\n\r\n\t\te.target.reset();\r\n\r\n\t\tthis.setState({\r\n\t\t\trating: '',\r\n\t\t\treview: '',\r\n\t\t\tisRatingValid: false,\r\n\t\t\tisReviewValid: false,\r\n\t\t\tdisabled: true,\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = (e) => {\r\n\r\n\t\tconst {onSubmit} = this.props;\r\n\t\te.preventDefault();\r\n\r\n\t\tonSubmit({\r\n\t\t\trating: this.state.rating,\r\n\t\t\treview: this.state.review,\r\n\t\t});\r\n\r\n\t\tthis.clearForm(e);\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form className=\"reviews__form form\"\r\n\t\t\t\t\t\taction=\"#\"\r\n\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t>\r\n\t\t\t\t<label className=\"reviews__label form__label\" htmlFor=\"review\">Your review</label>\r\n\t\t\t\t<div className=\"reviews__rating-form form__rating\">\r\n\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t value=\"5\"\r\n\t\t\t\t\t\t\t\t id=\"5-stars\"\r\n\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"5-stars\" className=\"reviews__rating-label form__rating-label\" title=\"perfect\">\r\n\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t value=\"4\"\r\n\t\t\t\t\t\t\t\t\t id=\"4-stars\"\r\n\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"4-stars\" className=\"reviews__rating-label form__rating-label\" title=\"good\">\r\n\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t value=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t id=\"3-stars\"\r\n\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"3-stars\" className=\"reviews__rating-label form__rating-label\" title=\"not bad\">\r\n\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t\t value=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\t id=\"2-stars\"\r\n\t\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"2-stars\" className=\"reviews__rating-label form__rating-label\" title=\"badly\">\r\n\t\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input className=\"form__rating-input visually-hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"rating\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t id=\"1-star\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"1-star\" className=\"reviews__rating-label form__rating-label\" title=\"terribly\">\r\n\t\t\t\t\t\t\t\t\t\t\t<svg className=\"form__star-image\" width=\"37\" height=\"33\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<use xlinkHref=\"#icon-star\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<textarea className=\"reviews__textarea form__textarea\" id=\"review\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Tell how was your stay, what you like and what can be improved\"\r\n\t\t\t\t\t\t\t\t\tname=\"review\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.textarea}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"reviews__button-wrapper\">\r\n\t\t\t\t\t<p className=\"reviews__help\">\r\n\t\t\t\t\t\tTo submit review please make sure to set <span className=\"reviews__star\">rating</span> and describe your stay with at least <b className=\"reviews__text-amount\">50 characters</b>.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<button className=\"reviews__submit form__submit button\" type=\"submit\"\r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nFormComments.propTypes = {\r\n\tonSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FormComments;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport ReviewList from '../review-list/review-list';\r\nimport Map from '../map/map';\r\nimport NeghbourhoodList from '../neighbourhood-list/neughbourhood-list';\r\nimport FormComments from '../form-comments/form-comments';\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\nimport Header from '../header/header';\r\n\r\nimport {getCityCoord, getCityOffer, getCityOffers, getNhoods} from '../../helpers/helpers';\r\nimport {NUMBER_NEIBOURHOODS} from '../../const';\r\n\r\nclass OfferProperty extends React.PureComponent{\r\n\r\n\tconstructor (props) {\r\n\t\tsuper (props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thoverItem: null,\r\n\t\t\toffer: this.props.cityOffer\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif(prevProps.cityOffer !== this.props.cityOffer) {\r\n\r\n\t\t\twindow.scrollTo(0,0);\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick = (item) => this.setState({offer: item}, () => this.props.onClick(item));\r\n\r\n\thandleMouseOver = (item) => this.setState((prevState) => {\r\n\r\n\t\treturn (prevState.hoverItem !== item) ? {hoverItem: item} : null;\r\n\t});\r\n\r\n\thandleMouseLeave = () => this.setState({hoverItem: null});\r\n\r\n\tisFavorite = () => {\r\n\r\n\t\tconst {cityOffer, favoriteList} = this.props;\r\n\r\n\t\tif (!favoriteList.length) return false;\r\n\r\n\t\treturn favoriteList.findIndex((item) => item.hotelId === cityOffer.hotelId) >= 0;\r\n\t};\r\n\r\n\thandleBookmarkClick = (offer, small) => {\r\n\t\tconst {isAuthorizationRequired, cityOffer, toggleBookmark, favoriteList} = this.props;\r\n\r\n\t\tif (isAuthorizationRequired) {\r\n\r\n\t\t\twindow.location.assign('/login');\r\n\r\n\t\t} else{\r\n\r\n\t\t\tif (small) {\r\n\t\t\t\ttoggleBookmark(offer, favoriteList);\r\n\t\t\t} else {\r\n\t\t\t\ttoggleBookmark(cityOffer, favoriteList);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\r\n\t\tconst {hotels, cityOffers, city, currentUser, isAuthorizationRequired, favoriteList} = this.props;\r\n\t\tconst {offer} = this.state;\r\n\r\n\t\tif (!offer) return null;\r\n\r\n\t\tconst neighbourhoods = getNhoods(offer, cityOffers, NUMBER_NEIBOURHOODS);\r\n\t\tconst cityCoord = getCityCoord(hotels, city);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthorizationRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--property\">\r\n\t\t\t\t\t<section className=\"property\">\r\n\t\t\t\t\t\t<div className=\"property__gallery-container container\">\r\n\t\t\t\t\t\t\t<div className=\"property__gallery\">\r\n\t\t\t\t\t\t\t\t<div className=\"property__image-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"property__image\" src=\"/img/room.jpg\" alt=\"studio\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__image-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"property__image\" src=\"/img/apartment-01.jpg\" alt=\"studio01\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__image-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"property__image\" src=\"/img/apartment-02.jpg\" alt=\"studio02\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__image-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"property__image\" src=\"/img/apartment-03.jpg\" alt=\"studio03\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__image-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"property__image\" src=\"/img/studio-01.jpg\" alt=\"studio04\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__image-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"property__image\" src=\"/img/apartment-01.jpg\" alt=\"studio05\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"property__container container\">\r\n\t\t\t\t\t\t\t<div className=\"property__wrapper\">\r\n\t\t\t\t\t\t\t\t<div className=\"property__mark\">\r\n\t\t\t\t\t\t\t\t\t<span>Premium</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__name-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"property__name\">\r\n\t\t\t\t\t\t\t\t\t\t{offer.title}\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\t\t\t\t\tisActive={this.isFavorite()}\r\n\t\t\t\t\t\t\t\t\t\tonBookmarkClick={(small) => this.handleBookmarkClick(offer, small)}\r\n\t\t\t\t\t\t\t\t\t\tsmall={false}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__rating rating\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"property__stars rating__stars\">\r\n\t\t\t\t\t\t\t\t\t\t<span style={{width: 96 + '%'}}/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<span className=\"property__rating-value rating__value\">4.8</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul className=\"property__features\">\r\n\t\t\t\t\t\t\t\t\t<li className=\"property__feature property__feature--entire\">\r\n\t\t\t\t\t\t\t\t\t\tEntire place\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li className=\"property__feature property__feature--bedrooms\">\r\n\t\t\t\t\t\t\t\t\t\t3 Bedrooms\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li className=\"property__feature property__feature--adults\">\r\n\t\t\t\t\t\t\t\t\t\tMax 4 adults\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<div className=\"property__price\">\r\n\t\t\t\t\t\t\t\t\t<b className=\"property__price-value\">&euro;120</b>\r\n\t\t\t\t\t\t\t\t\t<span className=\"property__price-text\">&nbsp;night</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__inside\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"property__inside-title\">What&apos;s inside</h2>\r\n\t\t\t\t\t\t\t\t\t<ul className=\"property__inside-list\">\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tWi-Fi\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tWashing machine\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tTowels\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tHeating\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tCoffee machine\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tBaby seat\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tKitchen\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tDishwasher\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tCabel TV\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"property__inside-item\">\r\n\t\t\t\t\t\t\t\t\t\t\tFridge\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"property__host\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"property__host-title\">Meet the host</h2>\r\n\t\t\t\t\t\t\t\t\t<div className=\"property__host-user user\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t<img className=\"property__avatar user__avatar\" src=\"/img/avatar-angelina.jpg\" width=\"74\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t height=\"74\" alt=\"Host avatar\"/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"property__user-name\">\r\n    \t                Angelina\r\n    \t              </span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"property__user-status\">\r\n    \t                Pro\r\n    \t              </span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"property__description\">\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"property__text\">\r\n\t\t\t\t\t\t\t\t\t\t\tA quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam. The\r\n\t\t\t\t\t\t\t\t\t\t\tbuilding is green and from 18th century.\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"property__text\">\r\n\t\t\t\t\t\t\t\t\t\t\tAn independent House, strategically located between Rembrand Square and National Opera, but where\r\n\t\t\t\t\t\t\t\t\t\t\tthe bustle of the city comes to rest in this alley flowery and colorful.\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<section className=\"property__reviews reviews\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"reviews__title\">Reviews &middot; <span\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"reviews__amount\">{offer.reviews.length}</span></h2>\r\n\r\n\t\t\t\t\t\t\t\t\t<ReviewList reviews={offer.reviews}/>\r\n\r\n\t\t\t\t\t\t\t\t\t{!isAuthorizationRequired\r\n\t\t\t\t\t\t\t\t\t\t? <FormComments\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={this.submitReviewForm}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section className=\"property_map map\" style={{height: 579 + 'px', marginBottom: 50 + 'px'}}>\r\n\r\n\t\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\t\tcoords={cityCoord}\r\n\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\tofferHover={this.state.hoverItem}\r\n\t\t\t\t\t\t\t\toffer={offer}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<section className=\"near-places places\">\r\n\t\t\t\t\t\t\t<h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\r\n\t\t\t\t\t\t\t<div className=\"near-places__list places__list\">\r\n\r\n\t\t\t\t\t\t\t\t<NeghbourhoodList\r\n\t\t\t\t\t\t\t\t\tcity={city}\r\n\t\t\t\t\t\t\t\t\titems={neighbourhoods}\r\n\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\t\t\tonMouseOver={this.handleMouseOver}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\t\t\t\t\tonBookmarkClick={this.handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOfferProperty.propTypes = {\r\n\thotels: PropTypes.array.isRequired,\r\n\tcity: PropTypes.string.isRequired,\r\n\tcityOffer: PropTypes.object.isRequired,\r\n\tcityOffers: PropTypes.array.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n\tisAuthorizationRequired: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\tconst {id} = ownProps.match.params;\r\n\r\n\treturn Object.assign({}, ownProps, {\r\n\t\tid,\r\n\t\tcity: getCityOffer(state, id).city,\r\n\t\thotels: state.hotels,\r\n\t\tcityOffer: getCityOffer(state, id),\r\n\t\tcityOffers: getCityOffers(state, id),\r\n\t\tfavoriteList: state.favoriteList,\r\n\t\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\t\tcurrentUser: state.currentUser,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {OfferProperty}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferProperty);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Header from '../header/header';\r\n\r\nclass SignIn extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\temail: '',\r\n\t\t\tpassword: '',\r\n\t\t\temailValid: false,\r\n\t\t\tpasswordValid: false,\r\n\t\t\tformValid: false,\r\n\t\t}\r\n\t}\r\n\r\n\thandleSubmit = (e) => {\r\n\r\n\t\tconst {onSubmit} = this.props;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tonSubmit({\r\n\t\t\temail: this.state.email,\r\n\t\t\tpassword: this.state.password,\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tvalidateField = (name, value) => {\r\n\r\n\t\tlet emailValid = this.state.emailValid;\r\n\t\tlet passwordValid = this.state.passwordValid;\r\n\t\tconst minPassLength = 6;\r\n\t\tconst maxPassLength = 12;\r\n\r\n\t\tswitch (name) {\r\n\r\n\t\t\tcase `email`: emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase `password`: passwordValid = value.length >= minPassLength && value.length <= maxPassLength;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\temailValid,\r\n\t\t\tpasswordValid\r\n\t\t}, this.validateForm);\r\n\t};\r\n\r\n\tvalidateForm = () => {\r\n\t\tthis.setState({\r\n\t\t\tformValid: this.state.emailValid && this.state.passwordValid,\r\n\t\t});\r\n\t};\r\n\r\n\thandleChange = (e) => {\r\n\r\n\t\tconst value = e.target.value;\r\n\t\tconst name = e.target.name;\r\n\r\n\t\tthis.setState( {[name]: value}, () => {this.validateField(name, value)} );\r\n\t};\r\n\r\n\thandleCityClick = (city) => this.props.onCityClick(city);\r\n\r\n\trender() {\r\n\r\n\t\tconst {isAuthRequired, currentUser} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"page page--gray page--login\">\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tisAuthorizationRequired={isAuthRequired}\r\n\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\tonLogoClick={() => this.handleCityClick('Paris')}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<main className=\"page__main page__main--login\">\r\n\t\t\t\t\t<div className=\"page__login-container container\">\r\n\t\t\t\t\t\t<section className=\"login\">\r\n\t\t\t\t\t\t\t<h1 className=\"login__title\">Sign in</h1>\r\n\t\t\t\t\t\t\t<form className=\"login__form form\"\r\n\t\t\t\t\t\t\t\t\t\taction=\"#\"\r\n\t\t\t\t\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"login__input-wrapper form__input-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"visually-hidden\">E-mail</label>\r\n\t\t\t\t\t\t\t\t\t<input className=\"login__input form__input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t required=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value={this.state.email}\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"login__input-wrapper form__input-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"visually-hidden\">Password</label>\r\n\t\t\t\t\t\t\t\t\t<input className=\"login__input form__input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t name=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t required=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t value={this.state.password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"login__submit form__submit button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.formValid}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSign in\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t<section className=\"locations locations--login locations--current\">\r\n\t\t\t\t\t\t\t<div className=\"locations__item\">\r\n\t\t\t\t\t\t\t\t<button className=\"locations__item-link buttonLink\">\r\n\t\t\t\t\t\t\t\t\t<span>Amsterdam</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSignIn.propTypes = {\r\n\tonSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SignIn;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst LocationButton = (props) => {\r\n\r\n\tconst {city, onFavoriteCityClick} = props;\r\n\r\n\tconst handleFavotiteCityClick = () => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<div className=\"favorites__locations locations locations--current\">\r\n\t\t\t<div className=\"locations__item\">\r\n\t\t\t\t<Link to=\"/\" className=\"locations__item-link buttonLink\"\r\n\t\t\t\t\t\t\tonClick={handleFavotiteCityClick}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{city}</span>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nLocationButton.propTypes = {\r\n\tcity: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LocationButton;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport BookmarkButton from '../bookmark-button/bookmark-button';\r\n\r\nconst FavoriteCard = (props) => {\r\n\r\n\tconst {item} = props;\r\n\r\n\tconst handleBookmarkClick = () => props.onBookmarkClick(props.item);\r\n\r\n\treturn (\r\n\t\t<article className=\"favorites__card place-card\">\r\n\t\t\t<div className=\"favorites__image-wrapper place-card__image-wrapper\">\r\n\t\t\t\t<Link to={`/offer/${item.hotelId}`} className=\"buttonLink\">\r\n\t\t\t\t\t<img className=\"place-card__image\" src={`/` + item.img} width=\"150\" height=\"110\" alt=\"Place\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"favorites__card-info place-card__info\">\r\n\t\t\t\t<div className=\"place-card__price-wrapper\">\r\n\t\t\t\t\t<div className=\"place-card__price\">\r\n\t\t\t\t\t\t<b className=\"place-card__price-value\">&euro;{item.price}</b>\r\n\t\t\t\t\t\t<span className=\"place-card__price-text\">&#47;&nbsp;{item.priceText}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<BookmarkButton\r\n\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\tisActive={true}\r\n\t\t\t\t\t\tsmall={true}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"place-card__rating rating\">\r\n\t\t\t\t\t<div className=\"place-card__stars rating__stars\">\r\n\t\t\t\t\t\t<span style={{width: 100 + '%'}}/>\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Rating</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h2 className=\"place-card__name\">\r\n\t\t\t\t\t<Link to={`/offer/${item.hotelId}`} className=\"card__title buttonLink\">{item.title}</Link>\r\n\t\t\t\t</h2>\r\n\t\t\t\t<p className=\"place-card__type\">{item.type}</p>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nFavoriteCard.propTypes = {\r\n\titem: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default FavoriteCard;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LocationButton from '../location-button/location-button';\r\nimport FavoriteCard from '../favorite-card/favorite-card';\r\n\r\nconst FavoritesList = (props) => {\r\n\r\n\tconst {favoriteList, onBookmarkClick, onFavoriteCityClick} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => onBookmarkClick(item);\r\n\r\n\tconst handleFavoriteCityClick = (city) => onFavoriteCityClick(city);\r\n\r\n\treturn (\r\n\t\t<ul className=\"favorites__list\">\r\n\r\n\t\t\t{favoriteList.map((cityObj, ind) => {\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li className=\"favorites__locations-items\" key={cityObj.city + ind}>\r\n\r\n\t\t\t\t\t\t<LocationButton\r\n\t\t\t\t\t\t\tcity={cityObj.city}\r\n\t\t\t\t\t\t\tkey={cityObj.city + ind}\r\n\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\tprefix=\"favorites\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"favorites__places\">\r\n\r\n\t\t\t\t\t\t\t{cityObj.favorites.map((hotel) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<FavoriteCard\r\n\t\t\t\t\t\t\t\t\t\t\titem={hotel}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={hotel.hotelId}\r\n\t\t\t\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nFavoritesList.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default FavoritesList;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {ActionCreator} from '../../reducer';\r\n\r\nimport FavoritesList from '../favorites-list/favorites-list';\r\nimport Header from '../header/header';\r\n\r\nconst formatFavoriteList = (arrayOfObject) => {\r\n\r\n\tlet cities = new Set();\r\n\tlet arr = [];\r\n\tlet obj = {\r\n\t\tcity: '',\r\n\t\tfavorites: [],\r\n\t};\r\n\r\n\tarrayOfObject.forEach((it) => cities.add(it.city));\r\n\r\n\tfor(const city of cities) {\r\n\r\n\t\tfor(const favorite of arrayOfObject) {\r\n\r\n\t\t\tif (city === favorite.city) {\r\n\r\n\t\t\t\tobj.city = city;\r\n\t\t\t\tobj.favorites.push(favorite);\r\n\t\t\t}\r\n\t\t}\r\n\t\tarr.push(obj);\r\n\t\tobj = {\r\n\t\t\tcity: '',\r\n\t\t\tfavorites: [],\r\n\t\t};\r\n\t}\r\n\treturn arr;\r\n};\r\n\r\nconst Favorites = (props) => {\r\n\r\n\tconst {favoriteList, toggleBookmark, cityClick, isAuthRequired, currentUser} = props;\r\n\r\n\tconst handleBookmarkClick = (item) => toggleBookmark(item, favoriteList);\r\n\r\n\tconst handleFavoriteCityClick = (city) => cityClick(city);\r\n\r\n\treturn (\r\n\t\t<div className={`page ${!favoriteList.length ? `page--favorites-empty` : ``}`}>\r\n\r\n\t\t\t<Header\r\n\t\t\t\tisAuthorizationRequired={isAuthRequired}\r\n\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t/>\r\n\r\n\t\t\t{favoriteList.length\r\n\t\t\t\t? <main className=\"page__main page__main--favorites\">\r\n\t\t\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t\t\t<section className=\"favorites\">\r\n\t\t\t\t\t\t\t<h1 className=\"favorites__title\">Saved listing</h1>\r\n\r\n\t\t\t\t\t\t\t<FavoritesList\r\n\t\t\t\t\t\t\t\tfavoriteList={formatFavoriteList(favoriteList)}\r\n\t\t\t\t\t\t\t\tonBookmarkClick={handleBookmarkClick}\r\n\t\t\t\t\t\t\t\tonFavoriteCityClick={handleFavoriteCityClick}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t\t: <main className=\"page__main page__main--favorites page__main--favorites-empty\">\r\n\t\t\t\t\t<div className=\"page__favorites-container container\">\r\n\t\t\t\t\t\t<section className=\"favorites favorites--empty\">\r\n\t\t\t\t\t\t\t<h1 className=\"visually-hidden\">Favorites (empty)</h1>\r\n\t\t\t\t\t\t\t<div className=\"favorites__status-wrapper\">\r\n\t\t\t\t\t\t\t\t<b className=\"favorites__status\">Nothing yet saved.</b>\r\n\t\t\t\t\t\t\t\t<p className=\"favorites__status-description\">Save properties to narrow down search or plan yor future\r\n\t\t\t\t\t\t\t\t\ttrips.</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t}\r\n\t\t\t<footer className=\"footer\">\r\n\t\t\t\t<Link to=\"/\" className=\"footer__logo-link\" href=\"main.html\">\r\n\t\t\t\t\t<img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"64\" height=\"33\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</footer>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nFavorites.propTypes = {\r\n\tfavoriteList: PropTypes.array.isRequired,\r\n\tisAuthRequired: PropTypes.bool.isRequired,\r\n\tcurrentUser: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\r\n\treturn Object.assign({}, ownProps, {});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\tcityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n\ttoggleBookmark: (cityOffer, favoriteList) => dispatch(ActionCreator.toggleFavorite(cityOffer, favoriteList)),\r\n});\r\n\r\nexport {Favorites}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites);","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\r\n\treturn (\r\n\t\t<div id=\"preloader\">\r\n\t\t\t<div id=\"loader\"/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport {Router, Switch, Route} from 'react-router-dom';\r\nimport history from '../../history';\r\n\r\nimport {ActionCreator, Operation} from '../../reducer';\r\nimport {getIndex, getLS, setLS} from '../../helpers/helpers';\r\nimport {APP_ROUTE} from '../../const';\r\n\r\nimport Main from '../main/main';\r\nimport OfferProperty from '../offer-property/offer-property';\r\nimport SignIn from '../sign-in/sign-in';\r\nimport Favorites from '../favorites/favorites';\r\nimport Loader from '../loader/loader';\r\n\r\nclass App extends React.PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n\t\t\tactiveOfferId: {},\r\n\t\t\tisHotelsLoaded: false,\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n\r\n  \tconst {hotels, currentUser, favoriteList} = this.props;\r\n\r\n\t\tif (prevProps.hotels !== hotels) {\r\n\t\t\tthis.setState({isHotelsLoaded: true});\r\n\t\t}\r\n\r\n\t\tif (currentUser && prevProps.favoriteList !== favoriteList) {\r\n\r\n\t\t\tlet userList = [];\r\n\t\t\tlet filtered;\r\n\t\t\tconst data = {currentUser, favoriteList};\r\n\r\n\t\t\tlet favoritesLocal = getLS('favorites');\r\n\r\n\t\t\tif (favoritesLocal) {\r\n\r\n\t\t\t\tfiltered = favoritesLocal.filter((it) => it.currentUser.email !== currentUser.email);\r\n\r\n\t\t\t\tfiltered.push(data);\r\n\t\t\t\tsetLS('favorites', filtered);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuserList.push(data);\r\n\t\t\t\tsetLS('favorites', userList);\r\n\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n\r\n\thandleReload = () => {\r\n\r\n\t\tthis.setState((prevState) => ({\r\n\t\t\tisHotelsLoaded: !prevState.isHotelsLoaded,\r\n\t\t}), () => window.location.reload());\r\n\t};\r\n\r\n\thandleOfferClick = (item) => {\r\n\r\n\t\treturn this.setState({activeOfferId: item.id});\r\n\t};\r\n\r\n  render() {\r\n\r\n\t\tconst {hotels, city, currentUser, isAuthorizationRequired, favoriteList, cityClick, login} = this.props;\r\n\r\n\t\tlet cityOffers;\r\n\r\n\t\tif (this.state.isHotelsLoaded && city) {\r\n\r\n\t\t\tcityOffers = hotels[getIndex(hotels, city)].offers;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\tthis.state.isHotelsLoaded && city\r\n\t\t\t\t? <Router history={history}>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.ROOT}>\r\n\t\t\t\t\t\t\t\t<Main\r\n\t\t\t\t\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t\t\t\t\tcityOffers={cityOffers}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleOfferClick}\r\n\t\t\t\t\t\t\t\t\tonCityClick={cityClick}\r\n\t\t\t\t\t\t\t\t\treload={this.handleReload}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.LOGIN}>\r\n\t\t\t\t\t\t\t\t<SignIn\r\n\t\t\t\t\t\t\t\t\tonSubmit={login}\r\n\t\t\t\t\t\t\t\t\tonCityClick={cityClick}\r\n\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\t\tisAuthRequired={isAuthorizationRequired}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route exact path={APP_ROUTE.FAVORITES}>\r\n\t\t\t\t\t\t\t\t<Favorites\r\n\t\t\t\t\t\t\t\t\tfavoriteList={favoriteList}\r\n\t\t\t\t\t\t\t\t\tisAuthRequired={isAuthorizationRequired}\r\n\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={APP_ROUTE.OFFER}\r\n\t\t\t\t\t\t\t\t\t\t render={(props) => <OfferProperty {...props}/>}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Router>\r\n\t\t\t\t: <Loader/>\r\n\t\t);\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  hotels: PropTypes.array.isRequired,\r\n  city: PropTypes.string.isRequired,\r\n  cityClick: PropTypes.func.isRequired,\r\n\tisAuthorizationRequires: PropTypes.bool,\r\n\tcurrentUser: PropTypes.object,\r\n\tlogin: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => Object.assign({}, ownProps, {\r\n  city: state.city,\r\n  hotels: state.hotels,\r\n\tcurrentOffer: state.currentOffer,\r\n\tfavoriteList: state.favoriteList,\r\n\tisAuthorizationRequired: state.isAuthorizationRequired,\r\n\tcurrentUser: state.currentUser,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n\treloadAll: () => dispatch(Operation.reloadAll()),\r\n\tcityClick: (city) => dispatch(ActionCreator.setCity(city)),\r\n\tonClick: (offer) => dispatch(ActionCreator.setCurrentOffer(offer)),\r\n\tlogin: (authData) => dispatch(Operation.login(authData)),\r\n\tsetFavorites: (favoritesList) => dispatch(ActionCreator.setFavorites(favoritesList)),\r\n\tsetCurrentUser: (currentUser) => dispatch(ActionCreator.setCurrentUser(currentUser)),\r\n});\r\n\r\nexport {App};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import axios from 'axios';\r\n\r\nconst createAPI = (onUnauthorized) => {\r\n\r\n\tconst api = axios.create({\r\n\t\tbaseURL: `https://es31-server.appspot.com/six-cities`,\r\n\t\ttimeout: 1000 * 5,\r\n\t\twithCredentials: true,\r\n\t});\r\n\r\n\tconst onSuccess = (response) => response;\r\n\r\n\tconst onFail = (error) => {\r\n\r\n\t\tif (error.response.status === 403) {\r\n\r\n\t\t\tonUnauthorized();\r\n\t\t}\r\n\r\n\t\treturn error;\r\n\t};\r\n\r\n\tapi.interceptors.response.use(onSuccess, onFail);\r\n\r\n\treturn api;\r\n};\r\n\r\nexport default createAPI;\r\n","import {createStore, applyMiddleware} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport thunk from 'redux-thunk';\r\nimport {compose} from 'recompose';\r\nimport {BrowserRouter} from 'react-router-dom';\r\n\r\nimport App from './components/app/app';\r\nimport {reducer, Operation, ActionCreator} from './reducer';\r\nimport createAPI from './api';\r\n\r\n\r\nconst init = () => {\r\n\r\n\tconst onUnauthorized = () => {\r\n\t\tstore.dispatch(ActionCreator.requireAuthorization(true));\r\n\t};\r\n\r\n\tconst api = createAPI(onUnauthorized);\r\n\r\n  const store = createStore(\r\n    reducer,\r\n    compose(\r\n      applyMiddleware(thunk.withExtraArgument(api)),\r\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ ?\r\n\t\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__():(f)=>f\r\n    )\r\n\t);\r\n\r\n  store.dispatch(Operation.loadHotels())\r\n\t\t.then(() => {\r\n\r\n\t\t\tconst city = store.getState().hotels[0].city;\r\n\r\n\t\t\tif (city) store.dispatch(ActionCreator.setCity(city));\r\n\t\t});\r\n  store.dispatch(Operation.checkAuth());\r\n\r\n  ReactDom.render(\r\n    <Provider store={store}>\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<App/>\r\n\t\t\t</BrowserRouter>\r\n    </Provider>,\r\n    document.getElementById(`root`)\r\n  );\r\n};\r\n\r\ninit();\r\n"],"sourceRoot":""}